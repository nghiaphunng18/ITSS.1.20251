{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":["file:///home/nghiaphunng18/HustTutorial/ITSS.1.20251/lib/prisma.ts"],"sourcesContent":["import \"dotenv/config\";\nimport { PrismaPg } from '@prisma/adapter-pg'\nimport { PrismaClient } from '../prisma/generated/client';\n\nconst connectionString = `${process.env.POSTGRES_URL}`\n\nconst adapter = new PrismaPg({ connectionString })\nconst prisma = new PrismaClient({ adapter })\n\nexport { prisma }"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;;;;AAEA,MAAM,mBAAmB,GAAG,QAAQ,GAAG,CAAC,YAAY,EAAE;AAEtD,MAAM,UAAU,IAAI,yKAAQ,CAAC;IAAE;AAAiB;AAChD,MAAM,SAAS,IAAI,wJAAY,CAAC;IAAE;AAAQ","debugId":null}},
    {"offset": {"line": 35, "column": 0}, "map": {"version":3,"sources":["file:///home/nghiaphunng18/HustTutorial/ITSS.1.20251/app/api/classes/%5Bid%5D/groups/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport { prisma } from \"@/lib/prisma\";\n\n// GET /api/classes/[id]/groups - Get all groups in a class\nexport async function GET(\n  request: Request,\n  { params }: { params: Promise<{ id: string }> }\n) {\n  try {\n    const { id: classId } = await params;\n\n    const groups = await prisma.group.findMany({\n      where: { classId },\n      include: {\n        members: {\n          include: {\n            student: {\n              select: {\n                id: true,\n                name: true,\n                email: true,\n                avatar: true,\n                studentCode: true,\n              },\n            },\n          },\n        },\n        assignments: {\n          select: {\n            id: true,\n            title: true,\n            dueDate: true,\n            status: true,\n            maxPoints: true,\n          },\n        },\n      },\n      orderBy: { name: \"asc\" },\n    });\n\n    return NextResponse.json({ groups });\n  } catch (error) {\n    console.error(\"Error fetching groups:\", error);\n    return NextResponse.json(\n      { error: \"Failed to fetch groups\" },\n      { status: 500 }\n    );\n  }\n}\n\n// POST /api/classes/[id]/groups - Create or update groups\nexport async function POST(\n  request: Request,\n  { params }: { params: Promise<{ id: string }> }\n) {\n  try {\n    const { id: classId } = await params;\n    const body = await request.json();\n    const { groups, createdById } = body;\n\n    // Delete existing groups in the class\n    await prisma.group.deleteMany({\n      where: { classId },\n    });\n\n    // Create new groups\n    const createdGroups = await Promise.all(\n      groups.map(async (group: { name: string; memberIds: string[] }) => {\n        const newGroup = await prisma.group.create({\n          data: {\n            classId,\n            name: group.name,\n            createdById,\n            members: {\n              create: group.memberIds.map((studentId) => ({\n                studentId,\n              })),\n            },\n          },\n          include: {\n            members: {\n              include: {\n                student: {\n                  select: {\n                    id: true,\n                    name: true,\n                    email: true,\n                    avatar: true,\n                    studentCode: true,\n                  },\n                },\n              },\n            },\n          },\n        });\n        return newGroup;\n      })\n    );\n\n    return NextResponse.json({ groups: createdGroups });\n  } catch (error) {\n    console.error(\"Error creating groups:\", error);\n    return NextResponse.json(\n      { error: \"Failed to create groups\" },\n      { status: 500 }\n    );\n  }\n}\n\n// DELETE /api/classes/[id]/groups - Delete all groups in a class\nexport async function DELETE(\n  request: Request,\n  { params }: { params: Promise<{ id: string }> }\n) {\n  try {\n    const { id: classId } = await params;\n\n    await prisma.group.deleteMany({\n      where: { classId },\n    });\n\n    return NextResponse.json({ message: \"Groups deleted successfully\" });\n  } catch (error) {\n    console.error(\"Error deleting groups:\", error);\n    return NextResponse.json(\n      { error: \"Failed to delete groups\" },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;;;;;;;AAGO,eAAe,IACpB,OAAgB,EAChB,EAAE,MAAM,EAAuC;IAE/C,IAAI;QACF,MAAM,EAAE,IAAI,OAAO,EAAE,GAAG,MAAM;QAE9B,MAAM,SAAS,MAAM,yHAAM,CAAC,KAAK,CAAC,QAAQ,CAAC;YACzC,OAAO;gBAAE;YAAQ;YACjB,SAAS;gBACP,SAAS;oBACP,SAAS;wBACP,SAAS;4BACP,QAAQ;gCACN,IAAI;gCACJ,MAAM;gCACN,OAAO;gCACP,QAAQ;gCACR,aAAa;4BACf;wBACF;oBACF;gBACF;gBACA,aAAa;oBACX,QAAQ;wBACN,IAAI;wBACJ,OAAO;wBACP,SAAS;wBACT,QAAQ;wBACR,WAAW;oBACb;gBACF;YACF;YACA,SAAS;gBAAE,MAAM;YAAM;QACzB;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE;QAAO;IACpC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,0BAA0B;QACxC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAyB,GAClC;YAAE,QAAQ;QAAI;IAElB;AACF;AAGO,eAAe,KACpB,OAAgB,EAChB,EAAE,MAAM,EAAuC;IAE/C,IAAI;QACF,MAAM,EAAE,IAAI,OAAO,EAAE,GAAG,MAAM;QAC9B,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,MAAM,EAAE,WAAW,EAAE,GAAG;QAEhC,sCAAsC;QACtC,MAAM,yHAAM,CAAC,KAAK,CAAC,UAAU,CAAC;YAC5B,OAAO;gBAAE;YAAQ;QACnB;QAEA,oBAAoB;QACpB,MAAM,gBAAgB,MAAM,QAAQ,GAAG,CACrC,OAAO,GAAG,CAAC,OAAO;YAChB,MAAM,WAAW,MAAM,yHAAM,CAAC,KAAK,CAAC,MAAM,CAAC;gBACzC,MAAM;oBACJ;oBACA,MAAM,MAAM,IAAI;oBAChB;oBACA,SAAS;wBACP,QAAQ,MAAM,SAAS,CAAC,GAAG,CAAC,CAAC,YAAc,CAAC;gCAC1C;4BACF,CAAC;oBACH;gBACF;gBACA,SAAS;oBACP,SAAS;wBACP,SAAS;4BACP,SAAS;gCACP,QAAQ;oCACN,IAAI;oCACJ,MAAM;oCACN,OAAO;oCACP,QAAQ;oCACR,aAAa;gCACf;4BACF;wBACF;oBACF;gBACF;YACF;YACA,OAAO;QACT;QAGF,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,QAAQ;QAAc;IACnD,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,0BAA0B;QACxC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA0B,GACnC;YAAE,QAAQ;QAAI;IAElB;AACF;AAGO,eAAe,OACpB,OAAgB,EAChB,EAAE,MAAM,EAAuC;IAE/C,IAAI;QACF,MAAM,EAAE,IAAI,OAAO,EAAE,GAAG,MAAM;QAE9B,MAAM,yHAAM,CAAC,KAAK,CAAC,UAAU,CAAC;YAC5B,OAAO;gBAAE;YAAQ;QACnB;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAA8B;IACpE,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,0BAA0B;QACxC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA0B,GACnC;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}