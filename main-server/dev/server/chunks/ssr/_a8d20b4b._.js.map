{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/nghiaphunng18/HustTutorial/ITSS.1.20251/components/ui/NotificationBell.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { useLocale, useTranslations } from 'next-intl';\nimport {\n  Badge,\n  Flex,\n  Popover,\n  ScrollArea,\n  Text,\n  Card,\n  Button,\n} from \"@radix-ui/themes\";\nimport {\n  FiBell,\n  FiCheck,\n  FiX,\n  FiUserCheck,\n  FiAlertCircle,\n} from \"react-icons/fi\";\nimport axios from \"@/lib/axios\";\nimport { useAuth } from \"@/contexts/AuthContext\";\n\ninterface Notification {\n  id: string;\n  title: string;\n  message: string;\n  link: string | null;\n  read: boolean;\n  createdAt: string;\n  priority: \"LOW\" | \"NORMAL\" | \"HIGH\" | \"URGENT\";\n  category: {\n    code: string;\n    name: string;\n    icon?: string;\n    color?: string;\n  };\n  metadata?: any;\n}\n\nexport function NotificationBell() {\n  const { user } = useAuth();\n  const router = useRouter();\n  const locale = useLocale();\n  const t = useTranslations('notifications.general');\n  const [notifications, setNotifications] = useState<Notification[]>([]);\n  const [unreadCount, setUnreadCount] = useState(0);\n  const [isOpen, setIsOpen] = useState(false);\n\n  const fetchNotifications = async () => {\n    if (!user) return;\n\n    try {\n      const response = await axios.get(`/api/notifications?userId=${user.id}`);\n      setNotifications(response.data);\n      setUnreadCount(response.data.filter((n: Notification) => !n.read).length);\n    } catch (error) {\n      console.error(\"Failed to fetch notifications:\", error);\n    }\n  };\n\n  useEffect(() => {\n    fetchNotifications();\n\n    // Poll for new notifications every 10 seconds\n    const interval = setInterval(fetchNotifications, 10000);\n    return () => clearInterval(interval);\n  }, [user]);\n\n  const handleMarkAsRead = async (notificationId: string) => {\n    try {\n      await axios.patch(`/api/notifications/${notificationId}`, { read: true });\n      fetchNotifications();\n    } catch (error) {\n      console.error(\"Failed to mark notification as read:\", error);\n    }\n  };\n\n  const handleNotificationClick = async (notification: Notification) => {\n    if (!notification.read) {\n      await handleMarkAsRead(notification.id);\n    }\n\n    if (notification.link) {\n      router.push(notification.link);\n      setIsOpen(false);\n    }\n  };\n\n  const handleMarkAllAsRead = async () => {\n    try {\n      const unreadNotifications = notifications.filter((n) => !n.read);\n      await Promise.all(\n        unreadNotifications.map((n) =>\n          axios.patch(`/api/notifications/${n.id}`, { read: true })\n        )\n      );\n      fetchNotifications();\n    } catch (error) {\n      console.error(\"Failed to mark all as read:\", error);\n    }\n  };\n\n  const getIconForCategory = (code: string) => {\n    switch (code) {\n      case \"ATTENDANCE_STARTED\":\n        return <FiUserCheck className=\"text-mint-600\" size={20} />;\n      case \"ATTENDANCE_MISSED\":\n        return <FiAlertCircle className=\"text-red-600\" size={20} />;\n      default:\n        return <FiBell className=\"text-gray-600\" size={20} />;\n    }\n  };\n\n  const getPriorityColor = (priority: string) => {\n    switch (priority) {\n      case \"URGENT\":\n        return \"bg-red-100 border-red-300\";\n      case \"HIGH\":\n        return \"bg-orange-100 border-orange-300\";\n      default:\n        return \"bg-white border-gray-200\";\n    }\n  };\n\n  return (\n    <Popover.Root open={isOpen} onOpenChange={setIsOpen}>\n      <Popover.Trigger>\n        <button className=\"relative p-2 hover:bg-mint-100 rounded-full transition-colors\">\n          <FiBell size={24} className=\"text-gray-700\" />\n          {unreadCount > 0 && (\n            <Badge\n              className=\"absolute -top-1 -right-1 bg-red-500 text-white\"\n              size=\"1\"\n            >\n              {unreadCount > 9 ? \"9+\" : unreadCount}\n            </Badge>\n          )}\n        </button>\n      </Popover.Trigger>\n\n      <Popover.Content\n        className=\"w-96 p-0\"\n        style={{ maxHeight: \"500px\" }}\n        align=\"end\"\n      >\n        <Flex direction=\"column\" gap=\"0\">\n          <Flex\n            justify=\"between\"\n            align=\"center\"\n            className=\"p-4 border-b border-gray-200\"\n          >\n            <Text size=\"4\" weight=\"bold\">\n              {t('title')}\n            </Text>\n            {unreadCount > 0 && (\n              <Button\n                size=\"1\"\n                variant=\"ghost\"\n                onClick={handleMarkAllAsRead}\n                className=\"text-mint-600 hover:text-mint-700\"\n              >\n                {t('mark_all_read')}\n              </Button>\n            )}\n          </Flex>\n\n          <ScrollArea style={{ maxHeight: \"400px\" }}>\n            {notifications.length === 0 ? (\n              <Flex\n                direction=\"column\"\n                align=\"center\"\n                gap=\"2\"\n                className=\"p-8 text-center\"\n              >\n                <FiBell size={48} className=\"text-gray-400\" />\n                <Text className=\"text-gray-600\">{t('no_new')}</Text>\n              </Flex>\n            ) : (\n              <Flex direction=\"column\" gap=\"0\">\n                {notifications.map((notification) => (\n                  <div\n                    key={notification.id}\n                    onClick={() => handleNotificationClick(notification)}\n                    className={`p-4 border-b border-gray-100 cursor-pointer hover:bg-gray-50 transition-colors ${\n                      !notification.read ? \"bg-mint-50\" : \"\"\n                    } ${getPriorityColor(notification.priority)}`}\n                  >\n                    <Flex gap=\"3\" align=\"start\">\n                      <div className=\"mt-1\">\n                        {getIconForCategory(notification.category.code)}\n                      </div>\n                      <Flex direction=\"column\" gap=\"1\" style={{ flex: 1 }}>\n                        <Flex justify=\"between\" align=\"start\">\n                          <Text\n                            size=\"2\"\n                            weight=\"bold\"\n                            className=\"text-gray-900\"\n                          >\n                            {notification.title}\n                          </Text>\n                          {!notification.read && (\n                            <div className=\"w-2 h-2 bg-mint-500 rounded-full mt-1 ml-2 shrink-0\" />\n                          )}\n                        </Flex>\n                        <Text size=\"1\" className=\"text-gray-700\">\n                          {notification.message}\n                        </Text>\n                        <Text size=\"1\" className=\"text-gray-500\">\n                          {new Date(notification.createdAt).toLocaleString(\n                            \"vi-VN\",\n                            {\n                              day: \"2-digit\",\n                              month: \"2-digit\",\n                              hour: \"2-digit\",\n                              minute: \"2-digit\",\n                            }\n                          )}\n                        </Text>\n                      </Flex>\n                    </Flex>\n                  </div>\n                ))}\n              </Flex>\n            )}\n          </ScrollArea>\n\n          <Flex\n            justify=\"center\"\n            className=\"p-3 border-t border-gray-200 bg-gray-50\"\n          >\n            <Button\n              variant=\"ghost\"\n              onClick={() => {\n                router.push(`/${locale}/dashboard/student/notifications`);\n                setIsOpen(false);\n              }}\n              className=\"text-mint-600 hover:text-mint-700\"\n            >\n              {t('view_all')}\n            </Button>\n          </Flex>\n        </Flex>\n      </Popover.Content>\n    </Popover.Root>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAOA;AACA;AAtBA;;;;;;;;;AAyCO,SAAS;IACd,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,mIAAO;IACxB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,SAAS,IAAA,+KAAS;IACxB,MAAM,IAAI,IAAA,yMAAe,EAAC;IAC1B,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAiB,EAAE;IACrE,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IAErC,MAAM,qBAAqB;QACzB,IAAI,CAAC,MAAM;QAEX,IAAI;YACF,MAAM,WAAW,MAAM,uHAAK,CAAC,GAAG,CAAC,CAAC,0BAA0B,EAAE,KAAK,EAAE,EAAE;YACvE,iBAAiB,SAAS,IAAI;YAC9B,eAAe,SAAS,IAAI,CAAC,MAAM,CAAC,CAAC,IAAoB,CAAC,EAAE,IAAI,EAAE,MAAM;QAC1E,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,kCAAkC;QAClD;IACF;IAEA,IAAA,kNAAS,EAAC;QACR;QAEA,8CAA8C;QAC9C,MAAM,WAAW,YAAY,oBAAoB;QACjD,OAAO,IAAM,cAAc;IAC7B,GAAG;QAAC;KAAK;IAET,MAAM,mBAAmB,OAAO;QAC9B,IAAI;YACF,MAAM,uHAAK,CAAC,KAAK,CAAC,CAAC,mBAAmB,EAAE,gBAAgB,EAAE;gBAAE,MAAM;YAAK;YACvE;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,wCAAwC;QACxD;IACF;IAEA,MAAM,0BAA0B,OAAO;QACrC,IAAI,CAAC,aAAa,IAAI,EAAE;YACtB,MAAM,iBAAiB,aAAa,EAAE;QACxC;QAEA,IAAI,aAAa,IAAI,EAAE;YACrB,OAAO,IAAI,CAAC,aAAa,IAAI;YAC7B,UAAU;QACZ;IACF;IAEA,MAAM,sBAAsB;QAC1B,IAAI;YACF,MAAM,sBAAsB,cAAc,MAAM,CAAC,CAAC,IAAM,CAAC,EAAE,IAAI;YAC/D,MAAM,QAAQ,GAAG,CACf,oBAAoB,GAAG,CAAC,CAAC,IACvB,uHAAK,CAAC,KAAK,CAAC,CAAC,mBAAmB,EAAE,EAAE,EAAE,EAAE,EAAE;oBAAE,MAAM;gBAAK;YAG3D;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,+BAA+B;QAC/C;IACF;IAEA,MAAM,qBAAqB,CAAC;QAC1B,OAAQ;YACN,KAAK;gBACH,qBAAO,8OAAC,6JAAW;oBAAC,WAAU;oBAAgB,MAAM;;;;;;YACtD,KAAK;gBACH,qBAAO,8OAAC,+JAAa;oBAAC,WAAU;oBAAe,MAAM;;;;;;YACvD;gBACE,qBAAO,8OAAC,wJAAM;oBAAC,WAAU;oBAAgB,MAAM;;;;;;QACnD;IACF;IAEA,MAAM,mBAAmB,CAAC;QACxB,OAAQ;YACN,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO;YACT;gBACE,OAAO;QACX;IACF;IAEA,qBACE,8OAAC,6NAAO,CAAC,IAAI;QAAC,MAAM;QAAQ,cAAc;;0BACxC,8OAAC,6NAAO,CAAC,OAAO;0BACd,cAAA,8OAAC;oBAAO,WAAU;;sCAChB,8OAAC,wJAAM;4BAAC,MAAM;4BAAI,WAAU;;;;;;wBAC3B,cAAc,mBACb,8OAAC,sLAAK;4BACJ,WAAU;4BACV,MAAK;sCAEJ,cAAc,IAAI,OAAO;;;;;;;;;;;;;;;;;0BAMlC,8OAAC,6NAAO,CAAC,OAAO;gBACd,WAAU;gBACV,OAAO;oBAAE,WAAW;gBAAQ;gBAC5B,OAAM;0BAEN,cAAA,8OAAC,oLAAI;oBAAC,WAAU;oBAAS,KAAI;;sCAC3B,8OAAC,oLAAI;4BACH,SAAQ;4BACR,OAAM;4BACN,WAAU;;8CAEV,8OAAC,oLAAI;oCAAC,MAAK;oCAAI,QAAO;8CACnB,EAAE;;;;;;gCAEJ,cAAc,mBACb,8OAAC,wLAAM;oCACL,MAAK;oCACL,SAAQ;oCACR,SAAS;oCACT,WAAU;8CAET,EAAE;;;;;;;;;;;;sCAKT,8OAAC,oMAAU;4BAAC,OAAO;gCAAE,WAAW;4BAAQ;sCACrC,cAAc,MAAM,KAAK,kBACxB,8OAAC,oLAAI;gCACH,WAAU;gCACV,OAAM;gCACN,KAAI;gCACJ,WAAU;;kDAEV,8OAAC,wJAAM;wCAAC,MAAM;wCAAI,WAAU;;;;;;kDAC5B,8OAAC,oLAAI;wCAAC,WAAU;kDAAiB,EAAE;;;;;;;;;;;qDAGrC,8OAAC,oLAAI;gCAAC,WAAU;gCAAS,KAAI;0CAC1B,cAAc,GAAG,CAAC,CAAC,6BAClB,8OAAC;wCAEC,SAAS,IAAM,wBAAwB;wCACvC,WAAW,CAAC,+EAA+E,EACzF,CAAC,aAAa,IAAI,GAAG,eAAe,GACrC,CAAC,EAAE,iBAAiB,aAAa,QAAQ,GAAG;kDAE7C,cAAA,8OAAC,oLAAI;4CAAC,KAAI;4CAAI,OAAM;;8DAClB,8OAAC;oDAAI,WAAU;8DACZ,mBAAmB,aAAa,QAAQ,CAAC,IAAI;;;;;;8DAEhD,8OAAC,oLAAI;oDAAC,WAAU;oDAAS,KAAI;oDAAI,OAAO;wDAAE,MAAM;oDAAE;;sEAChD,8OAAC,oLAAI;4DAAC,SAAQ;4DAAU,OAAM;;8EAC5B,8OAAC,oLAAI;oEACH,MAAK;oEACL,QAAO;oEACP,WAAU;8EAET,aAAa,KAAK;;;;;;gEAEpB,CAAC,aAAa,IAAI,kBACjB,8OAAC;oEAAI,WAAU;;;;;;;;;;;;sEAGnB,8OAAC,oLAAI;4DAAC,MAAK;4DAAI,WAAU;sEACtB,aAAa,OAAO;;;;;;sEAEvB,8OAAC,oLAAI;4DAAC,MAAK;4DAAI,WAAU;sEACtB,IAAI,KAAK,aAAa,SAAS,EAAE,cAAc,CAC9C,SACA;gEACE,KAAK;gEACL,OAAO;gEACP,MAAM;gEACN,QAAQ;4DACV;;;;;;;;;;;;;;;;;;uCAlCH,aAAa,EAAE;;;;;;;;;;;;;;;sCA6C9B,8OAAC,oLAAI;4BACH,SAAQ;4BACR,WAAU;sCAEV,cAAA,8OAAC,wLAAM;gCACL,SAAQ;gCACR,SAAS;oCACP,OAAO,IAAI,CAAC,CAAC,CAAC,EAAE,OAAO,gCAAgC,CAAC;oCACxD,UAAU;gCACZ;gCACA,WAAU;0CAET,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOjB","debugId":null}},
    {"offset": {"line": 381, "column": 0}, "map": {"version":3,"sources":["file:///home/nghiaphunng18/HustTutorial/ITSS.1.20251/i18n/config.ts"],"sourcesContent":["export const locales = ['vi', 'ja'] as const;\nexport type Locale = (typeof locales)[number];\n\nexport const defaultLocale: Locale = 'vi';\n\nexport const localeNames: Record<Locale, string> = {\n  vi: 'Tiếng Việt',\n  ja: '日本語',\n};\n"],"names":[],"mappings":";;;;;;;;AAAO,MAAM,UAAU;IAAC;IAAM;CAAK;AAG5B,MAAM,gBAAwB;AAE9B,MAAM,cAAsC;IACjD,IAAI;IACJ,IAAI;AACN","debugId":null}},
    {"offset": {"line": 402, "column": 0}, "map": {"version":3,"sources":["file:///home/nghiaphunng18/HustTutorial/ITSS.1.20251/components/ui/LanguageSwitcher.tsx"],"sourcesContent":["\"use client\";\n\nimport { useLocale } from 'next-intl';\nimport { useRouter, usePathname } from 'next/navigation';\nimport { Select } from '@radix-ui/themes';\nimport { locales, localeNames, type Locale } from '@/i18n/config';\n\nexport function LanguageSwitcher() {\n  const locale = useLocale() as Locale;\n  const router = useRouter();\n  const pathname = usePathname();\n\n  const handleChange = (newLocale: string) => {\n    // Replace the current locale in the pathname with the new one\n    // pathname is like \"/vi/dashboard\" or \"/ja/login\"\n    const segments = pathname.split('/');\n    \n    // If first segment after \"/\" is a locale, replace it\n    if (segments[1] && locales.includes(segments[1] as Locale)) {\n      segments[1] = newLocale;\n    } else {\n      // If no locale in path, add it\n      segments.splice(1, 0, newLocale);\n    }\n    \n    const newPathname = segments.join('/');\n    router.push(newPathname);\n    router.refresh();\n  };\n\n  return (\n    <Select.Root value={locale} onValueChange={handleChange}>\n      <Select.Trigger />\n      <Select.Content>\n        {locales.map((loc) => (\n          <Select.Item key={loc} value={loc}>\n            {localeNames[loc]}\n          </Select.Item>\n        ))}\n      </Select.Content>\n    </Select.Root>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOO,SAAS;IACd,MAAM,SAAS,IAAA,+KAAS;IACxB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,WAAW,IAAA,iJAAW;IAE5B,MAAM,eAAe,CAAC;QACpB,8DAA8D;QAC9D,kDAAkD;QAClD,MAAM,WAAW,SAAS,KAAK,CAAC;QAEhC,qDAAqD;QACrD,IAAI,QAAQ,CAAC,EAAE,IAAI,yHAAO,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAAE,GAAa;YAC1D,QAAQ,CAAC,EAAE,GAAG;QAChB,OAAO;YACL,+BAA+B;YAC/B,SAAS,MAAM,CAAC,GAAG,GAAG;QACxB;QAEA,MAAM,cAAc,SAAS,IAAI,CAAC;QAClC,OAAO,IAAI,CAAC;QACZ,OAAO,OAAO;IAChB;IAEA,qBACE,8OAAC,0NAAM,CAAC,IAAI;QAAC,OAAO;QAAQ,eAAe;;0BACzC,8OAAC,0NAAM,CAAC,OAAO;;;;;0BACf,8OAAC,0NAAM,CAAC,OAAO;0BACZ,yHAAO,CAAC,GAAG,CAAC,CAAC,oBACZ,8OAAC,0NAAM,CAAC,IAAI;wBAAW,OAAO;kCAC3B,6HAAW,CAAC,IAAI;uBADD;;;;;;;;;;;;;;;;AAO5B","debugId":null}},
    {"offset": {"line": 470, "column": 0}, "map": {"version":3,"sources":["file:///home/nghiaphunng18/HustTutorial/ITSS.1.20251/components/ui/DashboardNavBar.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport { usePathname } from \"next/navigation\";\nimport { useLocale, useTranslations } from 'next-intl';\nimport {\n  Button,\n  Container,\n  Flex,\n  Avatar,\n  DropdownMenu,\n} from \"@radix-ui/themes\";\nimport { FiBook, FiLogOut, FiUser, FiSettings } from \"react-icons/fi\";\nimport { useAuth } from \"@/contexts/AuthContext\";\nimport { NotificationBell } from \"./NotificationBell\";\nimport { LanguageSwitcher } from \"./LanguageSwitcher\";\n\ninterface DashboardNavBarProps {\n  tabs: { label: string; href: string; icon: React.ReactNode }[];\n}\n\nexport default function DashboardNavBar({ tabs }: DashboardNavBarProps) {\n  const pathname = usePathname();\n  const { user, logout } = useAuth();\n  const locale = useLocale();\n  const t = useTranslations('navigation.settings');\n  const tAuth = useTranslations('authentication.logout');\n\n  const getDashboardUrl = () => {\n    if (!user) return `/${locale}`;\n    if (user.role === \"ADMINISTRATOR\") return `/${locale}/dashboard/admin`;\n    if (user.role === \"TEACHER\") return `/${locale}/dashboard/teacher/classes`;\n    return `/${locale}/dashboard/student/classes`;\n  };\n\n  return (\n    <nav className=\"sticky top-0 z-40 bg-white/90 backdrop-blur-md border-b border-mint-200 shadow-sm\">\n      <Container size=\"4\">\n        <Flex justify=\"between\" align=\"center\" py=\"3\">\n          {/* Logo */}\n          <Link\n            href={getDashboardUrl()}\n            className=\"flex items-center gap-2 hover:opacity-80 transition-opacity\"\n          >\n            <div className=\"bg-mint-500 p-2 rounded-lg\">\n              <FiBook className=\"text-white\" size={20} />\n            </div>\n            <span className=\"font-bold text-lg text-mint-700\">HUST LMS</span>\n          </Link>\n\n          {/* Navigation Tabs */}\n          <Flex gap=\"1\" align=\"center\">\n            {tabs.map((tab) => {\n              const isActive =\n                pathname === tab.href || pathname?.startsWith(tab.href + \"/\");\n              return (\n                <Link key={tab.href} href={tab.href}>\n                  <Button\n                    variant={isActive ? \"solid\" : \"ghost\"}\n                    className={\n                      isActive\n                        ? \"bg-mint-500 text-white\"\n                        : \"text-gray-700 hover:bg-mint-50\"\n                    }\n                  >\n                    <Flex align=\"center\" gap=\"2\">\n                      {tab.icon}\n                      {tab.label}\n                    </Flex>\n                  </Button>\n                </Link>\n              );\n            })}\n          </Flex>\n\n          {/* Right side: Notifications + User Menu */}\n          <Flex align=\"center\" gap=\"2\">\n            {/* Notification Bell - Only show for students and teachers */}\n            {user && (user.role === \"STUDENT\" || user.role === \"TEACHER\") && (\n              <NotificationBell />\n            )}\n            \n            {/* Language Switcher */}\n            <LanguageSwitcher />\n\n            {/* User Menu */}\n            <DropdownMenu.Root>\n              <DropdownMenu.Trigger>\n                <Button variant=\"ghost\" className=\"cursor-pointer\">\n                  <Flex align=\"center\" gap=\"2\">\n                    <Avatar\n                      size=\"2\"\n                      src={user?.avatar}\n                      fallback={user?.name?.charAt(0) || \"U\"}\n                      className=\"bg-mint-500\"\n                    />\n                    <span className=\"text-sm font-medium text-gray-700\">\n                      {user?.name}\n                    </span>\n                  </Flex>\n                </Button>\n              </DropdownMenu.Trigger>\n              <DropdownMenu.Content>\n                <DropdownMenu.Item>\n                  <Link\n                    href={`/${locale}/dashboard/settings`}\n                    className=\"flex items-center gap-2\"\n                  >\n                    <FiSettings size={16} />\n                    {t('account_settings')}\n                  </Link>\n                </DropdownMenu.Item>\n                <DropdownMenu.Item>\n                  <Link\n                    href={`/${locale}/dashboard/profile`}\n                    className=\"flex items-center gap-2\"\n                  >\n                    <FiUser size={16} />\n                    {t('profile')}\n                  </Link>\n                </DropdownMenu.Item>\n                <DropdownMenu.Separator />\n                <DropdownMenu.Item color=\"red\" onClick={logout}>\n                  <Flex align=\"center\" gap=\"2\">\n                    <FiLogOut size={16} />\n                    {tAuth('button')}\n                  </Flex>\n                </DropdownMenu.Item>\n              </DropdownMenu.Content>\n            </DropdownMenu.Root>\n          </Flex>\n        </Flex>\n      </Container>\n    </nav>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 768, "column": 0}, "map": {"version":3,"sources":["file:///home/nghiaphunng18/HustTutorial/ITSS.1.20251/components/ui/ClassHeader.tsx"],"sourcesContent":["import {\n  Card,\n  Flex,\n  Badge,\n  Heading,\n  Text,\n  Button,\n  Avatar,\n} from \"@radix-ui/themes\";\nimport {\n  FiCheckCircle,\n  FiUsers,\n  FiFileText,\n  FiMessageSquare,\n  FiLock,\n  FiGlobe,\n} from \"react-icons/fi\";\nimport { ReactNode } from \"react\";\n\ninterface ClassHeaderProps {\n  classData: {\n    code: string;\n    name: string;\n    description: string | null;\n    isPrivate?: boolean;\n    teachers?: Array<{\n      teacher: { id: string; name: string; avatar: string | null };\n    }>;\n    enrollments: Array<any>;\n    assignments?: Array<any>;\n    posts?: Array<any>;\n  };\n  isEnrolled: boolean;\n  enrolledLabel: string;\n  availableLabel?: string;\n  onBack: () => void;\n  actionButton: ReactNode;\n  role?: \"student\" | \"teacher\";\n}\n\nexport default function ClassHeader({\n  classData,\n  isEnrolled,\n  enrolledLabel,\n  availableLabel = \"Có sẵn\",\n  onBack,\n  actionButton,\n  role = \"student\",\n}: ClassHeaderProps) {\n  return (\n    <Card className=\"bg-white p-6\">\n      <Flex direction=\"column\" gap=\"3\">\n        <Flex justify=\"between\" align=\"start\">\n          <div className=\"flex-1 max-w-3xl\">\n            <Flex align=\"center\" gap=\"2\" className=\"mb-2\">\n              <Badge color=\"mint\" size=\"2\">\n                {classData.code}\n              </Badge>\n              {classData.isPrivate ? (\n                <Badge color=\"purple\" size=\"2\">\n                  <FiLock size={12} /> Riêng tư\n                </Badge>\n              ) : (\n                <Badge color=\"blue\" size=\"2\">\n                  <FiGlobe size={12} /> Công khai\n                </Badge>\n              )}\n              {isEnrolled ? (\n                <Badge color=\"green\" size=\"2\">\n                  <FiCheckCircle size={12} /> {enrolledLabel}\n                </Badge>\n              ) : (\n                <Badge color=\"gray\" size=\"2\">\n                  {availableLabel}\n                </Badge>\n              )}\n            </Flex>\n            <Heading size=\"8\" className=\"text-gray-900 mb-2\">\n              {classData.name}\n            </Heading>\n            <Text size=\"3\" className=\"text-gray-600 max-w-2xl\">\n              {classData.description || \"Không có mô tả\"}\n            </Text>\n          </div>\n          <Flex gap=\"2\" className=\"shrink-0\">\n            <Button variant=\"soft\" onClick={onBack}>\n              Quay lại\n            </Button>\n            {actionButton}\n          </Flex>\n        </Flex>\n\n        <Flex gap=\"4\" className=\"mt-4\">\n          {role === \"student\" &&\n            classData.teachers &&\n            classData.teachers.length > 0 && (\n              <Flex align=\"center\" gap=\"2\">\n                <Avatar\n                  size=\"2\"\n                  src={classData.teachers[0]?.teacher.avatar || undefined}\n                  fallback={\n                    classData.teachers[0]?.teacher.name.charAt(0) || \"T\"\n                  }\n                  className=\"bg-mint-500\"\n                />\n                <Text size=\"2\">\n                  GV:{\" \"}\n                  <strong>\n                    {classData.teachers.map((t) => t.teacher.name).join(\", \")}\n                  </strong>\n                </Text>\n              </Flex>\n            )}\n          <Flex align=\"center\" gap=\"2\">\n            <FiUsers className=\"text-mint-600\" size={20} />\n            <Text size=\"2\">\n              <strong>{classData.enrollments.length}</strong> sinh viên\n            </Text>\n          </Flex>\n          {role === \"teacher\" && (\n            <>\n              <Flex align=\"center\" gap=\"2\">\n                <FiFileText className=\"text-mint-600\" size={20} />\n                <Text size=\"2\">\n                  <strong>{classData.assignments?.length || 0}</strong> bài tập\n                </Text>\n              </Flex>\n              <Flex align=\"center\" gap=\"2\">\n                <FiMessageSquare className=\"text-mint-600\" size={20} />\n                <Text size=\"2\">\n                  <strong>{classData.posts?.length || 0}</strong> bài viết\n                </Text>\n              </Flex>\n            </>\n          )}\n        </Flex>\n      </Flex>\n    </Card>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1103, "column": 0}, "map": {"version":3,"sources":["file:///home/nghiaphunng18/HustTutorial/ITSS.1.20251/components/ui/ConfirmDialog.tsx"],"sourcesContent":["import { Dialog, Button, Flex } from \"@radix-ui/themes\";\nimport { ReactNode } from \"react\";\n\ninterface ConfirmDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  title: string;\n  description: string;\n  onConfirm: () => void;\n  confirmLabel?: string;\n  cancelLabel?: string;\n  confirmColor?: \"red\" | \"blue\" | \"green\";\n  trigger?: ReactNode;\n}\n\nexport default function ConfirmDialog({\n  open,\n  onOpenChange,\n  title,\n  description,\n  onConfirm,\n  confirmLabel = \"Xác nhận\",\n  cancelLabel = \"Hủy\",\n  confirmColor = \"red\",\n  trigger,\n}: ConfirmDialogProps) {\n  return (\n    <Dialog.Root open={open} onOpenChange={onOpenChange}>\n      {trigger && <Dialog.Trigger>{trigger}</Dialog.Trigger>}\n      <Dialog.Content style={{ maxWidth: 450 }}>\n        <Dialog.Title>{title}</Dialog.Title>\n        <Dialog.Description size=\"2\" mb=\"4\">\n          {description}\n        </Dialog.Description>\n        <Flex gap=\"3\" justify=\"end\">\n          <Dialog.Close>\n            <Button variant=\"soft\" color=\"gray\">\n              {cancelLabel}\n            </Button>\n          </Dialog.Close>\n          <Button color={confirmColor} onClick={onConfirm}>\n            {confirmLabel}\n          </Button>\n        </Flex>\n      </Dialog.Content>\n    </Dialog.Root>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AAAA;AAAA;;;AAee,SAAS,cAAc,EACpC,IAAI,EACJ,YAAY,EACZ,KAAK,EACL,WAAW,EACX,SAAS,EACT,eAAe,UAAU,EACzB,cAAc,KAAK,EACnB,eAAe,KAAK,EACpB,OAAO,EACY;IACnB,qBACE,8OAAC,0NAAM,CAAC,IAAI;QAAC,MAAM;QAAM,cAAc;;YACpC,yBAAW,8OAAC,0NAAM,CAAC,OAAO;0BAAE;;;;;;0BAC7B,8OAAC,0NAAM,CAAC,OAAO;gBAAC,OAAO;oBAAE,UAAU;gBAAI;;kCACrC,8OAAC,0NAAM,CAAC,KAAK;kCAAE;;;;;;kCACf,8OAAC,0NAAM,CAAC,WAAW;wBAAC,MAAK;wBAAI,IAAG;kCAC7B;;;;;;kCAEH,8OAAC,oLAAI;wBAAC,KAAI;wBAAI,SAAQ;;0CACpB,8OAAC,0NAAM,CAAC,KAAK;0CACX,cAAA,8OAAC,wLAAM;oCAAC,SAAQ;oCAAO,OAAM;8CAC1B;;;;;;;;;;;0CAGL,8OAAC,wLAAM;gCAAC,OAAO;gCAAc,SAAS;0CACnC;;;;;;;;;;;;;;;;;;;;;;;;AAMb","debugId":null}},
    {"offset": {"line": 1197, "column": 0}, "map": {"version":3,"sources":["file:///home/nghiaphunng18/HustTutorial/ITSS.1.20251/components/ui/AttachmentCard.tsx"],"sourcesContent":["\"use client\";\n\nimport { Badge, Card, Flex, Text } from \"@radix-ui/themes\";\nimport {\n  FiFile,\n  FiFileText,\n  FiImage,\n  FiVideo,\n  FiMusic,\n  FiDownload,\n} from \"react-icons/fi\";\nimport { useState } from \"react\";\n\ninterface AttachmentCardProps {\n  attachment: {\n    id: string;\n    fileName: string;\n    fileUrl: string;\n    fileSize?: number | null;\n    mimeType?: string | null;\n  };\n  showDownload?: boolean;\n}\n\nexport function AttachmentCard({\n  attachment,\n  showDownload = true,\n}: AttachmentCardProps) {\n  const [isHovering, setIsHovering] = useState(false);\n\n  // Format file size\n  const formatFileSize = (bytes?: number | null): string => {\n    if (!bytes) return \"Unknown size\";\n    if (bytes < 1024) return `${bytes} B`;\n    if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;\n    if (bytes < 1024 * 1024 * 1024)\n      return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;\n    return `${(bytes / (1024 * 1024 * 1024)).toFixed(1)} GB`;\n  };\n\n  // Get file icon based on MIME type\n  const getFileIcon = () => {\n    const mimeType = attachment.mimeType?.toLowerCase() || \"\";\n\n    if (mimeType.startsWith(\"video/\")) {\n      return <FiVideo size={24} className=\"text-purple-500\" />;\n    }\n    if (mimeType.startsWith(\"image/\")) {\n      return <FiImage size={24} className=\"text-blue-500\" />;\n    }\n    if (mimeType.startsWith(\"audio/\")) {\n      return <FiMusic size={24} className=\"text-pink-500\" />;\n    }\n    if (\n      mimeType.includes(\"pdf\") ||\n      mimeType.includes(\"document\") ||\n      mimeType.includes(\"word\")\n    ) {\n      return <FiFileText size={24} className=\"text-red-500\" />;\n    }\n    if (\n      mimeType.includes(\"spreadsheet\") ||\n      mimeType.includes(\"excel\") ||\n      mimeType.includes(\"csv\")\n    ) {\n      return <FiFileText size={24} className=\"text-green-500\" />;\n    }\n    if (mimeType.includes(\"presentation\") || mimeType.includes(\"powerpoint\")) {\n      return <FiFileText size={24} className=\"text-orange-500\" />;\n    }\n\n    return <FiFile size={24} className=\"text-gray-500\" />;\n  };\n\n  // Get file extension badge\n  const getFileExtension = () => {\n    const ext = attachment.fileName.split(\".\").pop()?.toUpperCase();\n    return ext || \"FILE\";\n  };\n\n  // Check if it's a video file\n  const isVideo =\n    attachment.mimeType?.toLowerCase().startsWith(\"video/\") || false;\n\n  const handleDownload = () => {\n    const link = document.createElement(\"a\");\n    link.href = attachment.fileUrl;\n    link.download = attachment.fileName;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  // Video player\n  if (isVideo) {\n    return (\n      <Card\n        className=\"bg-white p-3 relative\"\n        onMouseEnter={() => setIsHovering(true)}\n        onMouseLeave={() => setIsHovering(false)}\n      >\n        <div className=\"relative\">\n          <video\n            controls\n            className=\"w-full rounded-md\"\n            style={{ maxHeight: \"400px\" }}\n          >\n            <source src={attachment.fileUrl} type={attachment.mimeType || \"\"} />\n            Your browser does not support the video tag.\n          </video>\n          {isHovering && (\n            <div className=\"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-3 rounded-b-md transition-opacity duration-200\">\n              <Text size=\"2\" className=\"text-white font-medium\">\n                {attachment.fileName}\n              </Text>\n            </div>\n          )}\n        </div>\n        {showDownload && (\n          <Flex justify=\"between\" align=\"center\" className=\"mt-2\">\n            <Text size=\"1\" className=\"text-gray-500\">\n              {formatFileSize(attachment.fileSize)}\n            </Text>\n            <button\n              onClick={handleDownload}\n              className=\"text-mint-600 hover:text-mint-700 flex items-center gap-1\"\n            >\n              <FiDownload size={14} />\n              <Text size=\"1\">Tải xuống</Text>\n            </button>\n          </Flex>\n        )}\n      </Card>\n    );\n  }\n\n  // Regular file card\n  return (\n    <Card className=\"bg-white hover:bg-gray-50 transition-colors\">\n      <Flex gap=\"3\" align=\"center\" className=\"p-2\">\n        <div className=\"flex-shrink-0\">{getFileIcon()}</div>\n        <Flex direction=\"column\" gap=\"1\" className=\"flex-1 min-w-0\">\n          <Text size=\"2\" weight=\"medium\" className=\"truncate\">\n            {attachment.fileName}\n          </Text>\n          <Flex align=\"center\" gap=\"2\">\n            <Badge size=\"1\" color=\"gray\">\n              {getFileExtension()}\n            </Badge>\n            <Text size=\"1\" className=\"text-gray-500\">\n              {formatFileSize(attachment.fileSize)}\n            </Text>\n          </Flex>\n        </Flex>\n        {showDownload && (\n          <button\n            onClick={handleDownload}\n            className=\"flex-shrink-0 text-mint-600 hover:text-mint-700 p-2 rounded hover:bg-mint-50 transition-colors\"\n            title=\"Tải xuống\"\n          >\n            <FiDownload size={18} />\n          </button>\n        )}\n      </Flex>\n    </Card>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1513, "column": 0}, "map": {"version":3,"sources":["file:///home/nghiaphunng18/HustTutorial/ITSS.1.20251/components/ui/DocumentViewer.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { Badge, Button, Card, Dialog, Flex, Heading, Text } from \"@radix-ui/themes\";\nimport {\n  FiFile,\n  FiFileText,\n  FiDownload,\n  FiExternalLink,\n  FiX,\n} from \"react-icons/fi\";\nimport { useTranslations } from \"next-intl\";\n\ninterface DocumentViewerProps {\n  attachment: {\n    id: string;\n    fileName: string;\n    fileUrl: string;\n    fileSize?: number | null;\n    mimeType?: string | null;\n  };\n  trigger?: React.ReactNode;\n}\n\nexport function DocumentViewer({ attachment, trigger }: DocumentViewerProps) {\n  const [isOpen, setIsOpen] = useState(false);\n  const t = useTranslations('common.files');\n\n  // Format file size\n  const formatFileSize = (bytes?: number | null): string => {\n    if (!bytes) return \"Unknown size\";\n    if (bytes < 1024) return `${bytes} B`;\n    if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;\n    if (bytes < 1024 * 1024 * 1024)\n      return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;\n    return `${(bytes / (1024 * 1024 * 1024)).toFixed(1)} GB`;\n  };\n\n  // Get file extension\n  const getFileExtension = () => {\n    const ext = attachment.fileName.split(\".\").pop()?.toUpperCase();\n    return ext || \"FILE\";\n  };\n\n  // Get file icon\n  const getFileIcon = () => {\n    const mimeType = attachment.mimeType?.toLowerCase() || \"\";\n\n    if (mimeType.includes(\"pdf\")) {\n      return <FiFileText size={20} className=\"text-red-500\" />;\n    }\n    if (mimeType.includes(\"document\") || mimeType.includes(\"word\")) {\n      return <FiFileText size={20} className=\"text-blue-600\" />;\n    }\n    if (mimeType.includes(\"spreadsheet\") || mimeType.includes(\"excel\")) {\n      return <FiFileText size={20} className=\"text-green-600\" />;\n    }\n    if (mimeType.includes(\"presentation\") || mimeType.includes(\"powerpoint\")) {\n      return <FiFileText size={20} className=\"text-orange-500\" />;\n    }\n\n    return <FiFile size={20} className=\"text-gray-500\" />;\n  };\n\n  // Check if file can be previewed\n  const canPreview = () => {\n    const mimeType = attachment.mimeType?.toLowerCase() || \"\";\n    return mimeType.includes(\"pdf\");\n  };\n\n  // Handle download\n  const handleDownload = () => {\n    const link = document.createElement(\"a\");\n    link.href = attachment.fileUrl;\n    link.download = attachment.fileName;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  // Handle open in new tab\n  const handleOpenInNewTab = () => {\n    window.open(attachment.fileUrl, \"_blank\");\n  };\n\n  const defaultTrigger = (\n    <Card className=\"bg-white hover:bg-gray-50 transition-colors cursor-pointer\">\n      <Flex gap=\"3\" align=\"center\" className=\"p-3\">\n        <div className=\"flex-shrink-0\">{getFileIcon()}</div>\n        <Flex direction=\"column\" gap=\"1\" className=\"flex-1 min-w-0\">\n          <Text size=\"2\" weight=\"medium\" className=\"truncate\">\n            {attachment.fileName}\n          </Text>\n          <Flex align=\"center\" gap=\"2\">\n            <Badge size=\"1\" color=\"gray\">\n              {getFileExtension()}\n            </Badge>\n            <Text size=\"1\" className=\"text-gray-500\">\n              {formatFileSize(attachment.fileSize)}\n            </Text>\n          </Flex>\n        </Flex>\n        <Button\n          size=\"1\"\n          variant=\"soft\"\n          onClick={(e) => {\n            e.stopPropagation();\n            handleDownload();\n          }}\n        >\n          <FiDownload size={16} />\n        </Button>\n      </Flex>\n    </Card>\n  );\n\n  return (\n    <Dialog.Root open={isOpen} onOpenChange={setIsOpen}>\n      <Dialog.Trigger>\n        {trigger || defaultTrigger}\n      </Dialog.Trigger>\n\n      <Dialog.Content style={{ maxWidth: \"90vw\", maxHeight: \"90vh\" }}>\n        <Flex direction=\"column\" gap=\"3\" style={{ height: \"85vh\" }}>\n          {/* Header */}\n          <Flex align=\"center\" justify=\"between\" gap=\"3\">\n            <Flex align=\"center\" gap=\"2\" className=\"flex-1 min-w-0\">\n              {getFileIcon()}\n              <Flex direction=\"column\" gap=\"1\" className=\"flex-1 min-w-0\">\n                <Heading size=\"4\" className=\"truncate\">\n                  {attachment.fileName}\n                </Heading>\n                <Flex align=\"center\" gap=\"2\">\n                  <Badge size=\"1\" color=\"gray\">\n                    {getFileExtension()}\n                  </Badge>\n                  <Text size=\"1\" className=\"text-gray-500\">\n                    {formatFileSize(attachment.fileSize)}\n                  </Text>\n                </Flex>\n              </Flex>\n            </Flex>\n            <Dialog.Close>\n              <Button variant=\"soft\" color=\"gray\" size=\"1\">\n                <FiX size={16} />\n              </Button>\n            </Dialog.Close>\n          </Flex>\n\n          {/* Actions */}\n          <Flex gap=\"2\">\n            <Button\n              size=\"2\"\n              variant=\"soft\"\n              onClick={handleDownload}\n            >\n              <FiDownload size={16} /> {t('download')}\n            </Button>\n            <Button\n              size=\"2\"\n              variant=\"soft\"\n              color=\"gray\"\n              onClick={handleOpenInNewTab}\n            >\n              <FiExternalLink size={16} /> {t('open_new_tab')}\n            </Button>\n          </Flex>\n\n          {/* Document Preview */}\n          <div className=\"flex-1 overflow-auto border rounded-md bg-gray-50\">\n            {canPreview() ? (\n              <iframe\n                src={attachment.fileUrl}\n                className=\"w-full h-full\"\n                title={attachment.fileName}\n                style={{ minHeight: \"600px\" }}\n              />\n            ) : (\n              <Flex\n                direction=\"column\"\n                align=\"center\"\n                justify=\"center\"\n                gap=\"3\"\n                className=\"h-full\"\n              >\n                {getFileIcon()}\n                <Flex direction=\"column\" align=\"center\" gap=\"2\">\n                  <Text size=\"3\" weight=\"medium\">\n                    {t('no_preview')}\n                  </Text>\n                  <Text size=\"2\" className=\"text-gray-500\">\n                    {attachment.mimeType?.includes(\"word\") || \n                     attachment.mimeType?.includes(\"document\")\n                      ? t('word_no_preview')\n                      : t('download_to_view')}\n                  </Text>\n                  <Button size=\"3\" onClick={handleDownload} className=\"mt-2\">\n                    <FiDownload size={18} /> {t('download_file')}\n                  </Button>\n                </Flex>\n              </Flex>\n            )}\n          </div>\n        </Flex>\n      </Dialog.Content>\n    </Dialog.Root>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAOA;AAXA;;;;;;AAwBO,SAAS,eAAe,EAAE,UAAU,EAAE,OAAO,EAAuB;IACzE,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IACrC,MAAM,IAAI,IAAA,yMAAe,EAAC;IAE1B,mBAAmB;IACnB,MAAM,iBAAiB,CAAC;QACtB,IAAI,CAAC,OAAO,OAAO;QACnB,IAAI,QAAQ,MAAM,OAAO,GAAG,MAAM,EAAE,CAAC;QACrC,IAAI,QAAQ,OAAO,MAAM,OAAO,GAAG,CAAC,QAAQ,IAAI,EAAE,OAAO,CAAC,GAAG,GAAG,CAAC;QACjE,IAAI,QAAQ,OAAO,OAAO,MACxB,OAAO,GAAG,CAAC,QAAQ,CAAC,OAAO,IAAI,CAAC,EAAE,OAAO,CAAC,GAAG,GAAG,CAAC;QACnD,OAAO,GAAG,CAAC,QAAQ,CAAC,OAAO,OAAO,IAAI,CAAC,EAAE,OAAO,CAAC,GAAG,GAAG,CAAC;IAC1D;IAEA,qBAAqB;IACrB,MAAM,mBAAmB;QACvB,MAAM,MAAM,WAAW,QAAQ,CAAC,KAAK,CAAC,KAAK,GAAG,IAAI;QAClD,OAAO,OAAO;IAChB;IAEA,gBAAgB;IAChB,MAAM,cAAc;QAClB,MAAM,WAAW,WAAW,QAAQ,EAAE,iBAAiB;QAEvD,IAAI,SAAS,QAAQ,CAAC,QAAQ;YAC5B,qBAAO,8OAAC,4JAAU;gBAAC,MAAM;gBAAI,WAAU;;;;;;QACzC;QACA,IAAI,SAAS,QAAQ,CAAC,eAAe,SAAS,QAAQ,CAAC,SAAS;YAC9D,qBAAO,8OAAC,4JAAU;gBAAC,MAAM;gBAAI,WAAU;;;;;;QACzC;QACA,IAAI,SAAS,QAAQ,CAAC,kBAAkB,SAAS,QAAQ,CAAC,UAAU;YAClE,qBAAO,8OAAC,4JAAU;gBAAC,MAAM;gBAAI,WAAU;;;;;;QACzC;QACA,IAAI,SAAS,QAAQ,CAAC,mBAAmB,SAAS,QAAQ,CAAC,eAAe;YACxE,qBAAO,8OAAC,4JAAU;gBAAC,MAAM;gBAAI,WAAU;;;;;;QACzC;QAEA,qBAAO,8OAAC,wJAAM;YAAC,MAAM;YAAI,WAAU;;;;;;IACrC;IAEA,iCAAiC;IACjC,MAAM,aAAa;QACjB,MAAM,WAAW,WAAW,QAAQ,EAAE,iBAAiB;QACvD,OAAO,SAAS,QAAQ,CAAC;IAC3B;IAEA,kBAAkB;IAClB,MAAM,iBAAiB;QACrB,MAAM,OAAO,SAAS,aAAa,CAAC;QACpC,KAAK,IAAI,GAAG,WAAW,OAAO;QAC9B,KAAK,QAAQ,GAAG,WAAW,QAAQ;QACnC,SAAS,IAAI,CAAC,WAAW,CAAC;QAC1B,KAAK,KAAK;QACV,SAAS,IAAI,CAAC,WAAW,CAAC;IAC5B;IAEA,yBAAyB;IACzB,MAAM,qBAAqB;QACzB,OAAO,IAAI,CAAC,WAAW,OAAO,EAAE;IAClC;IAEA,MAAM,+BACJ,8OAAC,oLAAI;QAAC,WAAU;kBACd,cAAA,8OAAC,oLAAI;YAAC,KAAI;YAAI,OAAM;YAAS,WAAU;;8BACrC,8OAAC;oBAAI,WAAU;8BAAiB;;;;;;8BAChC,8OAAC,oLAAI;oBAAC,WAAU;oBAAS,KAAI;oBAAI,WAAU;;sCACzC,8OAAC,oLAAI;4BAAC,MAAK;4BAAI,QAAO;4BAAS,WAAU;sCACtC,WAAW,QAAQ;;;;;;sCAEtB,8OAAC,oLAAI;4BAAC,OAAM;4BAAS,KAAI;;8CACvB,8OAAC,sLAAK;oCAAC,MAAK;oCAAI,OAAM;8CACnB;;;;;;8CAEH,8OAAC,oLAAI;oCAAC,MAAK;oCAAI,WAAU;8CACtB,eAAe,WAAW,QAAQ;;;;;;;;;;;;;;;;;;8BAIzC,8OAAC,wLAAM;oBACL,MAAK;oBACL,SAAQ;oBACR,SAAS,CAAC;wBACR,EAAE,eAAe;wBACjB;oBACF;8BAEA,cAAA,8OAAC,4JAAU;wBAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;IAM1B,qBACE,8OAAC,0NAAM,CAAC,IAAI;QAAC,MAAM;QAAQ,cAAc;;0BACvC,8OAAC,0NAAM,CAAC,OAAO;0BACZ,WAAW;;;;;;0BAGd,8OAAC,0NAAM,CAAC,OAAO;gBAAC,OAAO;oBAAE,UAAU;oBAAQ,WAAW;gBAAO;0BAC3D,cAAA,8OAAC,oLAAI;oBAAC,WAAU;oBAAS,KAAI;oBAAI,OAAO;wBAAE,QAAQ;oBAAO;;sCAEvD,8OAAC,oLAAI;4BAAC,OAAM;4BAAS,SAAQ;4BAAU,KAAI;;8CACzC,8OAAC,oLAAI;oCAAC,OAAM;oCAAS,KAAI;oCAAI,WAAU;;wCACpC;sDACD,8OAAC,oLAAI;4CAAC,WAAU;4CAAS,KAAI;4CAAI,WAAU;;8DACzC,8OAAC,0LAAO;oDAAC,MAAK;oDAAI,WAAU;8DACzB,WAAW,QAAQ;;;;;;8DAEtB,8OAAC,oLAAI;oDAAC,OAAM;oDAAS,KAAI;;sEACvB,8OAAC,sLAAK;4DAAC,MAAK;4DAAI,OAAM;sEACnB;;;;;;sEAEH,8OAAC,oLAAI;4DAAC,MAAK;4DAAI,WAAU;sEACtB,eAAe,WAAW,QAAQ;;;;;;;;;;;;;;;;;;;;;;;;8CAK3C,8OAAC,0NAAM,CAAC,KAAK;8CACX,cAAA,8OAAC,wLAAM;wCAAC,SAAQ;wCAAO,OAAM;wCAAO,MAAK;kDACvC,cAAA,8OAAC,qJAAG;4CAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;sCAMjB,8OAAC,oLAAI;4BAAC,KAAI;;8CACR,8OAAC,wLAAM;oCACL,MAAK;oCACL,SAAQ;oCACR,SAAS;;sDAET,8OAAC,4JAAU;4CAAC,MAAM;;;;;;wCAAM;wCAAE,EAAE;;;;;;;8CAE9B,8OAAC,wLAAM;oCACL,MAAK;oCACL,SAAQ;oCACR,OAAM;oCACN,SAAS;;sDAET,8OAAC,gKAAc;4CAAC,MAAM;;;;;;wCAAM;wCAAE,EAAE;;;;;;;;;;;;;sCAKpC,8OAAC;4BAAI,WAAU;sCACZ,6BACC,8OAAC;gCACC,KAAK,WAAW,OAAO;gCACvB,WAAU;gCACV,OAAO,WAAW,QAAQ;gCAC1B,OAAO;oCAAE,WAAW;gCAAQ;;;;;qDAG9B,8OAAC,oLAAI;gCACH,WAAU;gCACV,OAAM;gCACN,SAAQ;gCACR,KAAI;gCACJ,WAAU;;oCAET;kDACD,8OAAC,oLAAI;wCAAC,WAAU;wCAAS,OAAM;wCAAS,KAAI;;0DAC1C,8OAAC,oLAAI;gDAAC,MAAK;gDAAI,QAAO;0DACnB,EAAE;;;;;;0DAEL,8OAAC,oLAAI;gDAAC,MAAK;gDAAI,WAAU;0DACtB,WAAW,QAAQ,EAAE,SAAS,WAC9B,WAAW,QAAQ,EAAE,SAAS,cAC3B,EAAE,qBACF,EAAE;;;;;;0DAER,8OAAC,wLAAM;gDAAC,MAAK;gDAAI,SAAS;gDAAgB,WAAU;;kEAClD,8OAAC,4JAAU;wDAAC,MAAM;;;;;;oDAAM;oDAAE,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUhD","debugId":null}},
    {"offset": {"line": 1983, "column": 0}, "map": {"version":3,"sources":["file:///home/nghiaphunng18/HustTutorial/ITSS.1.20251/components/ui/VideoPlayer.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState } from \"react\";\nimport { Card, Flex, Text, Button } from \"@radix-ui/themes\";\nimport {\n  FiPlay,\n  FiPause,\n  FiVolume2,\n  FiVolumeX,\n  FiMaximize,\n  FiDownload,\n} from \"react-icons/fi\";\n\ninterface VideoPlayerProps {\n  videoUrl: string;\n  fileName: string;\n  fileSize?: number | null;\n}\n\nexport function VideoPlayer({\n  videoUrl,\n  fileName,\n  fileSize,\n}: VideoPlayerProps) {\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [isMuted, setIsMuted] = useState(false);\n  const videoRef = React.useRef<HTMLVideoElement>(null);\n\n  const togglePlay = () => {\n    if (!videoRef.current) return;\n\n    if (isPlaying) {\n      videoRef.current.pause();\n    } else {\n      videoRef.current.play();\n    }\n    setIsPlaying(!isPlaying);\n  };\n\n  const toggleMute = () => {\n    if (!videoRef.current) return;\n    videoRef.current.muted = !isMuted;\n    setIsMuted(!isMuted);\n  };\n\n  const toggleFullscreen = () => {\n    if (!videoRef.current) return;\n    if (videoRef.current.requestFullscreen) {\n      videoRef.current.requestFullscreen();\n    }\n  };\n\n  const handleDownload = () => {\n    const link = document.createElement(\"a\");\n    link.href = videoUrl;\n    link.download = fileName;\n    link.target = \"_blank\";\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  const formatFileSize = (bytes?: number | null) => {\n    if (!bytes) return \"\";\n    if (bytes < 1024) return `${bytes} B`;\n    if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;\n    if (bytes < 1024 * 1024 * 1024)\n      return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;\n    return `${(bytes / (1024 * 1024 * 1024)).toFixed(1)} GB`;\n  };\n\n  return (\n    <Card className=\"overflow-hidden bg-white\">\n      <div className=\"relative w-full bg-black aspect-video\">\n        <video\n          ref={videoRef}\n          src={videoUrl}\n          className=\"w-full h-full\"\n          onPlay={() => setIsPlaying(true)}\n          onPause={() => setIsPlaying(false)}\n          onClick={togglePlay}\n        >\n          Your browser does not support the video tag.\n        </video>\n\n        {/* Overlay controls */}\n        <div className=\"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4\">\n          <Flex direction=\"column\" gap=\"2\">\n            {/* Video info */}\n            <Flex justify=\"between\" align=\"center\">\n              <Text className=\"text-white text-sm font-medium truncate\">\n                {fileName}\n              </Text>\n              {fileSize && (\n                <Text className=\"text-white/70 text-xs ml-2\">\n                  {formatFileSize(fileSize)}\n                </Text>\n              )}\n            </Flex>\n\n            {/* Controls */}\n            <Flex gap=\"2\" align=\"center\">\n              <Button\n                size=\"2\"\n                variant=\"ghost\"\n                onClick={togglePlay}\n                className=\"text-white hover:bg-white/20\"\n              >\n                {isPlaying ? <FiPause size={20} /> : <FiPlay size={20} />}\n              </Button>\n\n              <Button\n                size=\"2\"\n                variant=\"ghost\"\n                onClick={toggleMute}\n                className=\"text-white hover:bg-white/20\"\n              >\n                {isMuted ? <FiVolumeX size={20} /> : <FiVolume2 size={20} />}\n              </Button>\n\n              <div className=\"flex-1\" />\n\n              <Button\n                size=\"2\"\n                variant=\"ghost\"\n                onClick={handleDownload}\n                className=\"text-white hover:bg-white/20\"\n              >\n                <FiDownload size={18} />\n              </Button>\n\n              <Button\n                size=\"2\"\n                variant=\"ghost\"\n                onClick={toggleFullscreen}\n                className=\"text-white hover:bg-white/20\"\n              >\n                <FiMaximize size={18} />\n              </Button>\n            </Flex>\n          </Flex>\n        </div>\n      </div>\n    </Card>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2213, "column": 0}, "map": {"version":3,"sources":["file:///home/nghiaphunng18/HustTutorial/ITSS.1.20251/components/ui/VoteButtons.tsx"],"sourcesContent":["/**\n * Reddit-style Vote Buttons Component\n * \n * Vertical layout with upvote button, vote count, and downvote button\n * Features optimistic updates for smooth UX\n */\n\nimport { Flex, Text } from \"@radix-ui/themes\";\nimport { FiArrowUp, FiArrowDown } from \"react-icons/fi\";\n\ninterface VoteButtonsProps {\n  votes?: Array<{ voteType: string; userId?: string }>;\n  userVote?: { voteType: string } | null;\n  onVote: (voteType: \"UPVOTE\" | \"DOWNVOTE\") => void;\n  size?: \"small\" | \"medium\" | \"large\";\n}\n\nexport function VoteButtons({\n  votes = [],\n  userVote,\n  onVote,\n  size = \"medium\",\n}: VoteButtonsProps) {\n  // Calculate net votes (upvotes - downvotes)\n  const upvoteCount = votes.filter((v) => v.voteType === \"UPVOTE\").length;\n  const downvoteCount = votes.filter((v) => v.voteType === \"DOWNVOTE\").length;\n  const netVotes = upvoteCount - downvoteCount;\n\n  const isUpvoted = userVote?.voteType === \"UPVOTE\";\n  const isDownvoted = userVote?.voteType === \"DOWNVOTE\";\n\n  // Size configurations\n  const sizeConfig = {\n    small: { icon: 14, text: \"1\", gap: \"1\", padding: \"4px\" },\n    medium: { icon: 16, text: \"2\", gap: \"1\", padding: \"6px\" },\n    large: { icon: 18, text: \"3\", gap: \"2\", padding: \"8px\" },\n  };\n\n  const config = sizeConfig[size];\n\n  return (\n    <Flex\n      direction=\"column\"\n      align=\"center\"\n      gap={config.gap}\n      className=\"select-none\"\n    >\n      {/* Upvote Button */}\n      <button\n        onClick={() => onVote(\"UPVOTE\")}\n        className={`\n          flex items-center justify-center rounded\n          transition-all duration-150 hover:scale-110\n          ${isUpvoted ? \"text-mint-600\" : \"text-gray-500 hover:text-mint-500\"}\n        `}\n        style={{ padding: config.padding }}\n        aria-label=\"Upvote\"\n      >\n        <FiArrowUp\n          size={config.icon}\n          className={isUpvoted ? \"fill-mint-600\" : \"\"}\n          strokeWidth={isUpvoted ? 3 : 2}\n        />\n      </button>\n\n      {/* Vote Count */}\n      <Text\n        size={config.text as any}\n        weight=\"bold\"\n        className={`\n          ${\n            netVotes > 0\n              ? \"text-mint-600\"\n              : netVotes < 0\n              ? \"text-red-600\"\n              : \"text-gray-700\"\n          }\n        `}\n      >\n        {netVotes > 0 ? `+${netVotes}` : netVotes}\n      </Text>\n\n      {/* Downvote Button */}\n      <button\n        onClick={() => onVote(\"DOWNVOTE\")}\n        className={`\n          flex items-center justify-center rounded\n          transition-all duration-150 hover:scale-110\n          ${isDownvoted ? \"text-red-600\" : \"text-gray-500 hover:text-red-500\"}\n        `}\n        style={{ padding: config.padding }}\n        aria-label=\"Downvote\"\n      >\n        <FiArrowDown\n          size={config.icon}\n          className={isDownvoted ? \"fill-red-600\" : \"\"}\n          strokeWidth={isDownvoted ? 3 : 2}\n        />\n      </button>\n    </Flex>\n  );\n}\n"],"names":[],"mappings":"AAAA;;;;;CAKC;;;;;AAED;AAAA;AACA;;;;AASO,SAAS,YAAY,EAC1B,QAAQ,EAAE,EACV,QAAQ,EACR,MAAM,EACN,OAAO,QAAQ,EACE;IACjB,4CAA4C;IAC5C,MAAM,cAAc,MAAM,MAAM,CAAC,CAAC,IAAM,EAAE,QAAQ,KAAK,UAAU,MAAM;IACvE,MAAM,gBAAgB,MAAM,MAAM,CAAC,CAAC,IAAM,EAAE,QAAQ,KAAK,YAAY,MAAM;IAC3E,MAAM,WAAW,cAAc;IAE/B,MAAM,YAAY,UAAU,aAAa;IACzC,MAAM,cAAc,UAAU,aAAa;IAE3C,sBAAsB;IACtB,MAAM,aAAa;QACjB,OAAO;YAAE,MAAM;YAAI,MAAM;YAAK,KAAK;YAAK,SAAS;QAAM;QACvD,QAAQ;YAAE,MAAM;YAAI,MAAM;YAAK,KAAK;YAAK,SAAS;QAAM;QACxD,OAAO;YAAE,MAAM;YAAI,MAAM;YAAK,KAAK;YAAK,SAAS;QAAM;IACzD;IAEA,MAAM,SAAS,UAAU,CAAC,KAAK;IAE/B,qBACE,8OAAC,oLAAI;QACH,WAAU;QACV,OAAM;QACN,KAAK,OAAO,GAAG;QACf,WAAU;;0BAGV,8OAAC;gBACC,SAAS,IAAM,OAAO;gBACtB,WAAW,CAAC;;;UAGV,EAAE,YAAY,kBAAkB,oCAAoC;QACtE,CAAC;gBACD,OAAO;oBAAE,SAAS,OAAO,OAAO;gBAAC;gBACjC,cAAW;0BAEX,cAAA,8OAAC,2JAAS;oBACR,MAAM,OAAO,IAAI;oBACjB,WAAW,YAAY,kBAAkB;oBACzC,aAAa,YAAY,IAAI;;;;;;;;;;;0BAKjC,8OAAC,oLAAI;gBACH,MAAM,OAAO,IAAI;gBACjB,QAAO;gBACP,WAAW,CAAC;UACV,EACE,WAAW,IACP,kBACA,WAAW,IACX,iBACA,gBACL;QACH,CAAC;0BAEA,WAAW,IAAI,CAAC,CAAC,EAAE,UAAU,GAAG;;;;;;0BAInC,8OAAC;gBACC,SAAS,IAAM,OAAO;gBACtB,WAAW,CAAC;;;UAGV,EAAE,cAAc,iBAAiB,mCAAmC;QACtE,CAAC;gBACD,OAAO;oBAAE,SAAS,OAAO,OAAO;gBAAC;gBACjC,cAAW;0BAEX,cAAA,8OAAC,6JAAW;oBACV,MAAM,OAAO,IAAI;oBACjB,WAAW,cAAc,iBAAiB;oBAC1C,aAAa,cAAc,IAAI;;;;;;;;;;;;;;;;;AAKzC","debugId":null}},
    {"offset": {"line": 2337, "column": 0}, "map": {"version":3,"sources":["file:///home/nghiaphunng18/HustTutorial/ITSS.1.20251/components/ui/CommentCard.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  Avatar,\n  Badge,\n  Flex,\n  Text,\n  Button,\n  IconButton,\n  Dialog,\n  TextArea,\n  Tooltip,\n} from \"@radix-ui/themes\";\nimport { FiThumbsUp, FiThumbsDown, FiEdit2, FiTrash2, FiCheck } from \"react-icons/fi\";\nimport { AttachmentCard } from \"./AttachmentCard\";\nimport { DocumentViewer } from \"./DocumentViewer\";\nimport { VideoPlayer } from \"./VideoPlayer\";\nimport { VoteButtons } from \"./VoteButtons\";\nimport { useState } from \"react\";\nimport { useTranslations } from \"next-intl\";\n\ninterface CommentCardProps {\n  comment: {\n    id: string;\n    content: string;\n    createdAt: Date | string;\n    updatedAt: Date | string;\n    authorId: string;\n    author?: {\n      id: string;\n      name: string;\n      avatar?: string;\n      groupName?: string;\n    };\n    votes?: Array<{\n      voteType: string;\n      userId: string;\n    }>;\n    attachments?: Array<{\n      id: string;\n      fileName: string;\n      fileUrl: string;\n      fileSize?: number | null;\n      mimeType?: string | null;\n    }>;\n  };\n  currentUserId: string;\n  userVote?: { voteType: string } | null;\n  onVote?: (commentId: string, voteType: \"UPVOTE\" | \"DOWNVOTE\") => void;\n  onEdit?: (commentId: string, content: string) => void;\n  onDelete?: (commentId: string) => void;\n  isCorrectAnswer?: boolean;\n  isTeacher?: boolean;\n  onMarkAnswer?: (commentId: string, isCurrentAnswer: boolean) => void;\n}\n\nexport function CommentCard({\n  comment,\n  currentUserId,\n  userVote,\n  onVote,\n  onEdit,\n  onDelete,\n  isCorrectAnswer = false,\n  isTeacher = false,\n  onMarkAnswer,\n}: CommentCardProps) {\n  const tPostActions = useTranslations('posts.actions');\n  const [isEditDialogOpen, setIsEditDialogOpen] = useState(false);\n  const [editContent, setEditContent] = useState(comment.content);\n\n  const isAuthor = comment.authorId === currentUserId;\n\n  const handleEditComment = () => {\n    if (onEdit && editContent.trim()) {\n      onEdit(comment.id, editContent);\n      setIsEditDialogOpen(false);\n    }\n  };\n\n  return (\n    <Flex gap=\"2\" direction=\"column\" className={`p-3 rounded-md ${isCorrectAnswer ? 'bg-green-50 border-2 border-green-500' : 'bg-gray-50'}`}>\n      <Flex gap=\"2\">\n        {/* Vote Buttons - Reddit Style */}\n        {onVote && (\n          <div className=\"pt-1\">\n            <VoteButtons\n              votes={comment.votes}\n              userVote={userVote}\n              onVote={(voteType) => onVote(comment.id, voteType)}\n              size=\"small\"\n            />\n          </div>\n        )}\n\n        <Avatar\n          size=\"1\"\n          src={comment.author?.avatar}\n          fallback={comment.author?.name?.charAt(0) || \"U\"}\n          className=\"bg-gray-400\"\n        />\n        <div className=\"flex-1\">\n          <Flex align=\"center\" gap=\"1\" justify=\"between\">\n            <Flex align=\"center\" gap=\"1\" wrap=\"wrap\">\n              <Text size=\"1\" weight=\"bold\">\n                {comment.author?.name}\n              </Text>\n              {comment.author?.groupName && (\n                <Badge size=\"1\" color=\"blue\">\n                  {comment.author.groupName}\n                </Badge>\n              )}\n              {isCorrectAnswer && (\n                <Badge size=\"1\" color=\"green\">\n                  <FiCheck size={12} /> {tPostActions('correct_answer')}\n                </Badge>\n              )}\n              <Text size=\"1\" className=\"text-gray-500\">\n                • {new Date(comment.createdAt).toLocaleDateString(\"vi-VN\")}\n                {comment.updatedAt !== comment.createdAt && \" (đã sửa)\"}\n              </Text>\n            </Flex>\n            <Flex gap=\"1\">\n              {isTeacher && onMarkAnswer && (\n                <Tooltip content={isCorrectAnswer ? tPostActions('unmark_as_answer') : tPostActions('mark_as_answer')}>\n                  <IconButton\n                    size=\"1\"\n                    variant=\"ghost\"\n                    color={isCorrectAnswer ? \"green\" : \"gray\"}\n                    onClick={() => onMarkAnswer(comment.id, isCorrectAnswer)}\n                  >\n                    <FiCheck size={14} />\n                  </IconButton>\n                </Tooltip>\n              )}\n              {isAuthor && (\n                <>\n                  <IconButton\n                  size=\"1\"\n                  variant=\"soft\"\n                  color=\"gray\"\n                  onClick={() => setIsEditDialogOpen(true)}\n                >\n                  <FiEdit2 size={12} />\n                </IconButton>\n                <IconButton\n                  size=\"1\"\n                  variant=\"soft\"\n                  color=\"red\"\n                  onClick={() => onDelete && onDelete(comment.id)}\n                >\n                  <FiTrash2 size={12} />\n                </IconButton>\n                </>\n              )}\n            </Flex>\n          </Flex>\n          <Text size=\"2\" className=\"text-gray-700 mt-1 whitespace-pre-wrap\">\n            {comment.content}\n          </Text>\n\n          {/* Attachments */}\n          {comment.attachments && comment.attachments.length > 0 && (\n            <Flex direction=\"column\" gap=\"2\" className=\"mt-2\">\n              {comment.attachments.map((attachment) => {\n                const mimeType = attachment.mimeType?.toLowerCase() || \"\";\n                \n                // Check file type\n                const isVideo = mimeType.startsWith(\"video/\");\n                const isDocument = \n                  mimeType.includes(\"pdf\") ||\n                  mimeType.includes(\"document\") ||\n                  mimeType.includes(\"word\") ||\n                  mimeType.includes(\"spreadsheet\") ||\n                  mimeType.includes(\"excel\") ||\n                  mimeType.includes(\"presentation\") ||\n                  mimeType.includes(\"powerpoint\");\n\n                // Use appropriate component based on file type\n                if (isVideo) {\n                  return (\n                    <VideoPlayer\n                      key={attachment.id}\n                      videoUrl={attachment.fileUrl}\n                      fileName={attachment.fileName}\n                      fileSize={attachment.fileSize}\n                    />\n                  );\n                } else if (isDocument) {\n                  return (\n                    <DocumentViewer key={attachment.id} attachment={attachment} />\n                  );\n                } else {\n                  return (\n                    <AttachmentCard key={attachment.id} attachment={attachment} />\n                  );\n                }\n              })}\n            </Flex>\n          )}\n        </div>\n      </Flex>\n\n      {/* Edit Dialog */}\n      <Dialog.Root open={isEditDialogOpen} onOpenChange={setIsEditDialogOpen}>\n        <Dialog.Content style={{ maxWidth: 500 }}>\n          <Dialog.Title>Chỉnh sửa bình luận</Dialog.Title>\n          <Flex direction=\"column\" gap=\"3\" className=\"mt-4\">\n            <label>\n              <Text as=\"div\" size=\"2\" mb=\"1\" weight=\"bold\">\n                Nội dung\n              </Text>\n              <TextArea\n                value={editContent}\n                onChange={(e) => setEditContent(e.target.value)}\n                placeholder=\"Nhập nội dung\"\n                rows={4}\n              />\n            </label>\n            <Flex gap=\"3\" justify=\"end\">\n              <Dialog.Close>\n                <Button variant=\"soft\" color=\"gray\">\n                  Hủy\n                </Button>\n              </Dialog.Close>\n              <Button\n                onClick={handleEditComment}\n                className=\"bg-mint-500\"\n                disabled={!editContent.trim()}\n              >\n                Lưu thay đổi\n              </Button>\n            </Flex>\n          </Flex>\n        </Dialog.Content>\n      </Dialog.Root>\n    </Flex>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2736, "column": 0}, "map": {"version":3,"sources":["file:///home/nghiaphunng18/HustTutorial/ITSS.1.20251/components/ui/FilePickerInput.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { Button, Flex, Text, IconButton, Badge, Card } from \"@radix-ui/themes\";\nimport {\n  FiFile,\n  FiFileText,\n  FiImage,\n  FiVideo,\n  FiMusic,\n  FiX,\n  FiPaperclip,\n} from \"react-icons/fi\";\n\nexport interface FileAttachment {\n  fileName: string;\n  fileUrl: string;\n  fileSize: number;\n  mimeType: string;\n}\n\ninterface FilePickerInputProps {\n  value?: FileAttachment[];\n  onChange?: (attachments: FileAttachment[]) => void;\n  attachments?: FileAttachment[];\n  onAttachmentsChange?: (attachments: FileAttachment[]) => void;\n  maxFiles?: number;\n}\n\nexport function FilePickerInput({\n  value,\n  onChange,\n  attachments: attachmentsProp,\n  onAttachmentsChange,\n  maxFiles = 5,\n}: FilePickerInputProps) {\n  // Support both naming conventions\n  const attachments = value ?? attachmentsProp ?? [];\n  const handleChange = onChange ?? onAttachmentsChange ?? (() => {});\n  const [isAdding, setIsAdding] = useState(false);\n  const [newFile, setNewFile] = useState({\n    fileName: \"\",\n    fileUrl: \"\",\n  });\n\n  // Get MIME type from file extension\n  const getMimeType = (fileName: string): string => {\n    const ext = fileName.split(\".\").pop()?.toLowerCase();\n    const mimeTypes: Record<string, string> = {\n      pdf: \"application/pdf\",\n      doc: \"application/msword\",\n      docx: \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\",\n      xls: \"application/vnd.ms-excel\",\n      xlsx: \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\",\n      ppt: \"application/vnd.ms-powerpoint\",\n      pptx: \"application/vnd.openxmlformats-officedocument.presentationml.presentation\",\n      txt: \"text/plain\",\n      csv: \"text/csv\",\n      jpg: \"image/jpeg\",\n      jpeg: \"image/jpeg\",\n      png: \"image/png\",\n      gif: \"image/gif\",\n      svg: \"image/svg+xml\",\n      mp4: \"video/mp4\",\n      webm: \"video/webm\",\n      mp3: \"audio/mpeg\",\n      wav: \"audio/wav\",\n      zip: \"application/zip\",\n      rar: \"application/x-rar-compressed\",\n    };\n    return mimeTypes[ext || \"\"] || \"application/octet-stream\";\n  };\n\n  // Get file icon based on MIME type\n  const getFileIcon = (mimeType: string) => {\n    if (mimeType.startsWith(\"video/\")) {\n      return <FiVideo size={16} className=\"text-purple-500\" />;\n    }\n    if (mimeType.startsWith(\"image/\")) {\n      return <FiImage size={16} className=\"text-blue-500\" />;\n    }\n    if (mimeType.startsWith(\"audio/\")) {\n      return <FiMusic size={16} className=\"text-pink-500\" />;\n    }\n    if (\n      mimeType.includes(\"pdf\") ||\n      mimeType.includes(\"document\") ||\n      mimeType.includes(\"word\")\n    ) {\n      return <FiFileText size={16} className=\"text-red-500\" />;\n    }\n    if (mimeType.includes(\"spreadsheet\") || mimeType.includes(\"excel\")) {\n      return <FiFileText size={16} className=\"text-green-500\" />;\n    }\n    if (mimeType.includes(\"presentation\") || mimeType.includes(\"powerpoint\")) {\n      return <FiFileText size={16} className=\"text-orange-500\" />;\n    }\n    return <FiFile size={16} className=\"text-gray-500\" />;\n  };\n\n  // Format file size\n  const formatFileSize = (bytes: number): string => {\n    if (bytes < 1024) return `${bytes} B`;\n    if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;\n    if (bytes < 1024 * 1024 * 1024)\n      return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;\n    return `${(bytes / (1024 * 1024 * 1024)).toFixed(1)} GB`;\n  };\n\n  const handleFileUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n\n    // Validate file size (10MB limit)\n    if (file.size > 10 * 1024 * 1024) {\n      alert(\"File size must be less than 10MB\");\n      return;\n    }\n\n    setIsAdding(true);\n\n    try {\n      const formData = new FormData();\n      formData.append(\"file\", file);\n\n      const response = await fetch(\"/api/upload\", {\n        method: \"POST\",\n        body: formData,\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Upload failed\");\n      }\n\n      const result = await response.json();\n\n      const newAttachment: FileAttachment = {\n        fileName: result.fileName,\n        fileUrl: result.fileUrl,\n        fileSize: result.fileSize,\n        mimeType: result.mimeType,\n      };\n\n      handleChange([...attachments, newAttachment]);\n    } catch (error) {\n      console.error(\"Failed to upload file:\", error);\n      alert(\"Failed to upload file. Please try again.\");\n    } finally {\n      setIsAdding(false);\n      // Reset file input\n      e.target.value = \"\";\n    }\n  };\n\n  const handleRemoveFile = (index: number) => {\n    const updated = attachments.filter((_, i) => i !== index);\n    handleChange(updated);\n  };\n\n  return (\n    <Flex direction=\"column\" gap=\"2\">\n      {/* File list */}\n      {attachments.length > 0 && (\n        <Flex direction=\"column\" gap=\"2\">\n          {attachments.map((file, index) => (\n            <Card key={index} size=\"1\">\n              <Flex align=\"center\" gap=\"2\" className=\"p-2\">\n                {getFileIcon(file.mimeType)}\n                <Flex direction=\"column\" gap=\"1\" className=\"flex-1 min-w-0\">\n                  <Text size=\"1\" weight=\"medium\" className=\"truncate\">\n                    {file.fileName}\n                  </Text>\n                  <Text size=\"1\" className=\"text-gray-500\">\n                    {formatFileSize(file.fileSize)}\n                  </Text>\n                </Flex>\n                <IconButton\n                  size=\"1\"\n                  variant=\"soft\"\n                  color=\"red\"\n                  onClick={() => handleRemoveFile(index)}\n                >\n                  <FiX size={14} />\n                </IconButton>\n              </Flex>\n            </Card>\n          ))}\n        </Flex>\n      )}\n\n      {/* Add file button/form */}\n      {isAdding ? (\n        <Card size=\"1\">\n          <Flex direction=\"column\" gap=\"2\" className=\"p-3\">\n            <Text size=\"2\" weight=\"medium\">Đang tải file lên...</Text>\n          </Flex>\n        </Card>\n      ) : (\n        attachments.length < maxFiles && (\n          <label className=\"cursor-pointer\">\n            <input\n              type=\"file\"\n              onChange={handleFileUpload}\n              className=\"hidden\"\n              accept=\".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.txt,.csv,.jpg,.jpeg,.png,.gif,.mp4,.webm,.mp3,.wav,.zip,.rar\"\n            />\n            <Button\n              size=\"1\"\n              variant=\"soft\"\n              type=\"button\"\n              className=\"w-full\"\n              asChild\n            >\n              <span>\n                <FiPaperclip size={14} /> Đính kèm file ({attachments.length}/\n                {maxFiles})\n              </span>\n            </Button>\n          </label>\n        )\n      )}\n\n      {attachments.length >= maxFiles && (\n        <Text size=\"1\" className=\"text-gray-500\">\n          Đã đạt giới hạn {maxFiles} file\n        </Text>\n      )}\n    </Flex>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3086, "column": 0}, "map": {"version":3,"sources":["file:///home/nghiaphunng18/HustTutorial/ITSS.1.20251/components/ui/PostCard.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  Avatar,\n  Badge,\n  Button,\n  Card,\n  Flex,\n  Heading,\n  Text,\n  TextField,\n  IconButton,\n  Dialog,\n  TextArea,\n  Select,\n  Tooltip,\n} from \"@radix-ui/themes\";\nimport {\n  FiMessageSquare,\n  FiSend,\n  FiThumbsDown,\n  FiThumbsUp,\n  FiEdit2,\n  FiTrash2,\n  FiPaperclip,\n  FiMapPin,\n  FiCheckCircle,\n  FiCheck,\n} from \"react-icons/fi\";\nimport { CommentCard } from \"./CommentCard\";\nimport { AttachmentCard } from \"./AttachmentCard\";\nimport { DocumentViewer } from \"./DocumentViewer\";\nimport { VideoPlayer } from \"./VideoPlayer\";\nimport { FilePickerInput, FileAttachment } from \"./FilePickerInput\";\nimport { VoteButtons } from \"./VoteButtons\";\nimport { useState } from \"react\";\nimport { useTranslations } from \"next-intl\";\n\ninterface PostCardProps {\n  post: {\n    id: string;\n    title: string;\n    content: string;\n    type: string;\n    createdAt: Date | string;\n    updatedAt: Date | string;\n    authorId: string;\n    pinned?: boolean;\n    resolved?: boolean;\n    resolvedCommentId?: string | null;\n    author?: {\n      id: string;\n      name: string;\n      avatar?: string;\n      groupName?: string;\n    };\n    comments?: Array<{\n      id: string;\n      content: string;\n      createdAt: Date | string;\n      updatedAt: Date | string;\n      authorId: string;\n      author?: {\n        id: string;\n        name: string;\n        avatar?: string;\n        groupName?: string;\n      };\n      votes?: Array<{\n        voteType: string;\n        userId: string;\n      }>;\n      attachments?: Array<{\n        id: string;\n        fileName: string;\n        fileUrl: string;\n        fileSize?: number | null;\n        mimeType?: string | null;\n      }>;\n    }>;\n    votes?: Array<{\n      voteType: string;\n      userId: string;\n    }>;\n    attachments?: Array<{\n      id: string;\n      fileName: string;\n      fileUrl: string;\n      fileSize?: number | null;\n      mimeType?: string | null;\n    }>;\n  };\n  currentUserId: string;\n  userVote?: { voteType: string } | null;\n  onVote?: (postId: string, voteType: \"UPVOTE\" | \"DOWNVOTE\") => void;\n  onComment?: (\n    postId: string,\n    content: string,\n    attachments?: FileAttachment[]\n  ) => void;\n  onEdit?: (\n    postId: string,\n    title: string,\n    content: string,\n    type: string\n  ) => void;\n  onDelete?: (postId: string) => void;\n  onCommentVote?: (commentId: string, voteType: \"UPVOTE\" | \"DOWNVOTE\") => void;\n  onCommentEdit?: (commentId: string, content: string) => void;\n  onCommentDelete?: (commentId: string) => void;\n  commentSortOrder?: \"time\" | \"votes\";\n  onCommentSortChange?: (order: \"time\" | \"votes\") => void;\n  isTeacher?: boolean;\n  onPin?: (postId: string, pinned: boolean) => void;\n  onResolve?: (postId: string, resolved: boolean, commentId?: string) => void;\n  onMarkAnswer?: (postId: string, commentId: string, isCurrentAnswer: boolean) => void;\n}\n\nexport function PostCard({\n  post,\n  currentUserId,\n  userVote,\n  onVote,\n  onComment,\n  onEdit,\n  onDelete,\n  onCommentVote,\n  onCommentEdit,\n  onCommentDelete,\n  commentSortOrder = \"time\",\n  onCommentSortChange,\n  isTeacher = false,\n  onPin,\n  onResolve,\n  onMarkAnswer,\n}: PostCardProps) {\n  const tPostActions = useTranslations('posts.actions');\n  const tPostTypes = useTranslations('posts.types');\n  const tPostDialogs = useTranslations('posts.dialogs');\n  const [commentText, setCommentText] = useState(\"\");\n  const [commentAttachments, setCommentAttachments] = useState<\n    FileAttachment[]\n  >([]);\n  const [showCommentAttachments, setShowCommentAttachments] = useState(false);\n  const [isEditDialogOpen, setIsEditDialogOpen] = useState(false);\n  const [editTitle, setEditTitle] = useState(post.title);\n  const [editContent, setEditContent] = useState(post.content);\n  const [editType, setEditType] = useState(post.type);\n\n  const isAuthor = post.authorId === currentUserId;\n\n  // Sort comments\n  const sortedComments = post.comments ? [...post.comments] : [];\n  if (commentSortOrder === \"votes\") {\n    sortedComments.sort((a, b) => {\n      const aUpvotes =\n        a.votes?.filter((v) => v.voteType === \"UPVOTE\").length || 0;\n      const bUpvotes =\n        b.votes?.filter((v) => v.voteType === \"UPVOTE\").length || 0;\n      return bUpvotes - aUpvotes;\n    });\n  } else {\n    sortedComments.sort(\n      (a, b) =>\n        new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime()\n    );\n  }\n\n  const handleEditPost = () => {\n    if (onEdit) {\n      onEdit(post.id, editTitle, editContent, editType);\n      setIsEditDialogOpen(false);\n    }\n  };\n\n  const handleCommentSubmit = () => {\n    if (commentText.trim() && onComment) {\n      onComment(\n        post.id,\n        commentText,\n        commentAttachments.length > 0 ? commentAttachments : undefined\n      );\n      setCommentText(\"\");\n      setCommentAttachments([]);\n      setShowCommentAttachments(false);\n    }\n  };\n\n  return (\n    <Card key={post.id} className=\"bg-white p-4\">\n      <Flex gap=\"3\">\n        {/* Vote Buttons - Reddit Style */}\n        {onVote && (\n          <VoteButtons\n            votes={post.votes}\n            userVote={userVote}\n            onVote={(voteType) => onVote(post.id, voteType)}\n            size=\"medium\"\n          />\n        )}\n\n        {/* Post Avatar and Content */}\n        <Avatar\n          size=\"3\"\n          src={post.author?.avatar}\n          fallback={post.author?.name?.charAt(0) || \"U\"}\n          className=\"bg-mint-500\"\n        />\n        <Flex direction=\"column\" gap=\"2\" className=\"flex-1\">\n          <div>\n            <Flex align=\"center\" gap=\"2\" justify=\"between\">\n              <Flex align=\"center\" gap=\"2\">\n                <Text weight=\"bold\">{post.author?.name}</Text>\n                {post.author?.groupName && (\n                  <Badge size=\"1\" color=\"blue\">\n                    {post.author.groupName}\n                  </Badge>\n                )}\n                <Badge\n                  size=\"1\"\n                  color={post.type === \"ANNOUNCEMENT\" ? \"red\" : \"gray\"}\n                >\n                  {post.type === \"ANNOUNCEMENT\"\n                    ? tPostTypes('announcement')\n                    : post.type === \"MATERIAL\"\n                    ? tPostTypes('material')\n                    : tPostTypes('discussion')}\n                </Badge>\n                {post.pinned && (\n                  <Badge size=\"1\" color=\"orange\">\n                    <FiMapPin size={12} /> {tPostActions('pinned')}\n                  </Badge>\n                )}\n                {post.resolved && (\n                  <Badge size=\"1\" color=\"green\">\n                    <FiCheckCircle size={12} /> {tPostActions('resolved')}\n                  </Badge>\n                )}\n              </Flex>\n              <Flex gap=\"1\">\n                {isTeacher && onPin && (\n                  <Tooltip content={post.pinned ? tPostActions('unpin_post') : tPostActions('pin_post')}>\n                    <IconButton\n                      size=\"1\"\n                      variant=\"ghost\"\n                      color={post.pinned ? \"orange\" : \"gray\"}\n                      onClick={() => onPin(post.id, post.pinned || false)}\n                    >\n                      <FiMapPin size={14} />\n                    </IconButton>\n                  </Tooltip>\n                )}\n                {isTeacher && onResolve && (\n                  <Tooltip content={post.resolved ? tPostActions('unresolve_post') : tPostActions('resolve_post')}>\n                    <IconButton\n                      size=\"1\"\n                      variant=\"ghost\"\n                      color={post.resolved ? \"green\" : \"gray\"}\n                      onClick={() => onResolve(post.id, post.resolved || false, post.resolvedCommentId || undefined)}\n                    >\n                      <FiCheckCircle size={14} />\n                    </IconButton>\n                  </Tooltip>\n                )}\n                {isAuthor && (\n                  <>\n                    <IconButton\n                    size=\"1\"\n                    variant=\"soft\"\n                    color=\"gray\"\n                    onClick={() => setIsEditDialogOpen(true)}\n                  >\n                    <FiEdit2 size={14} />\n                  </IconButton>\n                  <IconButton\n                    size=\"1\"\n                    variant=\"soft\"\n                    color=\"red\"\n                    onClick={() => onDelete && onDelete(post.id)}\n                  >\n                    <FiTrash2 size={14} />\n                  </IconButton>\n                  </>\n                )}\n              </Flex>\n            </Flex>\n            <Text size=\"1\" className=\"text-gray-500\">\n              {new Date(post.createdAt).toLocaleString(\"vi-VN\")}\n              {post.updatedAt !== post.createdAt && \" (đã chỉnh sửa)\"}\n            </Text>\n          </div>\n          <Heading size=\"4\">{post.title}</Heading>\n          <Text size=\"2\" className=\"text-gray-700 whitespace-pre-wrap\">\n            {post.content}\n          </Text>\n\n          {/* Attachments */}\n          {post.attachments && post.attachments.length > 0 && (\n            <Flex direction=\"column\" gap=\"2\" className=\"mt-2\">\n              {post.attachments.map((attachment) => {\n                const mimeType = attachment.mimeType?.toLowerCase() || \"\";\n                \n                // Check file type\n                const isVideo = mimeType.startsWith(\"video/\");\n                const isDocument = \n                  mimeType.includes(\"pdf\") ||\n                  mimeType.includes(\"document\") ||\n                  mimeType.includes(\"word\") ||\n                  mimeType.includes(\"spreadsheet\") ||\n                  mimeType.includes(\"excel\") ||\n                  mimeType.includes(\"presentation\") ||\n                  mimeType.includes(\"powerpoint\");\n\n                // Use appropriate component based on file type\n                if (isVideo) {\n                  return (\n                    <VideoPlayer\n                      key={attachment.id}\n                      videoUrl={attachment.fileUrl}\n                      fileName={attachment.fileName}\n                      fileSize={attachment.fileSize}\n                    />\n                  );\n                } else if (isDocument) {\n                  return (\n                    <DocumentViewer key={attachment.id} attachment={attachment} />\n                  );\n                } else {\n                  return (\n                    <AttachmentCard key={attachment.id} attachment={attachment} />\n                  );\n                }\n              })}\n            </Flex>\n          )}\n\n          {/* Comments section */}\n          {post.comments && post.comments.length > 0 && (\n            <Flex direction=\"column\" gap=\"3\" className=\"mt-3\">\n              <Flex justify=\"between\" align=\"center\">\n                <Text size=\"2\" weight=\"bold\" className=\"text-gray-700\">\n                  Bình luận ({post.comments.length})\n                </Text>\n                {onCommentSortChange && (\n                  <Select.Root\n                    value={commentSortOrder}\n                    onValueChange={(value) =>\n                      onCommentSortChange(value as \"time\" | \"votes\")\n                    }\n                    size=\"1\"\n                  >\n                    <Select.Trigger />\n                    <Select.Content>\n                      <Select.Item value=\"time\">Thời gian</Select.Item>\n                      <Select.Item value=\"votes\">Lượt thích</Select.Item>\n                    </Select.Content>\n                  </Select.Root>\n                )}\n              </Flex>\n              <Flex\n                direction=\"column\"\n                gap=\"2\"\n                className=\"pl-4 border-l-2 border-mint-200\"\n              >\n                {sortedComments.map((comment) => {\n                  const userCommentVote = comment.votes?.find(\n                    (v) => v.userId === currentUserId\n                  );\n                  const isCorrectAnswer = post.resolvedCommentId === comment.id;\n                  return (\n                    <CommentCard\n                      key={comment.id}\n                      comment={comment}\n                      currentUserId={currentUserId}\n                      userVote={userCommentVote}\n                      onVote={onCommentVote}\n                      onEdit={onCommentEdit}\n                      onDelete={onCommentDelete}\n                      isCorrectAnswer={isCorrectAnswer}\n                      isTeacher={isTeacher}\n                      onMarkAnswer={\n                        onMarkAnswer\n                          ? (commentId, isCurrentAnswer) =>\n                              onMarkAnswer(post.id, commentId, isCurrentAnswer)\n                          : undefined\n                      }\n                    />\n                  );\n                })}\n              </Flex>\n            </Flex>\n          )}\n\n          {/* Comment input */}\n          {onComment && (\n            <Flex direction=\"column\" gap=\"2\" className=\"mt-2\">\n              <Flex gap=\"2\">\n                <TextField.Root\n                  placeholder=\"Viết bình luận...\"\n                  value={commentText}\n                  onChange={(e) => setCommentText(e.target.value)}\n                  onKeyPress={(e) => {\n                    if (e.key === \"Enter\" && !e.shiftKey) {\n                      e.preventDefault();\n                      handleCommentSubmit();\n                    }\n                  }}\n                  className=\"flex-1\"\n                />\n                <IconButton\n                  size=\"2\"\n                  variant=\"soft\"\n                  onClick={() =>\n                    setShowCommentAttachments(!showCommentAttachments)\n                  }\n                >\n                  <FiPaperclip size={14} />\n                </IconButton>\n                <Button\n                  size=\"2\"\n                  onClick={handleCommentSubmit}\n                  className=\"bg-mint-500\"\n                  disabled={!commentText.trim()}\n                >\n                  <FiSend size={14} />\n                </Button>\n              </Flex>\n              {showCommentAttachments && (\n                <FilePickerInput\n                  attachments={commentAttachments}\n                  onAttachmentsChange={setCommentAttachments}\n                  maxFiles={3}\n                />\n              )}\n            </Flex>\n          )}\n        </Flex>\n      </Flex>\n\n      {/* Edit Dialog */}\n      <Dialog.Root open={isEditDialogOpen} onOpenChange={setIsEditDialogOpen}>\n        <Dialog.Content style={{ maxWidth: 600 }}>\n          <Dialog.Title>{tPostDialogs('edit_post')}</Dialog.Title>\n          <Flex direction=\"column\" gap=\"3\" className=\"mt-4\">\n            <label>\n              <Text as=\"div\" size=\"2\" mb=\"1\" weight=\"bold\">\n                {tPostDialogs('title_label')}\n              </Text>\n              <TextField.Root\n                value={editTitle}\n                onChange={(e) => setEditTitle(e.target.value)}\n                placeholder={tPostDialogs('title_placeholder')}\n              />\n            </label>\n            <label>\n              <Text as=\"div\" size=\"2\" mb=\"1\" weight=\"bold\">\n                {tPostDialogs('type_label')}\n              </Text>\n              <Select.Root value={editType} onValueChange={setEditType}>\n                <Select.Trigger />\n                <Select.Content>\n                  <Select.Item value=\"DISCUSSION\">{tPostTypes('discussion')}</Select.Item>\n                  <Select.Item value=\"ANNOUNCEMENT\">{tPostTypes('announcement')}</Select.Item>\n                  <Select.Item value=\"MATERIAL\">{tPostTypes('material')}</Select.Item>\n                </Select.Content>\n              </Select.Root>\n            </label>\n            <label>\n              <Text as=\"div\" size=\"2\" mb=\"1\" weight=\"bold\">\n                {tPostDialogs('content_label')}\n              </Text>\n              <TextArea\n                value={editContent}\n                onChange={(e) => setEditContent(e.target.value)}\n                placeholder={tPostDialogs('content_placeholder')}\n                rows={6}\n              />\n            </label>\n            <Flex gap=\"3\" justify=\"end\">\n              <Dialog.Close>\n                <Button variant=\"soft\" color=\"gray\">\n                  {tPostDialogs('cancel')}\n                </Button>\n              </Dialog.Close>\n              <Button\n                onClick={handleEditPost}\n                className=\"bg-mint-500\"\n                disabled={!editTitle.trim() || !editContent.trim()}\n              >\n                {tPostDialogs('save_changes')}\n              </Button>\n            </Flex>\n          </Flex>\n        </Dialog.Content>\n      </Dialog.Root>\n    </Card>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3854, "column": 0}, "map": {"version":3,"sources":["file:///home/nghiaphunng18/HustTutorial/ITSS.1.20251/components/ui/GroupManagementDialog.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport {\n  Dialog,\n  Button,\n  Flex,\n  Text,\n  TextField,\n  Card,\n  Avatar,\n  Badge,\n  Tabs,\n} from \"@radix-ui/themes\";\nimport { FiX, FiShuffle, FiPlus, FiTrash2, FiSearch } from \"react-icons/fi\";\nimport { useTranslations } from \"next-intl\";\n\ninterface Student {\n  id: string;\n  name: string;\n  email: string;\n  studentCode?: string | null;\n  avatar: string | null;\n}\n\ninterface Group {\n  name: string;\n  memberIds: string[];\n}\n\ninterface GroupManagementDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  students: Student[];\n  existingGroups?: Array<{\n    id: string;\n    name: string;\n    members: Array<{ student: Student }>;\n  }>;\n  onSave: (groups: Group[]) => Promise<void>;\n}\n\nexport function GroupManagementDialog({\n  open,\n  onOpenChange,\n  students,\n  existingGroups = [],\n  onSave,\n}: GroupManagementDialogProps) {\n  const t = useTranslations('classes.groups_dialog');\n  const [groups, setGroups] = useState<Group[]>([]);\n  const [initialGroups, setInitialGroups] = useState<Group[]>([]);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [numGroups, setNumGroups] = useState(3);\n  const [numGroupsInput, setNumGroupsInput] = useState(\"3\");\n  const [validationError, setValidationError] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    if (existingGroups.length > 0) {\n      const groupsData = existingGroups.map((g) => ({\n        name: g.name,\n        memberIds: g.members.map((m) => m.student.id),\n      }));\n      setGroups(groupsData);\n      setInitialGroups(groupsData);\n    } else {\n      setGroups([]);\n      setInitialGroups([]);\n    }\n    // Reset validation error when dialog opens\n    setValidationError(\"\");\n    setNumGroupsInput(\"3\");\n    setNumGroups(3);\n  }, [existingGroups, open]);\n\n  const unassignedStudents = (students || []).filter(\n    (student) => !groups.some((g) => g.memberIds.includes(student.id))\n  );\n\n  const filteredUnassignedStudents = unassignedStudents.filter((student) =>\n    student.name.toLowerCase().includes(searchQuery.toLowerCase())\n  );\n\n  const handleRandomDivide = () => {\n    // Validate input\n    if (!numGroupsInput.trim()) {\n      setValidationError(t('error_empty_input'));\n      return;\n    }\n\n    // Use the already validated numGroups state\n    if (numGroups < 1) {\n      setValidationError(t('error_invalid_number'));\n      return;\n    }\n\n    // Clear validation error\n    setValidationError(\"\");\n\n    // Check if students exist\n    if (!students || students.length === 0) {\n      setValidationError(t('error_no_students'));\n      return;\n    }\n\n    // Adjust number of groups if it exceeds student count\n    const actualNumGroups = Math.min(numGroups, students.length);\n\n    // Show warning if adjusted\n    if (numGroups > students.length) {\n      setValidationError(\n        `Số nhóm (${numGroups}) vượt quá số sinh viên (${students.length}). Sẽ tạo ${actualNumGroups} nhóm.`\n      );\n    }\n\n    // Fisher-Yates shuffle algorithm for proper random distribution\n    const shuffled = [...students];\n    for (let i = shuffled.length - 1; i > 0; i--) {\n      const j = Math.floor(Math.random() * (i + 1));\n      [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];\n    }\n\n    // Distribute students evenly across groups\n    const newGroups: Group[] = Array.from(\n      { length: actualNumGroups },\n      (_, i) => ({\n        name: `Nhóm ${i + 1}`,\n        memberIds: [],\n      })\n    );\n\n    // Distribute students round-robin to ensure all groups get created\n    shuffled.forEach((student, index) => {\n      const groupIndex = index % actualNumGroups;\n      newGroups[groupIndex].memberIds.push(student.id);\n    });\n\n    setGroups(newGroups);\n    setNumGroups(actualNumGroups);\n  };\n\n  const handleNumGroupsChange = (value: string) => {\n    setNumGroupsInput(value);\n\n    // Check for invalid characters or multiple numbers\n    if (value.trim() === \"\") {\n      setValidationError(\"\");\n      return;\n    }\n\n    // Check if input contains multiple numbers separated by comma, space, etc.\n    if (/[,\\s]/.test(value.trim())) {\n      setValidationError(t('error_invalid_input'));\n      return;\n    }\n\n    // Check if input contains non-numeric characters (except leading/trailing spaces)\n    if (!/^\\d+$/.test(value.trim())) {\n      setValidationError(t('error_not_integer'));\n      return;\n    }\n\n    const parsed = parseInt(value.trim());\n    if (isNaN(parsed) || parsed < 1) {\n      setValidationError(t('error_must_positive'));\n      return;\n    }\n\n    setValidationError(\"\");\n    setNumGroups(parsed);\n  };\n\n  const handleAddGroup = () => {\n    setGroups([\n      ...groups,\n      {\n        name: `Nhóm ${groups.length + 1}`,\n        memberIds: [],\n      },\n    ]);\n  };\n\n  const handleDeleteGroup = (index: number) => {\n    setGroups(groups.filter((_, i) => i !== index));\n  };\n\n  const handleRenameGroup = (index: number, newName: string) => {\n    const updated = [...groups];\n    updated[index].name = newName;\n    setGroups(updated);\n  };\n\n  const handleAddStudentToGroup = (groupIndex: number, studentId: string) => {\n    const updated = [...groups];\n    if (!updated[groupIndex].memberIds.includes(studentId)) {\n      updated[groupIndex].memberIds.push(studentId);\n      setGroups(updated);\n    }\n  };\n\n  const handleRemoveStudentFromGroup = (\n    groupIndex: number,\n    studentId: string\n  ) => {\n    const updated = [...groups];\n    updated[groupIndex].memberIds = updated[groupIndex].memberIds.filter(\n      (id) => id !== studentId\n    );\n    setGroups(updated);\n  };\n\n  const handleSave = async () => {\n    setLoading(true);\n    try {\n      await onSave(groups);\n      onOpenChange(false);\n    } catch (error) {\n      console.error(\"Failed to save groups:\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getStudent = (studentId: string) =>\n    (students || []).find((s) => s.id === studentId);\n\n  // Calculate changes between initial and current groups\n  const getGroupChanges = () => {\n    const oldGroupNames = initialGroups.map((g) => g.name);\n    const newGroupNames = groups.map((g) => g.name);\n\n    const addedGroups = newGroupNames.filter(\n      (name) => !oldGroupNames.includes(name)\n    );\n    const deletedGroups = oldGroupNames.filter(\n      (name) => !newGroupNames.includes(name)\n    );\n    const keptGroups = newGroupNames.filter((name) =>\n      oldGroupNames.includes(name)\n    );\n\n    return { addedGroups, deletedGroups, keptGroups };\n  };\n\n  const { addedGroups, deletedGroups, keptGroups } = getGroupChanges();\n  const hasChanges =\n    addedGroups.length > 0 ||\n    deletedGroups.length > 0 ||\n    JSON.stringify(groups) !== JSON.stringify(initialGroups);\n\n  return (\n    <Dialog.Root open={open} onOpenChange={onOpenChange}>\n      <Dialog.Content style={{ maxWidth: 900 }}>\n        <Dialog.Title>{t('title')}</Dialog.Title>\n\n        <Tabs.Root defaultValue=\"manual\">\n          <Tabs.List>\n            <Tabs.Trigger value=\"random\">{t('random_tab')}</Tabs.Trigger>\n            <Tabs.Trigger value=\"manual\">{t('manual_tab')}</Tabs.Trigger>\n          </Tabs.List>\n\n          {/* Change Indicator */}\n          {hasChanges && (\n            <Card className=\"mt-4 p-3 bg-blue-50 border-blue-300\">\n              <Flex direction=\"column\" gap=\"2\">\n                <Text size=\"2\" weight=\"bold\" className=\"text-blue-900\">\n                  {t('unsaved_changes')}\n                </Text>\n                {addedGroups.length > 0 && (\n                  <Text size=\"2\" className=\"text-green-700\">\n                    {t('added_groups')} {addedGroups.join(\", \")}\n                  </Text>\n                )}\n                {deletedGroups.length > 0 && (\n                  <Text size=\"2\" className=\"text-red-700\">\n                    {t('deleted_groups')} {deletedGroups.join(\", \")}\n                  </Text>\n                )}\n                {addedGroups.length === 0 &&\n                  deletedGroups.length === 0 &&\n                  keptGroups.length > 0 && (\n                    <Text size=\"2\" className=\"text-blue-700\">\n                      {t('edited_groups', { count: keptGroups.length })}\n                    </Text>\n                  )}\n              </Flex>\n            </Card>\n          )}\n\n          {/* Random Tab */}\n          <Tabs.Content value=\"random\">\n            <Flex direction=\"column\" gap=\"4\" className=\"mt-4\">\n              <Flex gap=\"3\" align=\"end\">\n                <label className=\"flex-1\">\n                  <Text as=\"div\" size=\"2\" mb=\"1\" weight=\"bold\">\n                    {t('num_groups_label')}\n                  </Text>\n                  <TextField.Root\n                    type=\"text\"\n                    placeholder={t('num_groups_placeholder')}\n                    value={numGroupsInput}\n                    onChange={(e) => handleNumGroupsChange(e.target.value)}\n                  />\n                </label>\n                <Button\n                  onClick={handleRandomDivide}\n                  className=\"bg-mint-500 hover:bg-mint-600\"\n                >\n                  <FiShuffle size={16} /> {t('divide_random')}\n                </Button>\n              </Flex>\n\n              {validationError && (\n                <Card\n                  className={`p-3 ${\n                    validationError.includes(t('error_invalid_number')) ||\n                    validationError.includes(t('error_empty_input'))\n                      ? \"bg-red-50 border-red-300\"\n                      : \"bg-yellow-50 border-yellow-300\"\n                  }`}\n                >\n                  <Text\n                    size=\"2\"\n                    className={\n                      validationError.includes(t('error_invalid_number')) ||\n                      validationError.includes(t('error_empty_input'))\n                        ? \"text-red-700\"\n                        : \"text-yellow-700\"\n                    }\n                  >\n                    {validationError}\n                  </Text>\n                </Card>\n              )}\n\n              {groups.length > 0 && (\n                <Card className=\"bg-gray-50 p-4\">\n                  <Text size=\"2\" weight=\"bold\" className=\"mb-3 block\">\n                    {t('result_label', { count: groups.length })}\n                  </Text>\n                  <Flex direction=\"column\" gap=\"2\">\n                    {groups.map((group, index) => (\n                      <Flex key={index} align=\"center\" gap=\"2\">\n                        <Badge color=\"mint\" size=\"2\">\n                          {group.name}\n                        </Badge>\n                        <Text size=\"2\">\n                          {t('members_count', { count: group.memberIds.length })}\n                        </Text>\n                      </Flex>\n                    ))}\n                  </Flex>\n                </Card>\n              )}\n            </Flex>\n          </Tabs.Content>\n\n          {/* Manual Tab */}\n          <Tabs.Content value=\"manual\">\n            <Flex direction=\"column\" gap=\"4\" className=\"mt-4\">\n              <Flex justify=\"between\" align=\"center\">\n                <Text size=\"2\" weight=\"bold\">\n                  {t('groups_list', { count: groups.length })}\n                </Text>\n                <Button\n                  size=\"2\"\n                  onClick={handleAddGroup}\n                  className=\"bg-mint-500 hover:bg-mint-600\"\n                >\n                  <FiPlus size={16} /> {t('add_group')}\n                </Button>\n              </Flex>\n\n              <div className=\"max-h-96 overflow-y-auto\">\n                <Flex direction=\"column\" gap=\"3\">\n                  {groups.map((group, groupIndex) => (\n                    <Card key={groupIndex} className=\"p-4\">\n                      <Flex direction=\"column\" gap=\"3\">\n                        <Flex justify=\"between\" align=\"center\">\n                          <TextField.Root\n                            value={group.name}\n                            onChange={(e) =>\n                              handleRenameGroup(groupIndex, e.target.value)\n                            }\n                            className=\"flex-1 max-w-xs\"\n                          />\n                          <Button\n                            size=\"1\"\n                            color=\"red\"\n                            variant=\"soft\"\n                            onClick={() => handleDeleteGroup(groupIndex)}\n                          >\n                            <FiTrash2 size={14} />\n                          </Button>\n                        </Flex>\n\n                        {group.memberIds.length > 0 ? (\n                          <Flex wrap=\"wrap\" gap=\"2\">\n                            {group.memberIds.map((memberId) => {\n                              const student = getStudent(memberId);\n                              if (!student) return null;\n                              return (\n                                <Badge\n                                  key={memberId}\n                                  size=\"2\"\n                                  color=\"mint\"\n                                  className=\"cursor-pointer\"\n                                >\n                                  <Flex align=\"center\" gap=\"1\">\n                                    <Avatar\n                                      size=\"1\"\n                                      src={student.avatar || undefined}\n                                      fallback={student.name.charAt(0)}\n                                    />\n                                    {student.name}\n                                    <FiX\n                                      size={12}\n                                      onClick={() =>\n                                        handleRemoveStudentFromGroup(\n                                          groupIndex,\n                                          memberId\n                                        )\n                                      }\n                                    />\n                                  </Flex>\n                                </Badge>\n                              );\n                            })}\n                          </Flex>\n                        ) : (\n                          <Text size=\"2\" className=\"text-gray-500\">\n                            {t('no_members')}\n                          </Text>\n                        )}\n                      </Flex>\n                    </Card>\n                  ))}\n                </Flex>\n              </div>\n\n              {/* Unassigned Students */}\n              <Card className=\"bg-gray-50 p-4\">\n                <Flex direction=\"column\" gap=\"3\">\n                  <Flex justify=\"between\" align=\"center\">\n                    <Text size=\"2\" weight=\"bold\">\n                      Chưa phân nhóm ({unassignedStudents.length})\n                    </Text>\n                    <TextField.Root\n                      placeholder={t('search_student_placeholder')}\n                      value={searchQuery}\n                      onChange={(e) => setSearchQuery(e.target.value)}\n                      className=\"max-w-xs\"\n                    >\n                      <TextField.Slot>\n                        <FiSearch />\n                      </TextField.Slot>\n                    </TextField.Root>\n                  </Flex>\n\n                  {filteredUnassignedStudents.length > 0 ? (\n                    <div className=\"max-h-48 overflow-y-auto\">\n                      <Flex direction=\"column\" gap=\"2\">\n                        {filteredUnassignedStudents.map((student) => (\n                          <Flex\n                            key={student.id}\n                            align=\"center\"\n                            gap=\"2\"\n                            className=\"p-2 hover:bg-white rounded cursor-pointer\"\n                          >\n                            <Avatar\n                              size=\"2\"\n                              src={student.avatar || undefined}\n                              fallback={student.name.charAt(0)}\n                            />\n                            <div className=\"flex-1\">\n                              <Text size=\"2\" weight=\"bold\">\n                                {student.name}\n                                {student.studentCode && (\n                                  <span className=\"text-gray-500 font-normal\">\n                                    {\" \"}\n                                    ({student.studentCode})\n                                  </span>\n                                )}\n                              </Text>\n                            </div>\n                            {groups.length > 0 && (\n                              <Flex gap=\"1\">\n                                {groups.map((_, groupIndex) => (\n                                  <Button\n                                    key={groupIndex}\n                                    size=\"1\"\n                                    variant=\"soft\"\n                                    onClick={() =>\n                                      handleAddStudentToGroup(\n                                        groupIndex,\n                                        student.id\n                                      )\n                                    }\n                                  >\n                                    → {groups[groupIndex].name}\n                                  </Button>\n                                ))}\n                              </Flex>\n                            )}\n                          </Flex>\n                        ))}\n                      </Flex>\n                    </div>\n                  ) : (\n                    <Text size=\"2\" className=\"text-gray-500 text-center\">\n                      {searchQuery\n                        ? t('no_students_found')\n                        : t('all_students_assigned')}\n                    </Text>\n                  )}\n                </Flex>\n              </Card>\n            </Flex>\n          </Tabs.Content>\n        </Tabs.Root>\n\n        <Flex gap=\"3\" mt=\"4\" justify=\"end\">\n          <Dialog.Close>\n            <Button variant=\"soft\" color=\"gray\">\n              {t('cancel')}\n            </Button>\n          </Dialog.Close>\n          <Button\n            onClick={handleSave}\n            disabled={loading || groups.length === 0}\n            className=\"bg-mint-500 hover:bg-mint-600\"\n          >\n            {loading ? t('saving') : t('save_groups')}\n          </Button>\n        </Flex>\n      </Dialog.Content>\n    </Dialog.Root>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4699, "column": 0}, "map": {"version":3,"sources":["file:///home/nghiaphunng18/HustTutorial/ITSS.1.20251/components/ui/MembersManagementDialog.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport {\n  Dialog,\n  Button,\n  Flex,\n  Text,\n  TextField,\n  Card,\n  Avatar,\n  Badge,\n  Tabs,\n  Select,\n} from \"@radix-ui/themes\";\nimport {\n  FiX,\n  FiPlus,\n  FiTrash2,\n  FiSearch,\n  FiUserPlus,\n  FiUserMinus,\n} from \"react-icons/fi\";\nimport { useTranslations } from \"next-intl\";\n\ninterface User {\n  id: string;\n  name: string;\n  email: string;\n  studentCode?: string | null;\n  avatar: string | null;\n  role: string;\n}\n\ninterface Teacher {\n  teacher: User;\n}\n\ninterface Student {\n  student: User;\n}\n\ninterface MembersManagementDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  classId: string;\n  createdBy: string | null;\n  currentUserId: string;\n  existingTeachers: Teacher[];\n  existingStudents: Student[];\n  onSave: (changes: {\n    addedTeachers: string[];\n    removedTeachers: string[];\n    addedStudents: string[];\n    removedStudents: string[];\n  }) => Promise<void>;\n}\n\nexport function MembersManagementDialog({\n  open,\n  onOpenChange,\n  classId,\n  createdBy,\n  currentUserId,\n  existingTeachers,\n  existingStudents,\n  onSave,\n}: MembersManagementDialogProps) {\n  const t = useTranslations('classes.members_dialog');\n  const [teachers, setTeachers] = useState<string[]>([]);\n  const [students, setStudents] = useState<string[]>([]);\n  const [initialTeachers, setInitialTeachers] = useState<string[]>([]);\n  const [initialStudents, setInitialStudents] = useState<string[]>([]);\n\n  const [availableTeachers, setAvailableTeachers] = useState<User[]>([]);\n  const [availableStudents, setAvailableStudents] = useState<User[]>([]);\n\n  const [teacherSearch, setTeacherSearch] = useState(\"\");\n  const [studentSearch, setStudentSearch] = useState(\"\");\n  const [selectedTeacher, setSelectedTeacher] = useState(\"\");\n  const [selectedStudent, setSelectedStudent] = useState(\"\");\n\n  const [loading, setLoading] = useState(false);\n  const [loadingData, setLoadingData] = useState(false);\n\n  useEffect(() => {\n    if (open) {\n      const teacherIds = existingTeachers.map((t) => t.teacher.id);\n      const studentIds = existingStudents.map((s) => s.student.id);\n\n      setTeachers(teacherIds);\n      setStudents(studentIds);\n      setInitialTeachers(teacherIds);\n      setInitialStudents(studentIds);\n\n      fetchAvailableUsers();\n    }\n  }, [open, existingTeachers, existingStudents]);\n\n  const fetchAvailableUsers = async () => {\n    setLoadingData(true);\n    try {\n      const [teachersRes, studentsRes] = await Promise.all([\n        fetch(\"/api/users?role=TEACHER\"),\n        fetch(\"/api/users?role=STUDENT\"),\n      ]);\n\n      const teachersData = await teachersRes.json();\n      const studentsData = await studentsRes.json();\n\n      setAvailableTeachers(teachersData.users || []);\n      setAvailableStudents(studentsData.users || []);\n    } catch (error) {\n      console.error(\"Failed to fetch users:\", error);\n    } finally {\n      setLoadingData(false);\n    }\n  };\n\n  const handleAddTeacher = () => {\n    if (selectedTeacher && !teachers.includes(selectedTeacher)) {\n      setTeachers([...teachers, selectedTeacher]);\n      setSelectedTeacher(\"\");\n    }\n  };\n\n  const handleRemoveTeacher = (teacherId: string) => {\n    // Prevent the creator from removing themselves\n    if (createdBy && teacherId === createdBy && teacherId === currentUserId) {\n      return;\n    }\n    setTeachers(teachers.filter((id) => id !== teacherId));\n  };\n\n  const handleAddStudent = () => {\n    if (selectedStudent && !students.includes(selectedStudent)) {\n      setStudents([...students, selectedStudent]);\n      setSelectedStudent(\"\");\n    }\n  };\n\n  const handleRemoveStudent = (studentId: string) => {\n    setStudents(students.filter((id) => id !== studentId));\n  };\n\n  const getTeacherChanges = () => {\n    const added = teachers.filter((id) => !initialTeachers.includes(id));\n    const removed = initialTeachers.filter((id) => !teachers.includes(id));\n    return { added, removed };\n  };\n\n  const getStudentChanges = () => {\n    const added = students.filter((id) => !initialStudents.includes(id));\n    const removed = initialStudents.filter((id) => !students.includes(id));\n    return { added, removed };\n  };\n\n  const teacherChanges = getTeacherChanges();\n  const studentChanges = getStudentChanges();\n  const hasChanges =\n    teacherChanges.added.length > 0 ||\n    teacherChanges.removed.length > 0 ||\n    studentChanges.added.length > 0 ||\n    studentChanges.removed.length > 0;\n\n  const handleSave = async () => {\n    setLoading(true);\n    try {\n      await onSave({\n        addedTeachers: teacherChanges.added,\n        removedTeachers: teacherChanges.removed,\n        addedStudents: studentChanges.added,\n        removedStudents: studentChanges.removed,\n      });\n      onOpenChange(false);\n    } catch (error) {\n      console.error(\"Failed to save members:\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getUser = (userId: string, userList: User[]) =>\n    userList.find((u) => u.id === userId);\n\n  const filteredAvailableTeachers = availableTeachers.filter(\n    (t) =>\n      !teachers.includes(t.id) &&\n      (t.name.toLowerCase().includes(teacherSearch.toLowerCase()) ||\n        t.email.toLowerCase().includes(teacherSearch.toLowerCase()))\n  );\n\n  const filteredAvailableStudents = availableStudents.filter(\n    (s) =>\n      !students.includes(s.id) &&\n      (s.name.toLowerCase().includes(studentSearch.toLowerCase()) ||\n        s.email.toLowerCase().includes(studentSearch.toLowerCase()) ||\n        (s.studentCode && s.studentCode.includes(studentSearch)))\n  );\n\n  return (\n    <Dialog.Root open={open} onOpenChange={onOpenChange}>\n      <Dialog.Content style={{ maxWidth: 900 }}>\n        <Dialog.Title>{t('title')}</Dialog.Title>\n\n        {/* Change Indicator */}\n        {hasChanges && (\n          <Card className=\"mt-4 p-3 bg-blue-50 border-blue-300\">\n            <Flex direction=\"column\" gap=\"2\">\n              <Text size=\"2\" weight=\"bold\" className=\"text-blue-900\">\n                {t('unsaved_changes')}\n              </Text>\n              {teacherChanges.added.length > 0 && (\n                <Text size=\"2\" className=\"text-green-700\">\n                  {t('added_teachers')}{\" \"}\n                  {teacherChanges.added\n                    .map((id) => getUser(id, availableTeachers)?.name || id)\n                    .join(\", \")}\n                </Text>\n              )}\n              {teacherChanges.removed.length > 0 && (\n                <Text size=\"2\" className=\"text-red-700\">\n                  {t('removed_teachers')}{\" \"}\n                  {teacherChanges.removed\n                    .map(\n                      (id) =>\n                        existingTeachers.find((t) => t.teacher.id === id)\n                          ?.teacher.name || id\n                    )\n                    .join(\", \")}\n                </Text>\n              )}\n              {studentChanges.added.length > 0 && (\n                <Text size=\"2\" className=\"text-green-700\">\n                  {t('added_students')}{\" \"}\n                  {studentChanges.added\n                    .map((id) => getUser(id, availableStudents)?.name || id)\n                    .join(\", \")}\n                </Text>\n              )}\n              {studentChanges.removed.length > 0 && (\n                <Text size=\"2\" className=\"text-red-700\">\n                  {t('removed_students')}{\" \"}\n                  {studentChanges.removed\n                    .map(\n                      (id) =>\n                        existingStudents.find((s) => s.student.id === id)\n                          ?.student.name || id\n                    )\n                    .join(\", \")}\n                </Text>\n              )}\n            </Flex>\n          </Card>\n        )}\n\n        <Tabs.Root defaultValue=\"teachers\" className=\"mt-4\">\n          <Tabs.List>\n            <Tabs.Trigger value=\"teachers\">\n              {t('teachers_tab')} ({teachers.length})\n            </Tabs.Trigger>\n            <Tabs.Trigger value=\"students\">\n              {t('students_tab')} ({students.length})\n            </Tabs.Trigger>\n          </Tabs.List>\n\n          {/* Teachers Tab */}\n          <Tabs.Content value=\"teachers\">\n            <Flex direction=\"column\" gap=\"4\" className=\"mt-4\">\n              {/* Add Teacher Section */}\n              <Card className=\"p-4 bg-gray-50\">\n                <Text size=\"2\" weight=\"bold\" className=\"mb-3 block\">\n                  {t('add_teacher')}\n                </Text>\n                <Flex gap=\"2\" align=\"end\">\n                  <div className=\"flex-1\">\n                    <TextField.Root\n                      placeholder={t('search_teacher_placeholder')}\n                      value={teacherSearch}\n                      onChange={(e) => setTeacherSearch(e.target.value)}\n                    >\n                      <TextField.Slot>\n                        <FiSearch />\n                      </TextField.Slot>\n                    </TextField.Root>\n                  </div>\n                </Flex>\n\n                {loadingData ? (\n                  <Text size=\"2\" className=\"text-gray-500 mt-3\">\n                    {t('loading')}\n                  </Text>\n                ) : filteredAvailableTeachers.length > 0 ? (\n                  <div className=\"mt-3 max-h-48 overflow-y-auto\">\n                    <Flex direction=\"column\" gap=\"2\">\n                      {filteredAvailableTeachers.slice(0, 5).map((teacher) => (\n                        <Card\n                          key={teacher.id}\n                          className=\"p-2 hover:bg-white cursor-pointer\"\n                        >\n                          <Flex justify=\"between\" align=\"center\">\n                            <Flex align=\"center\" gap=\"2\">\n                              <Avatar\n                                size=\"2\"\n                                src={teacher.avatar || undefined}\n                                fallback={teacher.name.charAt(0)}\n                              />\n                              <div>\n                                <Text size=\"2\" weight=\"bold\">\n                                  {teacher.name}\n                                </Text>\n                              </div>\n                            </Flex>\n                            <Button\n                              size=\"1\"\n                              onClick={() => {\n                                setTeachers([...teachers, teacher.id]);\n                              }}\n                              className=\"bg-mint-500 hover:bg-mint-600\"\n                            >\n                              <FiPlus size={14} /> {t('add')}\n                            </Button>\n                          </Flex>\n                        </Card>\n                      ))}\n                    </Flex>\n                  </div>\n                ) : (\n                  <Text size=\"2\" className=\"text-gray-500 mt-3\">\n                    {teacherSearch\n                      ? t('no_teachers_found')\n                      : t('all_teachers_added')}\n                  </Text>\n                )}\n              </Card>\n\n              {/* Current Teachers List */}\n              <div>\n                <Text size=\"2\" weight=\"bold\" className=\"mb-3 block\">\n                  {t('current_teachers')}\n                </Text>\n                <div className=\"overflow-y-auto\" style={{ maxHeight: \"300px\" }}>\n                  <Flex direction=\"column\" gap=\"2\">\n                    {teachers.map((teacherId) => {\n                      const teacher =\n                        existingTeachers.find((t) => t.teacher.id === teacherId)\n                          ?.teacher ||\n                        availableTeachers.find((t) => t.id === teacherId);\n                      if (!teacher) return null;\n\n                      const isCreator =\n                        createdBy &&\n                        teacherId === createdBy &&\n                        teacherId === currentUserId;\n\n                      return (\n                        <Card key={teacherId} className=\"p-3 bg-white\">\n                          <Flex justify=\"between\" align=\"center\">\n                            <Flex align=\"center\" gap=\"3\">\n                              <Avatar\n                                size=\"3\"\n                                src={teacher.avatar || undefined}\n                                fallback={teacher.name.charAt(0)}\n                                className=\"bg-mint-500\"\n                              />\n                              <div>\n                                <Text weight=\"bold\">\n                                  {teacher.name}\n                                  {isCreator && (\n                                    <Badge\n                                      color=\"blue\"\n                                      size=\"1\"\n                                      className=\"ml-2\"\n                                    >\n                                      {t('creator_badge')}\n                                    </Badge>\n                                  )}\n                                </Text>\n                              </div>\n                            </Flex>\n                            <Button\n                              size=\"1\"\n                              color=\"red\"\n                              variant=\"soft\"\n                              onClick={() => handleRemoveTeacher(teacherId)}\n                              disabled={isCreator}\n                              title={\n                                isCreator\n                                  ? t('creator_cannot_remove')\n                                  : \"\"\n                              }\n                            >\n                              <FiTrash2 size={14} /> {t('remove')}\n                            </Button>\n                          </Flex>\n                        </Card>\n                      );\n                    })}\n                  </Flex>\n                </div>\n              </div>\n            </Flex>\n          </Tabs.Content>\n\n          {/* Students Tab */}\n          <Tabs.Content value=\"students\">\n            <Flex direction=\"column\" gap=\"4\" className=\"mt-4\">\n              {/* Add Student Section */}\n              <Card className=\"p-4 bg-gray-50\">\n                <Text size=\"2\" weight=\"bold\" className=\"mb-3 block\">\n                  {t('add_student')}\n                </Text>\n                <Flex gap=\"2\" align=\"end\">\n                  <div className=\"flex-1\">\n                    <TextField.Root\n                      placeholder={t('search_student_placeholder')}\n                      value={studentSearch}\n                      onChange={(e) => setStudentSearch(e.target.value)}\n                    >\n                      <TextField.Slot>\n                        <FiSearch />\n                      </TextField.Slot>\n                    </TextField.Root>\n                  </div>\n                </Flex>\n\n                {loadingData ? (\n                  <Text size=\"2\" className=\"text-gray-500 mt-3\">\n                    {t('loading')}\n                  </Text>\n                ) : filteredAvailableStudents.length > 0 ? (\n                  <div className=\"mt-3 max-h-48 overflow-y-auto\">\n                    <Flex direction=\"column\" gap=\"2\">\n                      {filteredAvailableStudents.slice(0, 5).map((student) => (\n                        <Card\n                          key={student.id}\n                          className=\"p-2 hover:bg-white cursor-pointer\"\n                        >\n                          <Flex justify=\"between\" align=\"center\">\n                            <Flex align=\"center\" gap=\"2\">\n                              <Avatar\n                                size=\"2\"\n                                src={student.avatar || undefined}\n                                fallback={student.name.charAt(0)}\n                              />\n                              <div>\n                                <Text size=\"2\" weight=\"bold\">\n                                  {student.name}\n                                  {student.studentCode && (\n                                    <span className=\"text-gray-500 font-normal\">\n                                      {\" \"}\n                                      ({student.studentCode})\n                                    </span>\n                                  )}\n                                </Text>\n                              </div>\n                            </Flex>\n                            <Button\n                              size=\"1\"\n                              onClick={() => {\n                                setStudents([...students, student.id]);\n                              }}\n                              className=\"bg-mint-500 hover:bg-mint-600\"\n                            >\n                              <FiPlus size={14} /> {t('add')}\n                            </Button>\n                          </Flex>\n                        </Card>\n                      ))}\n                    </Flex>\n                  </div>\n                ) : (\n                  <Text size=\"2\" className=\"text-gray-500 mt-3\">\n                    {studentSearch\n                      ? t('no_students_found')\n                      : t('all_students_added')}\n                  </Text>\n                )}\n              </Card>\n\n              {/* Current Students List */}\n              <div>\n                <Text size=\"2\" weight=\"bold\" className=\"mb-3 block\">\n                  {t('current_students')}\n                </Text>\n                <div className=\"overflow-y-auto\" style={{ maxHeight: \"300px\" }}>\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2\">\n                    {students.map((studentId) => {\n                      const student =\n                        existingStudents.find((s) => s.student.id === studentId)\n                          ?.student ||\n                        availableStudents.find((s) => s.id === studentId);\n                      if (!student) return null;\n\n                      return (\n                        <Card key={studentId} className=\"p-3 bg-white\">\n                          <Flex justify=\"between\" align=\"center\">\n                            <Flex align=\"center\" gap=\"2\">\n                              <Avatar\n                                size=\"2\"\n                                src={student.avatar || undefined}\n                                fallback={student.name.charAt(0)}\n                                className=\"bg-mint-500\"\n                              />\n                              <div className=\"flex-1 min-w-0\">\n                                <Text\n                                  size=\"2\"\n                                  weight=\"bold\"\n                                  className=\"truncate\"\n                                >\n                                  {student.name}\n                                  {student.studentCode && (\n                                    <span className=\"text-gray-500 font-normal\">\n                                      {\" \"}\n                                      ({student.studentCode})\n                                    </span>\n                                  )}\n                                </Text>\n                              </div>\n                            </Flex>\n                            <Button\n                              size=\"1\"\n                              color=\"red\"\n                              variant=\"soft\"\n                              onClick={() => handleRemoveStudent(studentId)}\n                            >\n                              <FiTrash2 size={12} />\n                            </Button>\n                          </Flex>\n                        </Card>\n                      );\n                    })}\n                  </div>\n                </div>\n              </div>\n            </Flex>\n          </Tabs.Content>\n        </Tabs.Root>\n\n        <Flex gap=\"3\" mt=\"4\" justify=\"end\">\n          <Dialog.Close>\n            <Button variant=\"soft\" color=\"gray\">\n              {t('cancel')}\n            </Button>\n          </Dialog.Close>\n          <Button\n            onClick={handleSave}\n            disabled={loading || !hasChanges}\n            className=\"bg-mint-500 hover:bg-mint-600\"\n          >\n            {loading ? t('saving') : t('save_changes')}\n          </Button>\n        </Flex>\n      </Dialog.Content>\n    </Dialog.Root>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5649, "column": 0}, "map": {"version":3,"sources":["file:///home/nghiaphunng18/HustTutorial/ITSS.1.20251/components/ui/ClassSettingsDialog.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport axios from \"@/lib/axios\";\nimport {\n  Dialog,\n  Button,\n  Flex,\n  Text,\n  TextField,\n  TextArea,\n  Checkbox,\n} from \"@radix-ui/themes\";\nimport { FiSettings, FiLock, FiCopy, FiCheck } from \"react-icons/fi\";\nimport { useTranslations } from \"next-intl\";\n\ninterface Teacher {\n  id: string;\n  name: string;\n  email?: string;\n  avatar: string | null;\n}\n\ninterface ClassData {\n  id: string;\n  code: string;\n  name: string;\n  description: string | null;\n  semester: string | null;\n  year: number | null;\n  isPrivate?: boolean;\n  joinCode?: string | null;\n  teachers: Array<{\n    teacher: Teacher;\n  }>;\n}\n\ninterface ClassSettingsDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  classData?: ClassData | null;\n  onUpdate: () => void;\n}\n\nexport function ClassSettingsDialog({\n  open,\n  onOpenChange,\n  classData,\n  onUpdate,\n}: ClassSettingsDialogProps) {\n  const t = useTranslations('classes.settings_dialog');\n  const [formData, setFormData] = useState({\n    code: classData?.code || \"\",\n    name: classData?.name || \"\",\n    description: classData?.description || \"\",\n    semester: classData?.semester || \"\",\n    year: classData?.year || new Date().getFullYear(),\n    isPrivate: classData?.isPrivate || false,\n    joinCode: classData?.joinCode || \"\",\n  });\n\n  const [loading, setLoading] = useState(false);\n  const [copied, setCopied] = useState(false);\n  const [copiedJoinCode, setCopiedJoinCode] = useState(false);\n\n  const handleCopyCode = async () => {\n    if (classData?.code) {\n      await navigator.clipboard.writeText(classData.code);\n      setCopied(true);\n      setTimeout(() => setCopied(false), 2000);\n    }\n  };\n\n  const handleCopyJoinCode = async () => {\n    if (classData?.joinCode) {\n      await navigator.clipboard.writeText(classData.joinCode);\n      setCopiedJoinCode(true);\n      setTimeout(() => setCopiedJoinCode(false), 2000);\n    }\n  };\n\n  useEffect(() => {\n    if (open && classData) {\n      setFormData({\n        code: classData.code,\n        name: classData.name,\n        description: classData.description || \"\",\n        semester: classData.semester || \"\",\n        year: classData.year || new Date().getFullYear(),\n        isPrivate: classData.isPrivate || false,\n        joinCode: classData.joinCode || \"\",\n      });\n    }\n  }, [open, classData]);\n\n  const handleUpdateInfo = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!classData?.id) return;\n\n    setLoading(true);\n    try {\n      await axios.patch(`/api/classes/${classData.id}`, formData);\n      onUpdate();\n      onOpenChange(false);\n    } catch (error) {\n      console.error(\"Failed to update class:\", error);\n      alert(t('update_failed'));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Dialog.Root open={open} onOpenChange={onOpenChange}>\n      <Dialog.Content style={{ maxWidth: 700, maxHeight: \"85vh\" }}>\n        <Dialog.Title>{t('title')}</Dialog.Title>\n        <Dialog.Description size=\"2\" mb=\"4\">\n          {t('description')}\n        </Dialog.Description>\n\n        <form onSubmit={handleUpdateInfo}>\n          <Flex direction=\"column\" gap=\"3\" className=\"mt-4\">\n            <label>\n              <Text as=\"div\" size=\"2\" mb=\"1\" weight=\"bold\">\n                {t('class_code')}\n              </Text>\n              <Flex gap=\"2\">\n                <TextField.Root\n                  value={classData?.code || \"\"}\n                  readOnly\n                  className=\"flex-1 font-mono bg-gray-50\"\n                />\n                <Button type=\"button\" variant=\"soft\" onClick={handleCopyCode}>\n                  {copied ? <FiCheck size={16} /> : <FiCopy size={16} />}\n                  {copied ? t('copied') : t('copy')}\n                </Button>\n              </Flex>\n              <Text size=\"1\" className=\"text-gray-500 mt-1 block\">\n                {t('class_code_hint')}\n              </Text>\n            </label>\n            <label>\n              <Text as=\"div\" size=\"2\" mb=\"1\" weight=\"bold\">\n                {t('class_name')} <span className=\"text-red-500\">*</span>\n              </Text>\n              <TextField.Root\n                value={formData.name}\n                onChange={(e) =>\n                  setFormData({ ...formData, name: e.target.value })\n                }\n                required\n              />\n            </label>\n            <label>\n              <Text as=\"div\" size=\"2\" mb=\"1\" weight=\"bold\">\n                {t('description_label')}\n              </Text>\n              <TextArea\n                value={formData.description}\n                onChange={(e) =>\n                  setFormData({\n                    ...formData,\n                    description: e.target.value,\n                  })\n                }\n                rows={3}\n              />\n            </label>\n            <Flex gap=\"3\">\n              <label className=\"flex-1\">\n                <Text as=\"div\" size=\"2\" mb=\"1\" weight=\"bold\">\n                  {t('semester')}\n                </Text>\n                <TextField.Root\n                  value={formData.semester}\n                  onChange={(e) =>\n                    setFormData({\n                      ...formData,\n                      semester: e.target.value,\n                    })\n                  }\n                />\n              </label>\n              <label className=\"flex-1\">\n                <Text as=\"div\" size=\"2\" mb=\"1\" weight=\"bold\">\n                  {t('year')}\n                </Text>\n                <TextField.Root\n                  type=\"number\"\n                  value={formData.year}\n                  onChange={(e) =>\n                    setFormData({\n                      ...formData,\n                      year:\n                        parseInt(e.target.value) || new Date().getFullYear(),\n                    })\n                  }\n                />\n              </label>\n            </Flex>\n            <label>\n              <Flex align=\"center\" gap=\"2\">\n                <Checkbox\n                  checked={formData.isPrivate}\n                  onCheckedChange={(checked) =>\n                    setFormData({\n                      ...formData,\n                      isPrivate: checked === true,\n                    })\n                  }\n                />\n                <Flex align=\"center\" gap=\"2\">\n                  <FiLock size={14} />\n                  <Text size=\"2\" weight=\"bold\">\n                    {t('private_class')}\n                  </Text>\n                </Flex>\n              </Flex>\n              <Text size=\"1\" className=\"text-gray-500 ml-6 mt-1 block\">\n                {t('private_class_hint')}\n              </Text>\n            </label>\n            {formData.isPrivate && classData?.joinCode && (\n              <label>\n                <Text as=\"div\" size=\"2\" mb=\"1\" weight=\"bold\">\n                  {t('join_code')}\n                </Text>\n                <Flex gap=\"2\">\n                  <TextField.Root\n                    value={classData.joinCode}\n                    readOnly\n                    className=\"flex-1 font-mono bg-gray-50\"\n                  />\n                  <Button\n                    type=\"button\"\n                    variant=\"soft\"\n                    onClick={handleCopyJoinCode}\n                  >\n                    {copiedJoinCode ? (\n                      <FiCheck size={16} />\n                    ) : (\n                      <FiCopy size={16} />\n                    )}\n                    {copiedJoinCode ? t('copied') : t('copy')}\n                  </Button>\n                </Flex>\n                <Text size=\"1\" className=\"text-gray-500 mt-1 block\">\n                  {t('join_code_hint')}\n                </Text>\n              </label>\n            )}\n          </Flex>\n          <Flex gap=\"3\" mt=\"4\" justify=\"end\">\n            <Dialog.Close>\n              <Button variant=\"soft\" color=\"gray\" type=\"button\">\n                {t('cancel')}\n              </Button>\n            </Dialog.Close>\n            <Button type=\"submit\" className=\"bg-mint-500\" disabled={loading}>\n              {loading ? t('saving') : t('save_changes')}\n            </Button>\n          </Flex>\n        </form>\n      </Dialog.Content>\n    </Dialog.Root>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6180, "column": 0}, "map": {"version":3,"sources":["file:///home/nghiaphunng18/HustTutorial/ITSS.1.20251/components/ui/CreatePostDialog.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport {\n  Dialog,\n  Button,\n  Flex,\n  Text,\n  TextField,\n  TextArea,\n  Select,\n} from \"@radix-ui/themes\";\nimport { FiPlus } from \"react-icons/fi\";\nimport { FilePickerInput, FileAttachment } from \"./FilePickerInput\";\n\ninterface CreatePostDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onSubmit: (formData: {\n    title: string;\n    content: string;\n    type: string;\n    attachments?: FileAttachment[];\n  }) => Promise<void>;\n}\n\nexport function CreatePostDialog({\n  open,\n  onOpenChange,\n  onSubmit,\n}: CreatePostDialogProps) {\n  const [formData, setFormData] = useState({\n    title: \"\",\n    content: \"\",\n    type: \"DISCUSSION\",\n  });\n  const [attachments, setAttachments] = useState<FileAttachment[]>([]);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    await onSubmit({\n      ...formData,\n      attachments: attachments.length > 0 ? attachments : undefined,\n    });\n    setFormData({\n      title: \"\",\n      content: \"\",\n      type: \"DISCUSSION\",\n    });\n    setAttachments([]);\n  };\n\n  return (\n    <Dialog.Root open={open} onOpenChange={onOpenChange}>\n      <Dialog.Content style={{ maxWidth: 600 }}>\n        <Dialog.Title>Tạo bài viết mới</Dialog.Title>\n        <form onSubmit={handleSubmit}>\n          <Flex direction=\"column\" gap=\"3\" className=\"mt-4\">\n            <label>\n              <Text as=\"div\" size=\"2\" mb=\"1\" weight=\"bold\">\n                Loại bài viết\n              </Text>\n              <Select.Root\n                value={formData.type}\n                onValueChange={(value) =>\n                  setFormData({ ...formData, type: value })\n                }\n              >\n                <Select.Trigger />\n                <Select.Content>\n                  <Select.Item value=\"ANNOUNCEMENT\">Thông báo</Select.Item>\n                  <Select.Item value=\"DISCUSSION\">Thảo luận</Select.Item>\n                  <Select.Item value=\"MATERIAL\">Tài liệu</Select.Item>\n                </Select.Content>\n              </Select.Root>\n            </label>\n            <label>\n              <Text as=\"div\" size=\"2\" mb=\"1\" weight=\"bold\">\n                Tiêu đề\n              </Text>\n              <TextField.Root\n                placeholder=\"Nhập tiêu đề...\"\n                value={formData.title}\n                onChange={(e) =>\n                  setFormData({\n                    ...formData,\n                    title: e.target.value,\n                  })\n                }\n                required\n              />\n            </label>\n            <label>\n              <Text as=\"div\" size=\"2\" mb=\"1\" weight=\"bold\">\n                Nội dung\n              </Text>\n              <TextArea\n                placeholder=\"Nhập nội dung bài viết...\"\n                value={formData.content}\n                onChange={(e) =>\n                  setFormData({\n                    ...formData,\n                    content: e.target.value,\n                  })\n                }\n                rows={6}\n                required\n              />\n            </label>\n            <label>\n              <Text as=\"div\" size=\"2\" mb=\"1\" weight=\"bold\">\n                Tệp đính kèm\n              </Text>\n              <FilePickerInput\n                attachments={attachments}\n                onAttachmentsChange={setAttachments}\n                maxFiles={5}\n              />\n            </label>\n          </Flex>\n          <Flex gap=\"3\" mt=\"4\" justify=\"end\">\n            <Dialog.Close>\n              <Button variant=\"soft\" color=\"gray\" type=\"button\">\n                Hủy\n              </Button>\n            </Dialog.Close>\n            <Button type=\"submit\" className=\"bg-mint-500\">\n              <FiPlus size={16} /> Đăng bài\n            </Button>\n          </Flex>\n        </form>\n      </Dialog.Content>\n    </Dialog.Root>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6479, "column": 0}, "map": {"version":3,"sources":["file:///home/nghiaphunng18/HustTutorial/ITSS.1.20251/components/ui/TeacherDashboardNav.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  FiBook,\n  FiFileText,\n  FiUsers,\n  FiMessageSquare,\n  FiBell,\n} from \"react-icons/fi\";\nimport { useTranslations } from \"next-intl\";\n\nexport const useTeacherTabs = () => {\n  const t = useTranslations('navigation.dashboard');\n  \n  return [\n    {\n      label: t('classes'),\n      href: \"/dashboard/teacher/classes\",\n      icon: <FiBook size={18} />,\n    },\n    {\n      label: t('assignments'),\n      href: \"/dashboard/teacher/assignments\",\n      icon: <FiFileText size={18} />,\n    },\n    {\n      label: t('posts'),\n      href: \"/dashboard/teacher/posts\",\n      icon: <FiMessageSquare size={18} />,\n    },\n    {\n      label: t('notifications'),\n      href: \"/dashboard/teacher/notifications\",\n      icon: <FiBell size={18} />,\n    },\n  ];\n};\n\n// Deprecated: Use useTeacherTabs() hook instead\nexport const teacherTabs = [\n  {\n    label: \"Lớp học\",\n    href: \"/dashboard/teacher/classes\",\n    icon: <FiBook size={18} />,\n  },\n  {\n    label: \"Bài tập\",\n    href: \"/dashboard/teacher/assignments\",\n    icon: <FiFileText size={18} />,\n  },\n  {\n    label: \"Bài viết\",\n    href: \"/dashboard/teacher/posts\",\n    icon: <FiMessageSquare size={18} />,\n  },\n  {\n    label: \"Thông báo\",\n    href: \"/dashboard/teacher/notifications\",\n    icon: <FiBell size={18} />,\n  },\n];\n"],"names":[],"mappings":";;;;;;;AAEA;AAOA;AATA;;;;AAWO,MAAM,iBAAiB;IAC5B,MAAM,IAAI,IAAA,yMAAe,EAAC;IAE1B,OAAO;QACL;YACE,OAAO,EAAE;YACT,MAAM;YACN,oBAAM,8OAAC,wJAAM;gBAAC,MAAM;;;;;;QACtB;QACA;YACE,OAAO,EAAE;YACT,MAAM;YACN,oBAAM,8OAAC,4JAAU;gBAAC,MAAM;;;;;;QAC1B;QACA;YACE,OAAO,EAAE;YACT,MAAM;YACN,oBAAM,8OAAC,iKAAe;gBAAC,MAAM;;;;;;QAC/B;QACA;YACE,OAAO,EAAE;YACT,MAAM;YACN,oBAAM,8OAAC,wJAAM;gBAAC,MAAM;;;;;;QACtB;KACD;AACH;AAGO,MAAM,cAAc;IACzB;QACE,OAAO;QACP,MAAM;QACN,oBAAM,8OAAC,wJAAM;YAAC,MAAM;;;;;;IACtB;IACA;QACE,OAAO;QACP,MAAM;QACN,oBAAM,8OAAC,4JAAU;YAAC,MAAM;;;;;;IAC1B;IACA;QACE,OAAO;QACP,MAAM;QACN,oBAAM,8OAAC,iKAAe;YAAC,MAAM;;;;;;IAC/B;IACA;QACE,OAAO;QACP,MAAM;QACN,oBAAM,8OAAC,wJAAM;YAAC,MAAM;;;;;;IACtB;CACD","debugId":null}},
    {"offset": {"line": 6591, "column": 0}, "map": {"version":3,"sources":["file:///home/nghiaphunng18/HustTutorial/ITSS.1.20251/components/ui/AttachmentListing.tsx"],"sourcesContent":["\"use client\";\n\nimport { Badge, Card, Flex, IconButton, Text, Dialog } from \"@radix-ui/themes\";\nimport {\n  FiFile,\n  FiFileText,\n  FiImage,\n  FiVideo,\n  FiMusic,\n  FiDownload,\n  FiShare2,\n  FiLink,\n  FiTrash2,\n  FiEye,\n} from \"react-icons/fi\";\nimport { useState } from \"react\";\nimport { useToast } from \"@/contexts/ToastContext\";\nimport { DocumentViewer } from \"./DocumentViewer\";\nimport { VideoPlayer } from \"./VideoPlayer\";\n\ninterface AttachmentListingProps {\n  attachment: {\n    id: string;\n    fileName: string;\n    fileUrl: string;\n    fileSize?: number | null;\n    mimeType?: string | null;\n    uploadedAt?: Date | string;\n    uploader?: {\n      name: string;\n    };\n  };\n  canDelete?: boolean;\n  onDelete?: (id: string) => void;\n}\n\nexport function AttachmentListing({\n  attachment,\n  canDelete = false,\n  onDelete,\n}: AttachmentListingProps) {\n  const [isHovering, setIsHovering] = useState(false);\n  const toast = useToast();\n\n  // Format file size\n  const formatFileSize = (bytes?: number | null): string => {\n    if (!bytes) return \"Unknown\";\n    if (bytes < 1024) return `${bytes} B`;\n    if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;\n    if (bytes < 1024 * 1024 * 1024)\n      return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;\n    return `${(bytes / (1024 * 1024 * 1024)).toFixed(1)} GB`;\n  };\n\n  // Get file icon based on MIME type\n  const getFileIcon = () => {\n    const mimeType = attachment.mimeType?.toLowerCase() || \"\";\n\n    if (mimeType.startsWith(\"video/\")) {\n      return <FiVideo size={20} className=\"text-purple-500\" />;\n    }\n    if (mimeType.startsWith(\"image/\")) {\n      return <FiImage size={20} className=\"text-blue-500\" />;\n    }\n    if (mimeType.startsWith(\"audio/\")) {\n      return <FiMusic size={20} className=\"text-pink-500\" />;\n    }\n    if (\n      mimeType.includes(\"pdf\") ||\n      mimeType.includes(\"document\") ||\n      mimeType.includes(\"word\")\n    ) {\n      return <FiFileText size={20} className=\"text-red-500\" />;\n    }\n    if (\n      mimeType.includes(\"spreadsheet\") ||\n      mimeType.includes(\"excel\") ||\n      mimeType.includes(\"csv\")\n    ) {\n      return <FiFileText size={20} className=\"text-green-500\" />;\n    }\n    if (mimeType.includes(\"presentation\") || mimeType.includes(\"powerpoint\")) {\n      return <FiFileText size={20} className=\"text-orange-500\" />;\n    }\n\n    return <FiFile size={20} className=\"text-gray-500\" />;\n  };\n\n  // Get file extension badge\n  const getFileExtension = () => {\n    const ext = attachment.fileName.split(\".\").pop()?.toUpperCase();\n    return ext || \"FILE\";\n  };\n\n  const handleDownload = () => {\n    const link = document.createElement(\"a\");\n    link.href = attachment.fileUrl;\n    link.download = attachment.fileName;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  const handleShare = () => {\n    toast.info(\n      \"Tính năng đang phát triển\",\n      \"Tính năng chia sẻ đang được phát triển\"\n    );\n  };\n\n  const handleCopyLink = async () => {\n    try {\n      await navigator.clipboard.writeText(attachment.fileUrl);\n      toast.success(\"Đã sao chép\", \"Đã sao chép liên kết vào clipboard\");\n    } catch (error) {\n      toast.error(\"Lỗi\", \"Không thể sao chép liên kết\");\n    }\n  };\n\n  const handleDelete = () => {\n    if (onDelete) {\n      onDelete(attachment.id);\n    } else {\n      toast.info(\n        \"Tính năng đang phát triển\",\n        \"Tính năng xóa đang được phát triển\"\n      );\n    }\n  };\n\n  // Check file type for rendering\n  const mimeType = attachment.mimeType?.toLowerCase() || \"\";\n  const isVideo = mimeType.startsWith(\"video/\");\n  const isDocument = \n    mimeType.includes(\"pdf\") ||\n    mimeType.includes(\"document\") ||\n    mimeType.includes(\"word\") ||\n    mimeType.includes(\"spreadsheet\") ||\n    mimeType.includes(\"excel\") ||\n    mimeType.includes(\"presentation\") ||\n    mimeType.includes(\"powerpoint\");\n\n  // For videos, render VideoPlayer\n  if (isVideo) {\n    return (\n      <Card className=\"bg-white\">\n        <VideoPlayer\n          videoUrl={attachment.fileUrl}\n          fileName={attachment.fileName}\n          fileSize={attachment.fileSize}\n        />\n        {attachment.uploader && (\n          <Flex gap=\"2\" className=\"p-3 pt-0\">\n            <Text size=\"1\" className=\"text-gray-500\">\n              Tải lên bởi {attachment.uploader.name}\n            </Text>\n            {attachment.uploadedAt && (\n              <>\n                <Text size=\"1\" className=\"text-gray-400\">•</Text>\n                <Text size=\"1\" className=\"text-gray-500\">\n                  {new Date(attachment.uploadedAt).toLocaleDateString(\"vi-VN\")}\n                </Text>\n              </>\n            )}\n          </Flex>\n        )}\n      </Card>\n    );\n  }\n\n  // For documents, use DocumentViewer with custom trigger\n  if (isDocument) {\n    const trigger = (\n      <Card\n        className=\"bg-white hover:shadow-md transition-all cursor-pointer\"\n        onMouseEnter={() => setIsHovering(true)}\n        onMouseLeave={() => setIsHovering(false)}\n      >\n        <Flex gap=\"3\" align=\"center\" className=\"p-3\">\n          <div className=\"flex-shrink-0\">{getFileIcon()}</div>\n          <Flex direction=\"column\" gap=\"1\" className=\"flex-1 min-w-0\">\n            <Text size=\"2\" weight=\"medium\" className=\"truncate\">\n              {attachment.fileName}\n            </Text>\n            <Flex align=\"center\" gap=\"2\" wrap=\"wrap\">\n              <Badge size=\"1\" color=\"gray\">\n                {getFileExtension()}\n              </Badge>\n              <Text size=\"1\" className=\"text-gray-500\">\n                {formatFileSize(attachment.fileSize)}\n              </Text>\n              {attachment.uploader && (\n                <>\n                  <Text size=\"1\" className=\"text-gray-400\">•</Text>\n                  <Text size=\"1\" className=\"text-gray-500\">\n                    {attachment.uploader.name}\n                  </Text>\n                </>\n              )}\n              {attachment.uploadedAt && (\n                <>\n                  <Text size=\"1\" className=\"text-gray-400\">•</Text>\n                  <Text size=\"1\" className=\"text-gray-500\">\n                    {new Date(attachment.uploadedAt).toLocaleDateString(\"vi-VN\")}\n                  </Text>\n                </>\n              )}\n            </Flex>\n          </Flex>\n\n          {/* Action buttons - visible on hover */}\n          {isHovering && (\n            <Flex gap=\"1\" className=\"flex-shrink-0\">\n              <IconButton\n                size=\"1\"\n                variant=\"soft\"\n                color=\"mint\"\n                title=\"Xem\"\n              >\n                <FiEye size={14} />\n              </IconButton>\n              <IconButton\n                size=\"1\"\n                variant=\"soft\"\n                color=\"gray\"\n                onClick={(e) => {\n                  e.stopPropagation();\n                  handleDownload();\n                }}\n                title=\"Tải xuống\"\n              >\n                <FiDownload size={14} />\n              </IconButton>\n              {canDelete && (\n                <IconButton\n                  size=\"1\"\n                  variant=\"soft\"\n                  color=\"red\"\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    handleDelete();\n                  }}\n                  title=\"Xóa\"\n                >\n                  <FiTrash2 size={14} />\n                </IconButton>\n              )}\n            </Flex>\n          )}\n        </Flex>\n      </Card>\n    );\n\n    return <DocumentViewer attachment={attachment} trigger={trigger} />;\n  }\n\n  // For other files (images, etc), render the regular card\n\n  return (\n    <Card\n      className=\"bg-white hover:shadow-md transition-all\"\n      onMouseEnter={() => setIsHovering(true)}\n      onMouseLeave={() => setIsHovering(false)}\n    >\n      <Flex gap=\"3\" align=\"center\" className=\"p-3\">\n        <div className=\"flex-shrink-0\">{getFileIcon()}</div>\n        <Flex direction=\"column\" gap=\"1\" className=\"flex-1 min-w-0\">\n          <Text size=\"2\" weight=\"medium\" className=\"truncate\">\n            {attachment.fileName}\n          </Text>\n          <Flex align=\"center\" gap=\"2\" wrap=\"wrap\">\n            <Badge size=\"1\" color=\"gray\">\n              {getFileExtension()}\n            </Badge>\n            <Text size=\"1\" className=\"text-gray-500\">\n              {formatFileSize(attachment.fileSize)}\n            </Text>\n            {attachment.uploader && (\n              <>\n                <Text size=\"1\" className=\"text-gray-400\">\n                  •\n                </Text>\n                <Text size=\"1\" className=\"text-gray-500\">\n                  {attachment.uploader.name}\n                </Text>\n              </>\n            )}\n            {attachment.uploadedAt && (\n              <>\n                <Text size=\"1\" className=\"text-gray-400\">\n                  •\n                </Text>\n                <Text size=\"1\" className=\"text-gray-500\">\n                  {new Date(attachment.uploadedAt).toLocaleDateString(\"vi-VN\")}\n                </Text>\n              </>\n            )}\n          </Flex>\n        </Flex>\n\n        {/* Action buttons - visible on hover */}\n        {isHovering && (\n          <Flex gap=\"1\" className=\"flex-shrink-0\">\n            <IconButton\n              size=\"1\"\n              variant=\"soft\"\n              color=\"gray\"\n              onClick={handleDownload}\n              title=\"Tải xuống\"\n            >\n              <FiDownload size={14} />\n            </IconButton>\n            <IconButton\n              size=\"1\"\n              variant=\"soft\"\n              color=\"gray\"\n              onClick={handleCopyLink}\n              title=\"Sao chép liên kết\"\n            >\n              <FiLink size={14} />\n            </IconButton>\n            <IconButton\n              size=\"1\"\n              variant=\"soft\"\n              color=\"gray\"\n              onClick={handleShare}\n              title=\"Chia sẻ\"\n            >\n              <FiShare2 size={14} />\n            </IconButton>\n            {canDelete && (\n              <IconButton\n                size=\"1\"\n                variant=\"soft\"\n                color=\"red\"\n                onClick={handleDelete}\n                title=\"Xóa\"\n              >\n                <FiTrash2 size={14} />\n              </IconButton>\n            )}\n          </Flex>\n        )}\n      </Flex>\n    </Card>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 7209, "column": 0}, "map": {"version":3,"sources":["file:///home/nghiaphunng18/HustTutorial/ITSS.1.20251/components/ui/UploadAttachmentDialog.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useRef } from \"react\";\nimport { Dialog, Button, Flex, Text } from \"@radix-ui/themes\";\nimport { FiUpload, FiFile, FiX } from \"react-icons/fi\";\nimport { useToast } from \"@/contexts/ToastContext\";\n\ninterface UploadAttachmentDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onUpload: (fileData: {\n    fileName: string;\n    fileUrl: string;\n    fileSize: number;\n    mimeType: string;\n  }) => Promise<void>;\n}\n\nexport function UploadAttachmentDialog({\n  open,\n  onOpenChange,\n  onUpload,\n}: UploadAttachmentDialogProps) {\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n  const [uploading, setUploading] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const toast = useToast();\n\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      // Validate file size (max 10MB)\n      if (file.size > 10 * 1024 * 1024) {\n        toast.error(\"Lỗi\", \"Kích thước tệp vượt quá giới hạn 10MB\");\n        return;\n      }\n      setSelectedFile(file);\n    }\n  };\n\n  const handleRemoveFile = () => {\n    setSelectedFile(null);\n    if (fileInputRef.current) {\n      fileInputRef.current.value = \"\";\n    }\n  };\n\n  const formatFileSize = (bytes: number): string => {\n    if (bytes < 1024) return bytes + \" B\";\n    if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(2) + \" KB\";\n    return (bytes / (1024 * 1024)).toFixed(2) + \" MB\";\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!selectedFile) {\n      toast.error(\"Lỗi\", \"Vui lòng chọn tệp\");\n      return;\n    }\n\n    setUploading(true);\n    try {\n      // Upload file to storage\n      const formData = new FormData();\n      formData.append(\"file\", selectedFile);\n\n      const uploadResponse = await fetch(\"/api/upload\", {\n        method: \"POST\",\n        body: formData,\n      });\n\n      if (!uploadResponse.ok) {\n        throw new Error(\"Failed to upload file\");\n      }\n\n      const uploadData = await uploadResponse.json();\n\n      await onUpload(uploadData);\n\n      toast.success(\"Thành công\", \"Đã tải lên tài liệu\");\n      setSelectedFile(null);\n      if (fileInputRef.current) {\n        fileInputRef.current.value = \"\";\n      }\n      onOpenChange(false);\n    } catch (error) {\n      toast.error(\"Lỗi\", \"Không thể tải lên tài liệu\");\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  return (\n    <Dialog.Root open={open} onOpenChange={onOpenChange}>\n      <Dialog.Content style={{ maxWidth: 500 }}>\n        <Dialog.Title>Tải lên tài liệu</Dialog.Title>\n        <Dialog.Description size=\"2\" mb=\"4\">\n          Chọn tệp để tải lên (tối đa 10MB)\n        </Dialog.Description>\n\n        <form onSubmit={handleSubmit}>\n          <Flex direction=\"column\" gap=\"3\">\n            <div>\n              <Text as=\"div\" size=\"2\" mb=\"2\" weight=\"bold\">\n                Chọn tệp <span className=\"text-red-500\">*</span>\n              </Text>\n              \n              {!selectedFile ? (\n                <label className=\"block\">\n                  <input\n                    ref={fileInputRef}\n                    type=\"file\"\n                    onChange={handleFileSelect}\n                    className=\"hidden\"\n                    accept=\".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.txt,.csv,.jpg,.jpeg,.png,.gif,.mp4,.webm,.mp3,.wav,.zip,.rar\"\n                  />\n                  <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer hover:border-blue-500 transition-colors\">\n                    <FiUpload className=\"mx-auto text-4xl text-gray-400 mb-2\" />\n                    <Text size=\"2\" className=\"text-gray-600\">\n                      Nhấn để chọn tệp\n                    </Text>\n                    <Text size=\"1\" className=\"text-gray-400 mt-1\">\n                      PDF, Word, Excel, PowerPoint, hình ảnh, video...\n                    </Text>\n                  </div>\n                </label>\n              ) : (\n                <div className=\"border border-gray-300 rounded-lg p-4\">\n                  <Flex justify=\"between\" align=\"center\">\n                    <Flex gap=\"2\" align=\"center\">\n                      <FiFile className=\"text-blue-500 text-xl\" />\n                      <div>\n                        <Text size=\"2\" weight=\"bold\">\n                          {selectedFile.name}\n                        </Text>\n                        <Text size=\"1\" className=\"text-gray-500\">\n                          {formatFileSize(selectedFile.size)}\n                        </Text>\n                      </div>\n                    </Flex>\n                    <Button\n                      type=\"button\"\n                      variant=\"ghost\"\n                      color=\"red\"\n                      size=\"1\"\n                      onClick={handleRemoveFile}\n                    >\n                      <FiX />\n                    </Button>\n                  </Flex>\n                </div>\n              )}\n            </div>\n\n            <Flex gap=\"3\" justify=\"end\" className=\"mt-2\">\n              <Dialog.Close>\n                <Button variant=\"soft\" color=\"gray\" type=\"button\">\n                  Hủy\n                </Button>\n              </Dialog.Close>\n              <Button\n                type=\"submit\"\n                className=\"bg-mint-500\"\n                disabled={uploading || !selectedFile}\n                loading={uploading}\n              >\n                <FiUpload size={16} />\n                {uploading ? \"Đang tải lên...\" : \"Tải lên\"}\n              </Button>\n            </Flex>\n          </Flex>\n        </form>\n      </Dialog.Content>\n    </Dialog.Root>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 7548, "column": 0}, "map": {"version":3,"sources":["file:///home/nghiaphunng18/HustTutorial/ITSS.1.20251/components/ui/MaterialCard.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\nimport { Card, Flex, Text, Badge, Button } from \"@radix-ui/themes\";\nimport {\n  FiFile,\n  FiFileText,\n  FiVideo,\n  FiImage,\n  FiMusic,\n  FiDownload,\n  FiTrash2,\n} from \"react-icons/fi\";\nimport { VideoPlayer } from \"./VideoPlayer\";\n\ninterface MaterialCardProps {\n  material: {\n    id: string;\n    title: string;\n    description?: string | null;\n    fileName: string;\n    fileUrl: string;\n    fileSize?: number | null;\n    mimeType?: string | null;\n    materialType: string;\n    uploadedBy?: {\n      id: string;\n      name: string;\n    } | null;\n    createdAt?: Date | string;\n  };\n  canDelete?: boolean;\n  onDelete?: (id: string) => void;\n}\n\nexport function MaterialCard({\n  material,\n  canDelete = false,\n  onDelete,\n}: MaterialCardProps) {\n  const getIcon = () => {\n    switch (material.materialType) {\n      case \"VIDEO\":\n        return <FiVideo size={20} className=\"text-purple-500\" />;\n      case \"PDF\":\n      case \"DOCUMENT\":\n        return <FiFileText size={20} className=\"text-red-500\" />;\n      case \"PRESENTATION\":\n        return <FiFileText size={20} className=\"text-orange-500\" />;\n      case \"IMAGE\":\n        return <FiImage size={20} className=\"text-blue-500\" />;\n      case \"AUDIO\":\n        return <FiMusic size={20} className=\"text-green-500\" />;\n      default:\n        return <FiFile size={20} className=\"text-gray-500\" />;\n    }\n  };\n\n  const getTypeLabel = () => {\n    switch (material.materialType) {\n      case \"VIDEO\":\n        return \"Video\";\n      case \"PDF\":\n        return \"PDF\";\n      case \"DOCUMENT\":\n        return \"Tài liệu\";\n      case \"PRESENTATION\":\n        return \"Slide\";\n      case \"IMAGE\":\n        return \"Hình ảnh\";\n      case \"AUDIO\":\n        return \"Audio\";\n      default:\n        return \"Khác\";\n    }\n  };\n\n  const formatFileSize = (bytes?: number | null) => {\n    if (!bytes) return \"\";\n    if (bytes < 1024) return `${bytes} B`;\n    if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;\n    if (bytes < 1024 * 1024 * 1024)\n      return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;\n    return `${(bytes / (1024 * 1024 * 1024)).toFixed(1)} GB`;\n  };\n\n  const handleDownload = () => {\n    const link = document.createElement(\"a\");\n    link.href = material.fileUrl;\n    link.download = material.fileName;\n    link.target = \"_blank\";\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  // Video materials get special treatment\n  if (material.materialType === \"VIDEO\") {\n    return (\n      <Flex direction=\"column\" gap=\"3\">\n        <VideoPlayer\n          videoUrl={material.fileUrl}\n          fileName={material.fileName}\n          fileSize={material.fileSize}\n        />\n        <Card className=\"bg-white\">\n          <Flex direction=\"column\" gap=\"2\">\n            <Flex justify=\"between\" align=\"start\">\n              <Flex direction=\"column\" gap=\"1\" className=\"flex-1\">\n                <Text weight=\"bold\" size=\"3\">\n                  {material.title}\n                </Text>\n                {material.description && (\n                  <Text size=\"2\" className=\"text-gray-600\">\n                    {material.description}\n                  </Text>\n                )}\n              </Flex>\n              {canDelete && onDelete && (\n                <Button\n                  size=\"1\"\n                  color=\"red\"\n                  variant=\"ghost\"\n                  onClick={() => onDelete(material.id)}\n                >\n                  <FiTrash2 size={14} />\n                </Button>\n              )}\n            </Flex>\n            <Flex gap=\"2\" align=\"center\" className=\"text-sm text-gray-500\">\n              {material.uploadedBy && (\n                <>\n                  <Text size=\"2\">Đăng bởi: {material.uploadedBy.name}</Text>\n                  <Text size=\"2\">•</Text>\n                </>\n              )}\n              {material.fileSize && (\n                <Text size=\"2\">{formatFileSize(material.fileSize)}</Text>\n              )}\n            </Flex>\n          </Flex>\n        </Card>\n      </Flex>\n    );\n  }\n\n  // Non-video materials\n  return (\n    <Card className=\"bg-white hover:shadow-md transition-shadow\">\n      <Flex gap=\"3\" align=\"start\">\n        <div className=\"p-3 bg-gray-50 rounded-lg\">{getIcon()}</div>\n        <Flex direction=\"column\" gap=\"2\" className=\"flex-1 min-w-0\">\n          <Flex justify=\"between\" align=\"start\" gap=\"2\">\n            <Flex direction=\"column\" gap=\"1\" className=\"flex-1 min-w-0\">\n              <Flex gap=\"2\" align=\"center\" wrap=\"wrap\">\n                <Text weight=\"bold\" size=\"3\" className=\"truncate\">\n                  {material.title}\n                </Text>\n                <Badge color=\"gray\" variant=\"soft\">\n                  {getTypeLabel()}\n                </Badge>\n              </Flex>\n              {material.description && (\n                <Text size=\"2\" className=\"text-gray-600 line-clamp-2\">\n                  {material.description}\n                </Text>\n              )}\n              <Flex gap=\"2\" align=\"center\" className=\"text-sm text-gray-500\">\n                {material.uploadedBy && (\n                  <>\n                    <Text size=\"1\">{material.uploadedBy.name}</Text>\n                    <Text size=\"1\">•</Text>\n                  </>\n                )}\n                <Text size=\"1\" className=\"truncate\">\n                  {material.fileName}\n                </Text>\n                {material.fileSize && (\n                  <>\n                    <Text size=\"1\">•</Text>\n                    <Text size=\"1\">{formatFileSize(material.fileSize)}</Text>\n                  </>\n                )}\n              </Flex>\n            </Flex>\n            <Flex gap=\"1\">\n              <Button\n                size=\"2\"\n                variant=\"soft\"\n                onClick={handleDownload}\n                className=\"shrink-0\"\n              >\n                <FiDownload size={16} />\n              </Button>\n              {canDelete && onDelete && (\n                <Button\n                  size=\"2\"\n                  color=\"red\"\n                  variant=\"soft\"\n                  onClick={() => onDelete(material.id)}\n                  className=\"shrink-0\"\n                >\n                  <FiTrash2 size={16} />\n                </Button>\n              )}\n            </Flex>\n          </Flex>\n        </Flex>\n      </Flex>\n    </Card>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 8001, "column": 0}, "map": {"version":3,"sources":["file:///home/nghiaphunng18/HustTutorial/ITSS.1.20251/components/ui/CreateAssignmentDialog.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport {\n  Dialog,\n  Flex,\n  Text,\n  Button,\n  TextField,\n  TextArea,\n  Select,\n  Checkbox,\n} from \"@radix-ui/themes\";\nimport { FiX } from \"react-icons/fi\";\nimport { FilePickerInput, FileAttachment } from \"./FilePickerInput\";\n\ninterface CreateAssignmentDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onSubmit: (data: {\n    title: string;\n    description: string;\n    dueDate: string;\n    maxPoints: number;\n    groupId: string | null;\n    isSeparateSubmission: boolean;\n    attachments?: FileAttachment[];\n  }) => Promise<void>;\n  groups?: Array<{ id: string; name: string }>;\n}\n\nexport function CreateAssignmentDialog({\n  open,\n  onOpenChange,\n  onSubmit,\n  groups = [],\n}: CreateAssignmentDialogProps) {\n  const [formData, setFormData] = useState({\n    title: \"\",\n    description: \"\",\n    dueDate: \"\",\n    maxPoints: 100,\n    groupId: null as string | null,\n    isSeparateSubmission: true,\n  });\n  const [attachments, setAttachments] = useState<FileAttachment[]>([]);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!formData.title.trim() || !formData.dueDate) {\n      return;\n    }\n\n    setIsSubmitting(true);\n    try {\n      await onSubmit({\n        ...formData,\n        attachments: attachments.length > 0 ? attachments : undefined,\n      });\n      // Reset form\n      setFormData({\n        title: \"\",\n        description: \"\",\n        dueDate: \"\",\n        maxPoints: 100,\n        groupId: null,\n        isSeparateSubmission: true,\n      });\n      setAttachments([]);\n      onOpenChange(false);\n    } catch (error) {\n      console.error(\"Failed to create assignment:\", error);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const minDate = new Date().toISOString().split(\"T\")[0];\n\n  return (\n    <Dialog.Root open={open} onOpenChange={onOpenChange}>\n      <Dialog.Content maxWidth=\"600px\">\n        <Dialog.Title>\n          <Flex justify=\"between\" align=\"center\">\n            <Text size=\"5\" weight=\"bold\">\n              Tạo bài tập mới\n            </Text>\n            <Dialog.Close>\n              <Button variant=\"ghost\" color=\"gray\">\n                <FiX size={20} />\n              </Button>\n            </Dialog.Close>\n          </Flex>\n        </Dialog.Title>\n\n        <form onSubmit={handleSubmit}>\n          <Flex direction=\"column\" gap=\"4\" className=\"mt-4\">\n            {/* Title */}\n            <label>\n              <Text as=\"div\" size=\"2\" mb=\"1\" weight=\"bold\">\n                Tiêu đề <span className=\"text-red-500\">*</span>\n              </Text>\n              <TextField.Root\n                placeholder=\"Nhập tiêu đề bài tập...\"\n                value={formData.title}\n                onChange={(e) =>\n                  setFormData({ ...formData, title: e.target.value })\n                }\n                required\n              />\n            </label>\n\n            {/* Description */}\n            <label>\n              <Text as=\"div\" size=\"2\" mb=\"1\" weight=\"bold\">\n                Mô tả\n              </Text>\n              <TextArea\n                placeholder=\"Nhập mô tả chi tiết bài tập...\"\n                value={formData.description}\n                onChange={(e) =>\n                  setFormData({ ...formData, description: e.target.value })\n                }\n                rows={4}\n              />\n            </label>\n\n            {/* Due Date */}\n            <label>\n              <Text as=\"div\" size=\"2\" mb=\"1\" weight=\"bold\">\n                Hạn nộp <span className=\"text-red-500\">*</span>\n              </Text>\n              <input\n                type=\"datetime-local\"\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-mint-500\"\n                value={formData.dueDate}\n                onChange={(e) =>\n                  setFormData({ ...formData, dueDate: e.target.value })\n                }\n                min={minDate}\n                required\n              />\n            </label>\n\n            {/* Max Points */}\n            <label>\n              <Text as=\"div\" size=\"2\" mb=\"1\" weight=\"bold\">\n                Điểm tối đa\n              </Text>\n              <TextField.Root\n                type=\"number\"\n                placeholder=\"100\"\n                value={formData.maxPoints.toString()}\n                onChange={(e) =>\n                  setFormData({\n                    ...formData,\n                    maxPoints: parseInt(e.target.value) || 100,\n                  })\n                }\n                min=\"0\"\n              />\n            </label>\n\n            {/* Group Selection */}\n            {groups.length > 0 && (\n              <label>\n                <Text as=\"div\" size=\"2\" mb=\"1\" weight=\"bold\">\n                  Giao cho nhóm (tùy chọn)\n                </Text>\n                <Select.Root\n                  value={formData.groupId || \"all\"}\n                  onValueChange={(value) =>\n                    setFormData({\n                      ...formData,\n                      groupId: value === \"all\" ? null : value,\n                    })\n                  }\n                >\n                  <Select.Trigger\n                    className=\"w-full\"\n                    placeholder=\"Chọn nhóm...\"\n                  />\n                  <Select.Content>\n                    <Select.Item value=\"all\">Tất cả sinh viên</Select.Item>\n                    {groups.map((group) => (\n                      <Select.Item key={group.id} value={group.id}>\n                        {group.name}\n                      </Select.Item>\n                    ))}\n                  </Select.Content>\n                </Select.Root>\n                <Text size=\"1\" className=\"text-gray-500 mt-1\">\n                  Để trống để giao cho tất cả sinh viên trong lớp\n                </Text>\n              </label>\n            )}\n\n            {/* Submission Type for Group Assignments */}\n            {formData.groupId && (\n              <label>\n                <Flex gap=\"2\" align=\"center\">\n                  <Checkbox\n                    checked={formData.isSeparateSubmission}\n                    onCheckedChange={(checked) =>\n                      setFormData({\n                        ...formData,\n                        isSeparateSubmission: checked === true,\n                      })\n                    }\n                  />\n                  <Text size=\"2\">Mỗi thành viên nộp bài riêng</Text>\n                </Flex>\n                <Text size=\"1\" className=\"text-gray-500 ml-6 mt-1\">\n                  {formData.isSeparateSubmission\n                    ? \"Mỗi thành viên trong nhóm phải nộp bài riêng của mình\"\n                    : \"Chỉ cần một thành viên nộp bài cho cả nhóm\"}\n                </Text>\n              </label>\n            )}\n\n            {/* Attachments */}\n            <div>\n              <Text as=\"div\" size=\"2\" mb=\"2\" weight=\"bold\">\n                Tệp đính kèm\n              </Text>\n              <FilePickerInput\n                value={attachments}\n                onChange={setAttachments}\n                maxFiles={10}\n              />\n            </div>\n\n            {/* Actions */}\n            <Flex gap=\"3\" justify=\"end\" className=\"mt-2\">\n              <Dialog.Close>\n                <Button variant=\"soft\" color=\"gray\" type=\"button\">\n                  Hủy\n                </Button>\n              </Dialog.Close>\n              <Button\n                className=\"bg-mint-500 hover:bg-mint-600\"\n                type=\"submit\"\n                disabled={isSubmitting}\n              >\n                {isSubmitting ? \"Đang tạo...\" : \"Tạo bài tập\"}\n              </Button>\n            </Flex>\n          </Flex>\n        </form>\n      </Dialog.Content>\n    </Dialog.Root>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 8484, "column": 0}, "map": {"version":3,"sources":["file:///home/nghiaphunng18/HustTutorial/ITSS.1.20251/components/ui/AssignmentCard.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\nimport { Card, Flex, Text, Badge, Button, Avatar } from \"@radix-ui/themes\";\nimport {\n  FiCalendar,\n  FiUsers,\n  FiFile,\n  FiClock,\n  FiCheckCircle,\n  FiAlertCircle,\n  FiEdit,\n  FiTrash2,\n} from \"react-icons/fi\";\nimport { useRouter } from \"next/navigation\";\nimport { useTranslations } from \"next-intl\";\n\ninterface AssignmentCardProps {\n  assignment: {\n    id: string;\n    title: string;\n    description?: string | null;\n    dueDate: Date | string;\n    maxPoints: number;\n    status: string;\n    group?: {\n      id: string;\n      name: string;\n    } | null;\n    createdBy?: {\n      name: string;\n      avatar?: string | null;\n    };\n    attachments?: Array<{ id: string; fileName: string }>;\n    _count?: {\n      submissions: number;\n    };\n    class?: {\n      id: string;\n      name: string;\n      code: string;\n    };\n  };\n  submission?: {\n    id: string;\n    status: string;\n    submittedAt?: Date | string | null;\n    grade?: number | null;\n  } | null;\n  showClass?: boolean;\n  canEdit?: boolean;\n  canDelete?: boolean;\n  onEdit?: () => void;\n  onDelete?: () => void;\n}\n\nexport function AssignmentCard({\n  assignment,\n  submission,\n  showClass = false,\n  canEdit = false,\n  canDelete = false,\n  onEdit,\n  onDelete,\n}: AssignmentCardProps) {\n  const router = useRouter();\n  const t = useTranslations('assignments.general');\n  const tStatus = useTranslations('assignments.status');\n  const dueDate = new Date(assignment.dueDate);\n  const now = new Date();\n  const isOverdue =\n    dueDate < now && (!submission || submission.status !== \"SUBMITTED\");\n  const daysUntilDue = Math.ceil(\n    (dueDate.getTime() - now.getTime()) / (1000 * 60 * 60 * 24)\n  );\n\n  const getStatusBadge = () => {\n    if (submission) {\n      switch (submission.status) {\n        case \"SUBMITTED\":\n          return (\n            <Badge color=\"blue\" variant=\"soft\">\n              <FiCheckCircle size={12} /> {tStatus('submitted')}\n            </Badge>\n          );\n        case \"GRADED\":\n          return (\n            <Badge color=\"green\" variant=\"soft\">\n              <FiCheckCircle size={12} /> {tStatus('graded')}\n            </Badge>\n          );\n        case \"LATE\":\n          return (\n            <Badge color=\"orange\" variant=\"soft\">\n              <FiAlertCircle size={12} /> {tStatus('late')}\n            </Badge>\n          );\n        default:\n          return (\n            <Badge color=\"gray\" variant=\"soft\">\n              <FiClock size={12} /> {tStatus('draft')}\n            </Badge>\n          );\n      }\n    }\n\n    if (isOverdue) {\n      return (\n        <Badge color=\"red\" variant=\"soft\">\n          <FiAlertCircle size={12} /> {tStatus('overdue')}\n        </Badge>\n      );\n    }\n\n    if (daysUntilDue <= 1) {\n      return (\n        <Badge color=\"orange\" variant=\"soft\">\n          <FiClock size={12} /> {tStatus('due_soon')}\n        </Badge>\n      );\n    }\n\n    return (\n      <Badge color=\"mint\" variant=\"soft\">\n        {tStatus('open')}\n      </Badge>\n    );\n  };\n\n  const handleClick = () => {\n    if (assignment.class) {\n      if (showClass) {\n        // Student view - navigate to student assignment detail\n        router.push(`/dashboard/student/assignments/${assignment.id}`);\n      } else if (canEdit || canDelete) {\n        // Teacher view - navigate to teacher assignment detail\n        router.push(`/dashboard/teacher/assignments/${assignment.id}`);\n      }\n    }\n  };\n\n  return (\n    <Card\n      className=\"bg-white hover:shadow-md transition-shadow\"\n    >\n      <Flex direction=\"column\" gap=\"3\">\n        {/* Header */}\n        <Flex justify=\"between\" align=\"start\" gap=\"3\">\n          <Flex direction=\"column\" gap=\"2\" className=\"flex-1 min-w-0\">\n            <Flex gap=\"2\" align=\"center\" wrap=\"wrap\">\n              <Text size=\"4\" weight=\"bold\" className=\"truncate\">\n                {assignment.title}\n              </Text>\n              {getStatusBadge()}\n              {assignment.group && (\n                <Badge color=\"purple\" variant=\"soft\">\n                  <FiUsers size={12} /> {assignment.group.name}\n                </Badge>\n              )}\n            </Flex>\n\n            {showClass && assignment.class && (\n              <Flex gap=\"2\" align=\"center\">\n                <Badge color=\"gray\" variant=\"outline\">\n                  {assignment.class.code}\n                </Badge>\n                <Text size=\"2\" className=\"text-gray-600 truncate\">\n                  {assignment.class.name}\n                </Text>\n              </Flex>\n            )}\n\n            {assignment.description && (\n              <Text size=\"2\" className=\"text-gray-600 line-clamp-2\">\n                {assignment.description}\n              </Text>\n            )}\n          </Flex>\n\n          {(canEdit || canDelete) && (\n            <Flex gap=\"2\">\n              {canEdit && onEdit && (\n                <Button size=\"2\" variant=\"ghost\" onClick={onEdit}>\n                  <FiEdit size={16} />\n                </Button>\n              )}\n              {canDelete && onDelete && (\n                <Button size=\"2\" color=\"red\" variant=\"ghost\" onClick={onDelete}>\n                  <FiTrash2 size={16} />\n                </Button>\n              )}\n            </Flex>\n          )}\n        </Flex>\n\n        {/* Footer */}\n        <Flex justify=\"between\" align=\"center\" wrap=\"wrap\" gap=\"3\">\n          <Flex gap=\"4\" align=\"center\" wrap=\"wrap\">\n            {/* Due Date */}\n            <Flex gap=\"1\" align=\"center\">\n              <FiCalendar size={14} className=\"text-gray-500\" />\n              <Text\n                size=\"2\"\n                className={\n                  isOverdue ? \"text-red-600 font-medium\" : \"text-gray-600\"\n                }\n              >\n                {dueDate.toLocaleDateString(\"vi-VN\", {\n                  day: \"2-digit\",\n                  month: \"2-digit\",\n                  year: \"numeric\",\n                  hour: \"2-digit\",\n                  minute: \"2-digit\",\n                })}\n              </Text>\n            </Flex>\n\n            {/* Max Points */}\n            <Flex gap=\"1\" align=\"center\">\n              <Text size=\"2\" weight=\"bold\" className=\"text-mint-600\">\n                {t('points', { points: assignment.maxPoints })}\n              </Text>\n            </Flex>\n\n            {/* Attachments */}\n            {assignment.attachments && assignment.attachments.length > 0 && (\n              <Flex gap=\"1\" align=\"center\">\n                <FiFile size={14} className=\"text-gray-500\" />\n                <Text size=\"2\" className=\"text-gray-600\">\n                  {t('files', { count: assignment.attachments.length })}\n                </Text>\n              </Flex>\n            )}\n\n            {/* Submission Count (Teacher View) */}\n            {assignment._count?.submissions !== undefined && (\n              <Flex gap=\"1\" align=\"center\">\n                <FiCheckCircle size={14} className=\"text-gray-500\" />\n                <Text size=\"2\" className=\"text-gray-600\">\n                  {t('submissions', { count: assignment._count.submissions })}\n                </Text>\n              </Flex>\n            )}\n          </Flex>\n\n          {/* Graded Score */}\n          {submission?.grade !== undefined && submission.grade !== null && (\n            <Badge color=\"green\" size=\"2\">\n              {t('grade', { grade: submission.grade, maxPoints: assignment.maxPoints })}\n            </Badge>\n          )}\n\n          {/* View Details Button */}\n          <Button\n            size=\"2\"\n            variant=\"soft\"\n            onClick={(e) => {\n              e.stopPropagation();\n              handleClick();\n            }}\n          >\n            {t('view_details')}\n          </Button>\n\n          {/* Teacher Info */}\n          {assignment.createdBy && (\n            <Flex gap=\"2\" align=\"center\">\n              <Avatar\n                size=\"1\"\n                fallback={assignment.createdBy.name.charAt(0)}\n                src={assignment.createdBy.avatar || undefined}\n              />\n              <Text size=\"1\" className=\"text-gray-600\">\n                {assignment.createdBy.name}\n              </Text>\n            </Flex>\n          )}\n        </Flex>\n      </Flex>\n    </Card>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 9011, "column": 0}, "map": {"version":3,"sources":["file:///home/nghiaphunng18/HustTutorial/ITSS.1.20251/components/ui/AttendanceSessionDialog.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport {\n  Dialog,\n  Flex,\n  Text,\n  Button,\n  Badge,\n  Card,\n  ScrollArea,\n} from \"@radix-ui/themes\";\nimport { FiX, FiUsers, FiCheck, FiClock, FiUserCheck } from \"react-icons/fi\";\nimport axios from \"@/lib/axios\";\n\ninterface Student {\n  id: string;\n  name: string;\n  studentCode: string | null;\n  avatar: string | null;\n}\n\ninterface AttendanceSession {\n  id: string;\n  sessionCode: string;\n  password: string;\n  title: string;\n  status: \"ACTIVE\" | \"CLOSED\";\n  startTime: string;\n  endTime: string | null;\n  checkIns: Array<{\n    id: string;\n    studentId: string;\n    checkedAt: string;\n    student: Student;\n  }>;\n}\n\ninterface AttendanceSessionDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  classId: string;\n  students: Student[];\n  sessionId?: string | null;\n}\n\nexport function AttendanceSessionDialog({\n  open,\n  onOpenChange,\n  classId,\n  students,\n  sessionId,\n}: AttendanceSessionDialogProps) {\n  const [session, setSession] = useState<AttendanceSession | null>(null);\n  const [isCreating, setIsCreating] = useState(false);\n  const [isClosing, setIsClosing] = useState(false);\n  const [durationMinutes, setDurationMinutes] = useState(10);\n  const [remainingTime, setRemainingTime] = useState<string>(\"\");\n\n  // Load existing session when sessionId is provided\n  useEffect(() => {\n    if (open && sessionId) {\n      const loadSession = async () => {\n        try {\n          const response = await axios.get(\n            `/api/attendance-sessions/${sessionId}`\n          );\n          setSession(response.data);\n        } catch (error) {\n          console.error(\"Failed to load session:\", error);\n        }\n      };\n      loadSession();\n    } else if (!open) {\n      // Reset when dialog closes\n      setSession(null);\n    }\n  }, [open, sessionId]);\n\n  // Poll for updates every 2 seconds when session is active\n  useEffect(() => {\n    if (!session || session.status !== \"ACTIVE\") return;\n\n    const interval = setInterval(async () => {\n      try {\n        const response = await axios.get(\n          `/api/attendance-sessions/${session.id}`\n        );\n        const updatedSession = response.data;\n\n        // Check if session has expired\n        if (\n          updatedSession.endTime &&\n          new Date() > new Date(updatedSession.endTime)\n        ) {\n          // Auto-close if expired\n          await axios.patch(`/api/attendance-sessions/${session.id}`, {\n            status: \"CLOSED\",\n          });\n          setSession({ ...updatedSession, status: \"CLOSED\" });\n        } else {\n          setSession(updatedSession);\n        }\n      } catch (error) {\n        console.error(\"Failed to fetch session updates:\", error);\n      }\n    }, 2000);\n\n    return () => clearInterval(interval);\n  }, [session]);\n\n  // Update remaining time every second\n  useEffect(() => {\n    if (!session || session.status !== \"ACTIVE\" || !session.endTime) {\n      setRemainingTime(\"\");\n      return;\n    }\n\n    const updateRemainingTime = () => {\n      const now = new Date();\n      const end = new Date(session.endTime!);\n      const diff = end.getTime() - now.getTime();\n\n      if (diff <= 0) {\n        setRemainingTime(\"Hết giờ\");\n        return;\n      }\n\n      const minutes = Math.floor(diff / 60000);\n      const seconds = Math.floor((diff % 60000) / 1000);\n      setRemainingTime(`${minutes}:${seconds.toString().padStart(2, \"0\")}`);\n    };\n\n    updateRemainingTime();\n    const interval = setInterval(updateRemainingTime, 1000);\n\n    return () => clearInterval(interval);\n  }, [session]);\n\n  const handleStartSession = async () => {\n    setIsCreating(true);\n    try {\n      const response = await axios.post(\n        `/api/classes/${classId}/attendance-sessions`,\n        {\n          title: \"Điểm danh\",\n          durationMinutes,\n        }\n      );\n      setSession(response.data);\n    } catch (error) {\n      console.error(\"Failed to create session:\", error);\n    } finally {\n      setIsCreating(false);\n    }\n  };\n\n  const handleCloseSession = async () => {\n    if (!session) return;\n\n    setIsClosing(true);\n    try {\n      await axios.patch(`/api/attendance-sessions/${session.id}`, {\n        status: \"CLOSED\",\n      });\n      setSession({ ...session, status: \"CLOSED\" });\n    } catch (error) {\n      console.error(\"Failed to close session:\", error);\n    } finally {\n      setIsClosing(false);\n    }\n  };\n\n  const handleClose = () => {\n    setSession(null);\n    onOpenChange(false);\n  };\n\n  // Separate students into attended and unattended\n  const checkedInStudentIds = new Set(\n    session?.checkIns.map((c) => c.studentId) || []\n  );\n  const attendedStudents = students.filter((s) =>\n    checkedInStudentIds.has(s.id)\n  );\n  const unattendedStudents = students.filter(\n    (s) => !checkedInStudentIds.has(s.id)\n  );\n\n  const attendanceRate =\n    students.length > 0\n      ? Math.round((attendedStudents.length / students.length) * 100)\n      : 0;\n\n  return (\n    <Dialog.Root open={open} onOpenChange={handleClose}>\n      <Dialog.Content maxWidth=\"800px\">\n        <Dialog.Title>\n          <Flex justify=\"between\" align=\"center\">\n            <Text size=\"5\" weight=\"bold\">\n              Điểm danh\n            </Text>\n            <Dialog.Close>\n              <Button variant=\"ghost\" color=\"gray\">\n                <FiX size={20} />\n              </Button>\n            </Dialog.Close>\n          </Flex>\n        </Dialog.Title>\n\n        <Flex direction=\"column\" gap=\"4\" className=\"mt-4\">\n          {!session ? (\n            // No active session - show start button\n            <Flex direction=\"column\" gap=\"3\" align=\"center\" py=\"6\">\n              <FiUserCheck size={48} className=\"text-gray-400\" />\n              <Text size=\"3\" className=\"text-gray-600\">\n                Chưa có phiên điểm danh nào đang hoạt động\n              </Text>\n\n              {/* Duration selector */}\n              <Flex gap=\"2\" align=\"center\">\n                <Text size=\"2\" weight=\"medium\">\n                  Thời gian:\n                </Text>\n                <select\n                  value={durationMinutes}\n                  onChange={(e) => setDurationMinutes(Number(e.target.value))}\n                  className=\"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-mint-500\"\n                >\n                  <option value={5}>5 phút</option>\n                  <option value={10}>10 phút</option>\n                  <option value={15}>15 phút</option>\n                  <option value={20}>20 phút</option>\n                  <option value={30}>30 phút</option>\n                </select>\n              </Flex>\n\n              <Button\n                size=\"3\"\n                className=\"bg-mint-500 hover:bg-mint-600\"\n                onClick={handleStartSession}\n                disabled={isCreating}\n              >\n                {isCreating ? \"Đang tạo...\" : \"Bắt đầu điểm danh\"}\n              </Button>\n            </Flex>\n          ) : (\n            // Active session\n            <>\n              {/* Session info */}\n              <Card>\n                <Flex direction=\"column\" gap=\"3\" p=\"3\">\n                  <Flex justify=\"between\" align=\"center\">\n                    <Flex gap=\"3\" align=\"center\">\n                      <FiClock size={20} className=\"text-mint-500\" />\n                      <div>\n                        <Text size=\"2\" weight=\"bold\" className=\"block\">\n                          Mã điểm danh\n                        </Text>\n                        <Text size=\"6\" weight=\"bold\" className=\"text-mint-500\">\n                          {session.sessionCode}\n                        </Text>\n                      </div>\n                    </Flex>\n                    <Flex gap=\"2\" align=\"center\">\n                      {session.status === \"ACTIVE\" && remainingTime && (\n                        <Badge color=\"orange\" size=\"2\">\n                          Còn lại: {remainingTime}\n                        </Badge>\n                      )}\n                      <Badge\n                        color={session.status === \"ACTIVE\" ? \"green\" : \"gray\"}\n                        size=\"2\"\n                      >\n                        {session.status === \"ACTIVE\"\n                          ? \"Đang hoạt động\"\n                          : \"Đã đóng\"}\n                      </Badge>\n                    </Flex>\n                  </Flex>\n\n                  {/* Password Display for Teachers */}\n                  <Flex gap=\"2\" align=\"center\" className=\"bg-amber-50 p-3 rounded-lg border border-amber-200\">\n                    <div className=\"flex-1\">\n                      <Text size=\"2\" weight=\"bold\" className=\"block text-amber-900\">\n                        Mật khẩu điểm danh (chỉ giáo viên thấy)\n                      </Text>\n                      <Text size=\"5\" weight=\"bold\" className=\"text-amber-600 font-mono\">\n                        {session.password}\n                      </Text>\n                    </div>\n                  </Flex>\n\n                  <Flex gap=\"4\" align=\"center\">\n                    <Flex gap=\"2\" align=\"center\">\n                      <FiUsers size={18} className=\"text-gray-500\" />\n                      <Text size=\"2\">\n                        <strong>{attendedStudents.length}</strong>/\n                        <strong>{students.length}</strong> sinh viên\n                      </Text>\n                    </Flex>\n                    <Flex gap=\"2\" align=\"center\">\n                      <FiCheck size={18} className=\"text-green-500\" />\n                      <Text size=\"2\">\n                        Tỷ lệ: <strong>{attendanceRate}%</strong>\n                      </Text>\n                    </Flex>\n                  </Flex>\n\n                  {session.status === \"ACTIVE\" && (\n                    <Button\n                      color=\"red\"\n                      variant=\"soft\"\n                      onClick={handleCloseSession}\n                      disabled={isClosing}\n                    >\n                      {isClosing ? \"Đang đóng...\" : \"Đóng phiên điểm danh\"}\n                    </Button>\n                  )}\n                </Flex>\n              </Card>\n\n              {/* Student lists */}\n              <Flex gap=\"3\" className=\"min-h-[400px]\">\n                {/* Attended students */}\n                <Card className=\"flex-1\">\n                  <Flex direction=\"column\" gap=\"2\" p=\"3\">\n                    <Flex align=\"center\" gap=\"2\" pb=\"2\">\n                      <FiCheck className=\"text-green-500\" />\n                      <Text size=\"2\" weight=\"bold\">\n                        Đã điểm danh ({attendedStudents.length})\n                      </Text>\n                    </Flex>\n                    <ScrollArea style={{ height: \"350px\" }}>\n                      <Flex direction=\"column\" gap=\"2\">\n                        {attendedStudents.length === 0 ? (\n                          <Text\n                            size=\"1\"\n                            className=\"text-gray-500 text-center py-4\"\n                          >\n                            Chưa có sinh viên nào điểm danh\n                          </Text>\n                        ) : (\n                          attendedStudents.map((student) => {\n                            const checkIn = session.checkIns.find(\n                              (c) => c.studentId === student.id\n                            );\n                            return (\n                              <Card key={student.id} size=\"1\">\n                                <Flex\n                                  align=\"center\"\n                                  gap=\"2\"\n                                  p=\"2\"\n                                  className=\"bg-green-50\"\n                                >\n                                  {student.avatar ? (\n                                    <img\n                                      src={student.avatar}\n                                      alt={student.name}\n                                      className=\"w-8 h-8 rounded-full\"\n                                    />\n                                  ) : (\n                                    <div className=\"w-8 h-8 rounded-full bg-mint-200 flex items-center justify-center\">\n                                      <Text size=\"1\" weight=\"bold\">\n                                        {student.name.charAt(0)}\n                                      </Text>\n                                    </div>\n                                  )}\n                                  <Flex direction=\"column\" className=\"flex-1\">\n                                    <Text size=\"2\" weight=\"medium\">\n                                      {student.name}\n                                    </Text>\n                                    {student.studentCode && (\n                                      <Text size=\"1\" className=\"text-gray-500\">\n                                        {student.studentCode}\n                                      </Text>\n                                    )}\n                                  </Flex>\n                                  <Text size=\"1\" className=\"text-gray-500\">\n                                    {checkIn &&\n                                      new Date(\n                                        checkIn.checkedAt\n                                      ).toLocaleTimeString(\"vi-VN\", {\n                                        hour: \"2-digit\",\n                                        minute: \"2-digit\",\n                                      })}\n                                  </Text>\n                                </Flex>\n                              </Card>\n                            );\n                          })\n                        )}\n                      </Flex>\n                    </ScrollArea>\n                  </Flex>\n                </Card>\n\n                {/* Unattended students */}\n                <Card className=\"flex-1\">\n                  <Flex direction=\"column\" gap=\"2\" p=\"3\">\n                    <Flex align=\"center\" gap=\"2\" pb=\"2\">\n                      <FiX className=\"text-red-500\" />\n                      <Text size=\"2\" weight=\"bold\">\n                        Chưa điểm danh ({unattendedStudents.length})\n                      </Text>\n                    </Flex>\n                    <ScrollArea style={{ height: \"350px\" }}>\n                      <Flex direction=\"column\" gap=\"2\">\n                        {unattendedStudents.length === 0 ? (\n                          <Text\n                            size=\"1\"\n                            className=\"text-gray-500 text-center py-4\"\n                          >\n                            Tất cả sinh viên đã điểm danh\n                          </Text>\n                        ) : (\n                          unattendedStudents.map((student) => (\n                            <Card key={student.id} size=\"1\">\n                              <Flex align=\"center\" gap=\"2\" p=\"2\">\n                                {student.avatar ? (\n                                  <img\n                                    src={student.avatar}\n                                    alt={student.name}\n                                    className=\"w-8 h-8 rounded-full\"\n                                  />\n                                ) : (\n                                  <div className=\"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center\">\n                                    <Text size=\"1\" weight=\"bold\">\n                                      {student.name.charAt(0)}\n                                    </Text>\n                                  </div>\n                                )}\n                                <Flex direction=\"column\" className=\"flex-1\">\n                                  <Text size=\"2\" weight=\"medium\">\n                                    {student.name}\n                                  </Text>\n                                  {student.studentCode && (\n                                    <Text size=\"1\" className=\"text-gray-500\">\n                                      {student.studentCode}\n                                    </Text>\n                                  )}\n                                </Flex>\n                              </Flex>\n                            </Card>\n                          ))\n                        )}\n                      </Flex>\n                    </ScrollArea>\n                  </Flex>\n                </Card>\n              </Flex>\n            </>\n          )}\n        </Flex>\n      </Dialog.Content>\n    </Dialog.Root>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 9900, "column": 0}, "map": {"version":3,"sources":["file:///home/nghiaphunng18/HustTutorial/ITSS.1.20251/app/%5Blocale%5D/dashboard/teacher/classes/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, use } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport axios from \"@/lib/axios\";\nimport {\n  Container,\n  Heading,\n  Text,\n  Card,\n  Flex,\n  Button,\n  Tabs,\n  Badge,\n  Avatar,\n  Dialog,\n  TextField,\n  TextArea,\n  Select,\n} from \"@radix-ui/themes\";\nimport {\n  FiBook,\n  FiUsers,\n  FiFileText,\n  FiFile,\n  FiCheckCircle,\n  FiPlus,\n  FiMessageSquare,\n  FiThumbsUp,\n  FiCalendar,\n  FiLogOut,\n  FiClock,\n  FiUserPlus,\n  FiSettings,\n  FiTrash2,\n} from \"react-icons/fi\";\nimport DashboardNavBar from \"@/components/ui/DashboardNavBar\";\nimport ClassHeader from \"@/components/ui/ClassHeader\";\nimport ConfirmDialog from \"@/components/ui/ConfirmDialog\";\nimport { PostCard } from \"@/components/ui/PostCard\";\nimport { GroupManagementDialog } from \"@/components/ui/GroupManagementDialog\";\nimport { MembersManagementDialog } from \"@/components/ui/MembersManagementDialog\";\nimport { ClassSettingsDialog } from \"@/components/ui/ClassSettingsDialog\";\nimport { CreatePostDialog } from \"@/components/ui/CreatePostDialog\";\nimport { useTeacherTabs } from \"@/components/ui/TeacherDashboardNav\";\nimport { useAuth } from \"@/contexts/AuthContext\";\nimport { useToast } from \"@/contexts/ToastContext\";\nimport { AttachmentListing } from \"@/components/ui/AttachmentListing\";\nimport { UploadAttachmentDialog } from \"@/components/ui/UploadAttachmentDialog\";\nimport { FileAttachment } from \"@/components/ui/FilePickerInput\";\nimport { MaterialCard } from \"@/components/ui/MaterialCard\";\nimport { CreateAssignmentDialog } from \"@/components/ui/CreateAssignmentDialog\";\nimport { AssignmentCard } from \"@/components/ui/AssignmentCard\";\nimport { AttendanceSessionDialog } from \"@/components/ui/AttendanceSessionDialog\";\nimport { useLocale, useTranslations } from \"next-intl\";\n\ninterface ClassData {\n  id: string;\n  code: string;\n  name: string;\n  description: string | null;\n  semester: string | null;\n  year: number | null;\n  createdBy: string | null;\n  teachers: Array<{\n    teacher: { id: string; name: string; avatar: string | null };\n  }>;\n  enrollments: Array<{\n    student: {\n      id: string;\n      name: string;\n      email: string;\n      studentCode?: string | null;\n      avatar: string | null;\n    };\n  }>;\n  groups?: Array<{\n    id: string;\n    name: string;\n    members: Array<{\n      student: {\n        id: string;\n        name: string;\n        email: string;\n        studentCode?: string | null;\n        avatar: string | null;\n      };\n    }>;\n  }>;\n  posts: Array<any>;\n  assignments: Array<any>;\n  learningMaterials: Array<any>;\n  attachments?: Array<{\n    id: string;\n    fileName: string;\n    fileUrl: string;\n    fileSize?: number | null;\n    mimeType?: string | null;\n    uploadedAt?: Date | string;\n    uploader?: {\n      name: string;\n    };\n  }>;\n}\n\nexport default function TeacherClassDetailPage({\n  params,\n}: {\n  params: Promise<{ id: string }>;\n}) {\n  const { id } = use(params);\n  const { user, isLoading } = useAuth();\n  const router = useRouter();\n  const locale = useLocale();\n  const toast = useToast();\n  const teacherTabs = useTeacherTabs();\n  const t = useTranslations('classes.detail');\n  const tTabs = useTranslations('classes.detail.tabs');\n  const tSections = useTranslations('classes.detail.sections');\n  const tButtons = useTranslations('classes.detail.buttons');\n  const tEmpty = useTranslations('classes.detail.empty_states');\n  const tActions = useTranslations('classes.detail.actions');\n  const tPostSort = useTranslations('posts.sorting');\n  const tPostActions = useTranslations('posts.actions');\n  const [classData, setClassData] = useState<ClassData | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [isPostDialogOpen, setIsPostDialogOpen] = useState(false);\n  const [isTeaching, setIsTeaching] = useState(false);\n  const [isCreator, setIsCreator] = useState(false);\n  const [isLeaveDialogOpen, setIsLeaveDialogOpen] = useState(false);\n  const [isGroupDialogOpen, setIsGroupDialogOpen] = useState(false);\n  const [isMembersDialogOpen, setIsMembersDialogOpen] = useState(false);\n  const [isSettingsDialogOpen, setIsSettingsDialogOpen] = useState(false);\n  const [isUploadAttachmentOpen, setIsUploadAttachmentOpen] = useState(false);\n  const [attachments, setAttachments] = useState<any[]>([]);\n  const [materials, setMaterials] = useState<any[]>([]);\n  const [isAssignmentDialogOpen, setIsAssignmentDialogOpen] = useState(false);\n  const [postSortOrder, setPostSortOrder] = useState<\"latest\" | \"oldest\" | \"most_votes\" | \"recently_updated\">(\"latest\");\n  const [assignments, setAssignments] = useState<any[]>([]);\n  const [isAttendanceDialogOpen, setIsAttendanceDialogOpen] = useState(false);\n  const [attendanceSessions, setAttendanceSessions] = useState<any[]>([]);\n  const [selectedSessionId, setSelectedSessionId] = useState<string | null>(\n    null\n  );\n  const [commentSortOrder, setCommentSortOrder] = useState<\"time\" | \"votes\">(\n    \"time\"\n  );\n  const [isDeletePostDialogOpen, setIsDeletePostDialogOpen] = useState(false);\n  const [postToDelete, setPostToDelete] = useState<string | null>(null);\n  const [isDeleteCommentDialogOpen, setIsDeleteCommentDialogOpen] = useState(false);\n  const [commentToDelete, setCommentToDelete] = useState<string | null>(null);\n\n  const fetchClassData = async () => {\n    try {\n      setLoading(true);\n      const { data } = await axios.get(`/api/classes/${id}`);\n\n      // Fetch groups separately\n      const { data: groupsData } = await axios.get(`/api/classes/${id}/groups`);\n\n      setClassData({ ...data.class, groups: groupsData.groups });\n      // Check if current user is teaching this class\n      const teaching = data.class.teachers.some(\n        (t: any) => t.teacher.id === user?.id\n      );\n      setIsTeaching(teaching);\n      // Check if current user is the creator\n      setIsCreator(data.class.createdBy === user?.id);\n    } catch (error) {\n      console.error(\"Failed to fetch class:\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchAttachments = async () => {\n    try {\n      const { data } = await axios.get(`/api/classes/${id}/attachments`);\n      setAttachments(data);\n    } catch (error) {\n      console.error(\"Failed to fetch attachments:\", error);\n    }\n  };\n\n  const fetchMaterials = async () => {\n    try {\n      const { data } = await axios.get(`/api/classes/${id}/materials`);\n      setMaterials(data);\n    } catch (error) {\n      console.error(\"Failed to fetch materials:\", error);\n    }\n  };\n\n  const fetchAssignments = async () => {\n    try {\n      const { data } = await axios.get(`/api/classes/${id}/assignments`);\n      setAssignments(data);\n    } catch (error) {\n      console.error(\"Failed to fetch assignments:\", error);\n    }\n  };\n\n  const fetchAttendanceSessions = async () => {\n    try {\n      const { data } = await axios.get(\n        `/api/classes/${id}/attendance-sessions`\n      );\n      setAttendanceSessions(data);\n    } catch (error) {\n      console.error(\"Failed to fetch attendance sessions:\", error);\n    }\n  };\n\n  useEffect(() => {\n    if (!isLoading && (!user || user.role !== \"TEACHER\")) {\n      router.push(`/${locale}/login`);\n    } else if (!isLoading && user && !classData) {\n      fetchClassData();\n      fetchAttachments();\n      fetchMaterials();\n      fetchAssignments();\n      fetchAttendanceSessions();\n    }\n  }, [user, isLoading]);\n\n  const handleCreatePost = async (formData: {\n    title: string;\n    content: string;\n    type: string;\n    attachments?: FileAttachment[];\n  }) => {\n    try {\n      await axios.post(`/api/classes/${id}/posts`, {\n        ...formData,\n        authorId: user?.id,\n        attachments: formData.attachments,\n      });\n      setIsPostDialogOpen(false);\n      toast.success(tActions('post_created'), tActions('post_created_success'));\n      fetchClassData();\n      // Refresh attachments if the post has attachments\n      if (formData.attachments && formData.attachments.length > 0) {\n        fetchAttachments();\n      }\n    } catch (error) {\n      console.error(\"Failed to create post:\", error);\n      toast.error(tActions('error'), tActions('post_failed'));\n      throw error;\n    }\n  };\n\n  const handleVote = async (\n    postId: string,\n    voteType: \"UPVOTE\" | \"DOWNVOTE\"\n  ) => {\n    if (!classData) return;\n\n    // Optimistic update\n    const updatedPosts = classData.posts.map((post) => {\n      if (post.id !== postId) return post;\n\n      const existingVote = post.votes?.find((v: any) => v.userId === user?.id);\n      let newVotes = post.votes ? [...post.votes] : [];\n\n      if (existingVote) {\n        if (existingVote.voteType === voteType) {\n          // Remove vote\n          newVotes = newVotes.filter((v: any) => v.userId !== user?.id);\n        } else {\n          // Change vote\n          newVotes = newVotes.map((v: any) =>\n            v.userId === user?.id ? { ...v, voteType } : v\n          );\n        }\n      } else {\n        // Add vote\n        newVotes.push({ userId: user?.id, voteType });\n      }\n\n      return { ...post, votes: newVotes };\n    });\n\n    setClassData({ ...classData, posts: updatedPosts });\n\n    try {\n      await axios.post(`/api/posts/${postId}/vote`, {\n        userId: user?.id,\n        voteType,\n      });\n    } catch (error) {\n      console.error(\"Failed to vote:\", error);\n      toast.error(tActions('error'), tActions('vote_failed'));\n      // Revert on error\n      fetchClassData();\n    }\n  };\n\n  const handleComment = async (\n    postId: string,\n    content: string,\n    attachments?: FileAttachment[]\n  ) => {\n    if (!content?.trim() || !classData) return;\n\n    // Create optimistic comment\n    const optimisticComment = {\n      id: `temp-${Date.now()}`,\n      content,\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString(),\n      authorId: user?.id || '',\n      author: {\n        id: user?.id || '',\n        name: user?.name || '',\n        email: user?.email || '',\n      },\n      votes: [],\n      attachments: attachments || [],\n    };\n\n    // Optimistic update\n    const updatedPosts = classData.posts.map((post) => {\n      if (post.id !== postId) return post;\n      return {\n        ...post,\n        comments: [...(post.comments || []), optimisticComment],\n        updatedAt: new Date().toISOString(),\n      };\n    });\n\n    setClassData({ ...classData, posts: updatedPosts });\n    toast.success(tActions('comment_added'));\n\n    try {\n      const response = await axios.post(`/api/posts/${postId}/comments`, {\n        authorId: user?.id,\n        content,\n        attachments,\n      });\n\n      // Replace optimistic comment with real data\n      const realComment = response.data;\n      const finalPosts = classData.posts.map((post) => {\n        if (post.id !== postId) return post;\n        return {\n          ...post,\n          comments: [\n            ...(post.comments || []).filter((c: any) => c.id !== optimisticComment.id),\n            realComment,\n          ],\n          updatedAt: new Date().toISOString(),\n        };\n      });\n      setClassData({ ...classData, posts: finalPosts });\n      // Refresh attachments if the comment has attachments\n      if (attachments && attachments.length > 0) {\n        fetchAttachments();\n      }\n    } catch (error) {\n      console.error(\"Failed to comment:\", error);\n      toast.error(tActions('comment_failed'));\n      // Revert optimistic update\n      fetchClassData();\n    }\n  };\n\n  const handleCommentVote = async (\n    commentId: string,\n    voteType: \"UPVOTE\" | \"DOWNVOTE\"\n  ) => {\n    if (!classData) return;\n\n    // Optimistic update\n    const updatedPosts = classData.posts.map((post) => {\n      if (!post.comments) return post;\n\n      const updatedComments = post.comments.map((comment: any) => {\n        if (comment.id !== commentId) return comment;\n\n        const existingVote = comment.votes?.find(\n          (v: any) => v.userId === user?.id\n        );\n        let newVotes = comment.votes ? [...comment.votes] : [];\n\n        if (existingVote) {\n          if (existingVote.voteType === voteType) {\n            // Remove vote\n            newVotes = newVotes.filter((v: any) => v.userId !== user?.id);\n          } else {\n            // Change vote\n            newVotes = newVotes.map((v: any) =>\n              v.userId === user?.id ? { ...v, voteType } : v\n            );\n          }\n        } else {\n          // Add vote\n          newVotes.push({ userId: user?.id, voteType });\n        }\n\n        return { ...comment, votes: newVotes };\n      });\n\n      return { ...post, comments: updatedComments };\n    });\n\n    setClassData({ ...classData, posts: updatedPosts });\n\n    try {\n      await axios.post(`/api/comments/${commentId}/vote`, {\n        userId: user?.id,\n        voteType,\n      });\n    } catch (error) {\n      console.error(\"Failed to vote on comment:\", error);\n      toast.error(tActions('error'), tActions('comment_vote_failed'));\n      // Revert on error\n      fetchClassData();\n    }\n  };\n\n  const handleCommentSortChange = (value: \"time\" | \"votes\") => {\n    setCommentSortOrder(value);\n  };\n\n  const handlePinPost = async (postId: string, pinned: boolean) => {\n    if (!classData) return;\n\n    // Optimistic update\n    const updatedPosts = classData.posts.map((post) =>\n      post.id === postId ? { ...post, pinned: !pinned } : post\n    );\n    setClassData({ ...classData, posts: updatedPosts });\n\n    try {\n      await axios.patch(`/api/posts/${postId}/pin`, {\n        pinned: !pinned,\n        userId: user?.id,\n      });\n      toast.success(\n        !pinned ? tPostActions('pin_success') : tPostActions('unpin_success')\n      );\n    } catch (error) {\n      console.error(\"Failed to pin/unpin post:\", error);\n      toast.error(tPostActions('pin_failed'));\n      // Revert on error\n      fetchClassData();\n    }\n  };\n\n  const handleEditPost = async (\n    postId: string,\n    title: string,\n    content: string,\n    type: string\n  ) => {\n    try {\n      await axios.patch(`/api/posts/${postId}`, {\n        authorId: user?.id,\n        title,\n        content,\n        type,\n      });\n      toast.success(tActions('post_updated'));\n      fetchClassData();\n    } catch (error) {\n      console.error(\"Failed to edit post:\", error);\n      toast.error(tActions('post_update_failed'));\n    }\n  };\n\n  const handleCommentEdit = async (\n    commentId: string,\n    content: string\n  ) => {\n    try {\n      await axios.patch(`/api/comments/${commentId}`, {\n        authorId: user?.id,\n        content,\n      });\n      toast.success(tActions('comment_updated'));\n      fetchClassData();\n    } catch (error) {\n      console.error(\"Failed to edit comment:\", error);\n      toast.error(tActions('comment_update_failed'));\n    }\n  };\n\n  const handleResolvePost = async (\n    postId: string,\n    resolved: boolean,\n    commentId?: string\n  ) => {\n    if (!classData) return;\n\n    // Optimistic update\n    const updatedPosts = classData.posts.map((post) =>\n      post.id === postId\n        ? {\n            ...post,\n            resolved: !resolved,\n            resolvedCommentId: !resolved ? commentId || null : null,\n          }\n        : post\n    );\n    setClassData({ ...classData, posts: updatedPosts });\n\n    try {\n      await axios.patch(`/api/posts/${postId}/resolve`, {\n        resolved: !resolved,\n        resolvedCommentId: !resolved ? commentId : null,\n        userId: user?.id,\n      });\n      toast.success(\n        !resolved ? tPostActions('resolve_success') : tPostActions('unresolve_success')\n      );\n    } catch (error) {\n      console.error(\"Failed to resolve/unresolve post:\", error);\n      toast.error(tPostActions('resolve_failed'));\n      // Revert on error\n      fetchClassData();\n    }\n  };\n\n  const handleMarkAsAnswer = async (\n    postId: string,\n    commentId: string,\n    isCurrentAnswer: boolean\n  ) => {\n    if (!classData) return;\n\n    // If unmarking, just unresolve the post\n    if (isCurrentAnswer) {\n      await handleResolvePost(postId, true, commentId);\n      return;\n    }\n\n    // If marking as answer, resolve the post with this comment\n    const updatedPosts = classData.posts.map((post) =>\n      post.id === postId\n        ? { ...post, resolved: true, resolvedCommentId: commentId }\n        : post\n    );\n    setClassData({ ...classData, posts: updatedPosts });\n\n    try {\n      await axios.patch(`/api/posts/${postId}/resolve`, {\n        resolved: true,\n        resolvedCommentId: commentId,\n        userId: user?.id,\n      });\n      toast.success(tPostActions('marked_as_answer'));\n    } catch (error) {\n      console.error(\"Failed to mark as answer:\", error);\n      toast.error(tPostActions('resolve_failed'));\n      // Revert on error\n      fetchClassData();\n    }\n  };\n\n  const handleDeletePost = async (postId: string) => {\n    // Open confirmation dialog\n    setPostToDelete(postId);\n    setIsDeletePostDialogOpen(true);\n  };\n\n  const confirmDeletePost = async () => {\n    if (!postToDelete || !classData) return;\n\n    const postHasAttachments = classData.posts.find(\n      (p) => p.id === postToDelete\n    )?.attachments?.length > 0;\n\n    try {\n      await axios.delete(`/api/posts/${postToDelete}`, {\n        data: { authorId: user?.id },\n      });\n      toast.success(tActions('post_deleted'), tActions('post_deleted_success'));\n      setIsDeletePostDialogOpen(false);\n      setPostToDelete(null);\n      fetchClassData();\n      // Refresh attachments if post had attachments\n      if (postHasAttachments) {\n        fetchAttachments();\n      }\n    } catch (error) {\n      console.error(\"Failed to delete post:\", error);\n      toast.error(tActions('error'), tActions('post_delete_failed'));\n    }\n  };\n\n  const handleCommentDelete = async (commentId: string) => {\n    // Open confirmation dialog\n    setCommentToDelete(commentId);\n    setIsDeleteCommentDialogOpen(true);\n  };\n\n  const confirmDeleteComment = async () => {\n    if (!commentToDelete || !classData) return;\n\n    // Check if comment has attachments\n    let commentHasAttachments = false;\n    for (const post of classData.posts) {\n      const comment = post.comments?.find((c: any) => c.id === commentToDelete);\n      if (comment?.attachments?.length > 0) {\n        commentHasAttachments = true;\n        break;\n      }\n    }\n\n    try {\n      await axios.delete(`/api/comments/${commentToDelete}`, {\n        data: { authorId: user?.id },\n      });\n      toast.success(tActions('comment_deleted'), tActions('comment_deleted_success'));\n      setIsDeleteCommentDialogOpen(false);\n      setCommentToDelete(null);\n      fetchClassData();\n      // Refresh attachments if comment had attachments\n      if (commentHasAttachments) {\n        fetchAttachments();\n      }\n    } catch (error) {\n      console.error(\"Failed to delete comment:\", error);\n      toast.error(tActions('error'), tActions('comment_delete_failed'));\n    }\n  };\n\n  const handleLeave = async () => {\n    try {\n      await axios.delete(`/api/classes/${id}/teachers?teacherId=${user?.id}`);\n      setIsLeaveDialogOpen(false);\n      toast.info(tActions('left_class'), tActions('can_rejoin_anytime'));\n      router.push(`/${locale}/dashboard/teacher/classes`);\n    } catch (error) {\n      console.error(\"Failed to leave class:\", error);\n      toast.error(tActions('error'), tActions('leave_class_failed'));\n    }\n  };\n\n  const handleDelete = async () => {\n    try {\n      await axios.delete(`/api/classes/${id}`);\n      setIsLeaveDialogOpen(false);\n      toast.success(tActions('class_deleted'), tActions('class_deleted_success'));\n      router.push(`/${locale}/dashboard/teacher/classes`);\n    } catch (error) {\n      console.error(\"Failed to delete class:\", error);\n      toast.error(tActions('error'), tActions('delete_class_failed'));\n    }\n  };\n\n  const handleJoin = async () => {\n    try {\n      await axios.post(`/api/classes/${id}/teachers`, {\n        teacherId: user?.id,\n        role: \"TEACHER\",\n      });\n      toast.success(tActions('joined_class'), tActions('joined_teaching_class'));\n      fetchClassData();\n    } catch (error) {\n      console.error(\"Failed to join class:\", error);\n      toast.error(tActions('error'), tActions('join_class_failed'));\n    }\n  };\n\n  const handleCreateAssignment = async (formData: {\n    title: string;\n    description: string;\n    dueDate: string;\n    maxPoints: number;\n    groupId: string | null;\n    isSeparateSubmission: boolean;\n    attachments?: FileAttachment[];\n  }) => {\n    try {\n      await axios.post(`/api/classes/${id}/assignments`, {\n        ...formData,\n        createdById: user?.id,\n      });\n      setIsAssignmentDialogOpen(false);\n      toast.success(tActions('assignment_created'), tActions('assignment_created_success'));\n      fetchAssignments();\n    } catch (error) {\n      console.error(\"Failed to create assignment:\", error);\n      toast.error(tActions('error'), tActions('create_assignment_failed'));\n      throw error;\n    }\n  };\n\n  const handleDeleteAssignment = async (assignmentId: string) => {\n    if (!confirm(tActions('confirm_delete_assignment'))) return;\n\n    try {\n      await axios.delete(`/api/assignments/${assignmentId}`);\n      toast.success(tActions('deleted'), tActions('assignment_deleted'));\n      fetchAssignments();\n    } catch (error) {\n      console.error(\"Failed to delete assignment:\", error);\n      toast.error(tActions('error'), tActions('delete_assignment_failed'));\n    }\n  };\n\n  const handleUploadAttachment = async (formData: {\n    fileName: string;\n    fileUrl: string;\n    fileSize: number;\n    mimeType: string;\n  }) => {\n    try {\n      await axios.post(`/api/classes/${id}/attachments`, {\n        uploaderId: user?.id,\n        ...formData,\n      });\n      setIsUploadAttachmentOpen(false);\n      toast.success(tActions('uploaded'), tActions('file_uploaded_success'));\n      fetchAttachments();\n    } catch (error) {\n      console.error(\"Failed to upload attachment:\", error);\n      toast.error(tActions('error'), tActions('upload_failed'));\n    }\n  };\n\n  const handleDeleteAttachment = async (attachmentId: string) => {\n    if (!confirm(tActions('confirm_delete_file'))) return;\n\n    try {\n      await axios.delete(`/api/classes/${id}/attachments/${attachmentId}`);\n      toast.success(tActions('deleted'), tActions('file_deleted'));\n      fetchAttachments();\n    } catch (error) {\n      console.error(\"Failed to delete attachment:\", error);\n      toast.error(tActions('error'), tActions('delete_failed'));\n    }\n  };\n\n  const handleSaveGroups = async (\n    groups: Array<{ name: string; memberIds: string[] }>\n  ) => {\n    if (!classData) return;\n\n    try {\n      // Calculate changes\n      const oldGroupNames = (classData.groups || []).map((g) => g.name);\n      const newGroupNames = groups.map((g) => g.name);\n\n      const addedGroups = newGroupNames.filter(\n        (name) => !oldGroupNames.includes(name)\n      );\n      const deletedGroups = oldGroupNames.filter(\n        (name) => !newGroupNames.includes(name)\n      );\n      const keptGroups = newGroupNames.filter((name) =>\n        oldGroupNames.includes(name)\n      );\n\n      await axios.post(`/api/classes/${id}/groups`, {\n        groups,\n        createdById: user?.id,\n      });\n\n      // Create detailed message\n      let message = \"\";\n      if (addedGroups.length > 0) {\n        message += tActions('groups_added', { groups: addedGroups.join(\", \") }) + \" \";\n      }\n      if (deletedGroups.length > 0) {\n        message += tActions('groups_deleted', { groups: deletedGroups.join(\", \") }) + \" \";\n      }\n      if (addedGroups.length === 0 && deletedGroups.length === 0) {\n        message = tActions('groups_updated', { count: keptGroups.length });\n      }\n\n      toast.success(tActions('group_config_saved'), message.trim());\n      fetchClassData();\n    } catch (error) {\n      console.error(\"Failed to save groups:\", error);\n      toast.error(tActions('error'), tActions('save_groups_failed'));\n      throw error;\n    }\n  };\n\n  const handleSaveMembers = async (changes: {\n    addedTeachers: string[];\n    removedTeachers: string[];\n    addedStudents: string[];\n    removedStudents: string[];\n  }) => {\n    try {\n      // Process teacher changes\n      for (const teacherId of changes.addedTeachers) {\n        await axios.post(`/api/classes/${id}/teachers`, {\n          teacherId,\n          role: \"TEACHER\",\n        });\n      }\n\n      for (const teacherId of changes.removedTeachers) {\n        await axios.delete(\n          `/api/classes/${id}/teachers?teacherId=${teacherId}`\n        );\n      }\n\n      // Process student changes\n      for (const studentId of changes.addedStudents) {\n        await axios.post(`/api/classes/${id}/enroll`, {\n          studentId,\n        });\n      }\n\n      for (const studentId of changes.removedStudents) {\n        await axios.delete(`/api/classes/${id}/enroll?studentId=${studentId}`);\n      }\n\n      // Create detailed message\n      let message = \"\";\n      if (changes.addedTeachers.length > 0) {\n        message += tActions('teachers_added', { count: changes.addedTeachers.length }) + \" \";\n      }\n      if (changes.removedTeachers.length > 0) {\n        message += tActions('teachers_removed', { count: changes.removedTeachers.length }) + \" \";\n      }\n      if (changes.addedStudents.length > 0) {\n        message += tActions('students_added', { count: changes.addedStudents.length }) + \" \";\n      }\n      if (changes.removedStudents.length > 0) {\n        message += tActions('students_removed', { count: changes.removedStudents.length }) + \" \";\n      }\n\n      toast.success(tActions('members_saved'), message.trim());\n      fetchClassData();\n    } catch (error) {\n      console.error(\"Failed to save members:\", error);\n      toast.error(tActions('error'), tActions('save_members_failed'));\n      throw error;\n    }\n  };\n\n  const handleOpenSessionDialog = (sessionId?: string) => {\n    setSelectedSessionId(sessionId || null);\n    setIsAttendanceDialogOpen(true);\n  };\n\n  const handleCloseAttendanceDialog = () => {\n    setIsAttendanceDialogOpen(false);\n    setSelectedSessionId(null);\n    fetchAttendanceSessions(); // Refresh the list\n  };\n\n  if (isLoading || loading) {\n    return (\n      <div className=\"min-h-screen bg-mint-50\">\n        <DashboardNavBar tabs={teacherTabs} />\n        <Container size=\"4\" className=\"py-8\">\n          <Text size=\"5\" className=\"text-gray-600\">\n            {t('loading')}\n          </Text>\n        </Container>\n      </div>\n    );\n  }\n\n  if (!user || !classData) {\n    return null;\n  }\n\n  return (\n    <div className=\"min-h-screen bg-mint-50\">\n      <DashboardNavBar tabs={teacherTabs} />\n\n      <Container size=\"4\" className=\"py-8\">\n        <Flex direction=\"column\" gap=\"6\">\n          {/* Class Header */}\n          <ClassHeader\n            classData={classData}\n            isEnrolled={isTeaching}\n            enrolledLabel={tButtons('teaching')}\n            onBack={() => router.push(`/${locale}/dashboard/teacher/classes`)}\n            role=\"teacher\"\n            actionButton={\n              isTeaching ? (\n                <Flex gap=\"2\">\n                  <Button\n                    variant=\"soft\"\n                    onClick={() => setIsSettingsDialogOpen(true)}\n                  >\n                    <FiSettings size={16} />\n                    {tButtons('class_settings')}\n                  </Button>\n                  <Button\n                    variant=\"soft\"\n                    onClick={() => setIsMembersDialogOpen(true)}\n                  >\n                    <FiUsers size={16} />\n                    {tButtons('manage_members')}\n                  </Button>\n                  <Button\n                    variant=\"soft\"\n                    onClick={() => setIsGroupDialogOpen(true)}\n                  >\n                    <FiSettings size={16} />\n                    {classData.groups && classData.groups.length > 0\n                      ? tButtons('configure_groups')\n                      : tButtons('create_groups')}\n                  </Button>\n                  <ConfirmDialog\n                    open={isLeaveDialogOpen}\n                    onOpenChange={setIsLeaveDialogOpen}\n                    title={\n                      isCreator\n                        ? tActions('confirm_delete_class')\n                        : tActions('confirm_leave_teaching')\n                    }\n                    description={\n                      isCreator\n                        ? tActions('confirm_delete_class_description')\n                        : tActions('confirm_leave_teaching_description')\n                    }\n                    onConfirm={isCreator ? handleDelete : handleLeave}\n                    trigger={\n                      <Button color=\"red\" variant=\"soft\">\n                        {isCreator ? (\n                          <>\n                            <FiTrash2 size={16} /> {tButtons('delete_class')}\n                          </>\n                        ) : (\n                          <>\n                            <FiLogOut size={16} /> {tButtons('leave_class')}\n                          </>\n                        )}\n                      </Button>\n                    }\n                  />\n                </Flex>\n              ) : (\n                <Button\n                  className=\"bg-mint-500 hover:bg-mint-600\"\n                  onClick={handleJoin}\n                >\n                  <FiUserPlus size={16} /> {tButtons('join_teaching')}\n                </Button>\n              )\n            }\n          />\n\n          {/* Class Settings Dialog */}\n          {isTeaching && (\n            <ClassSettingsDialog\n              open={isSettingsDialogOpen}\n              onOpenChange={setIsSettingsDialogOpen}\n              classData={classData}\n              onUpdate={fetchClassData}\n            />\n          )}\n\n          {/* Group Management Dialog */}\n          <GroupManagementDialog\n            open={isGroupDialogOpen}\n            onOpenChange={setIsGroupDialogOpen}\n            students={classData.enrollments.map((e) => e.student)}\n            existingGroups={classData.groups}\n            onSave={handleSaveGroups}\n          />\n\n          {/* Tabs Content */}\n          <Tabs.Root defaultValue={isTeaching ? \"posts\" : \"students\"}>\n            <Tabs.List>\n              {isTeaching && (\n                <>\n                  <Tabs.Trigger value=\"posts\">{tTabs('posts')}</Tabs.Trigger>\n                  <Tabs.Trigger value=\"assignments\">{tTabs('assignments')}</Tabs.Trigger>\n                  <Tabs.Trigger value=\"materials\">{tTabs('materials')}</Tabs.Trigger>\n                  <Tabs.Trigger value=\"attachments\">{tTabs('attachments')}</Tabs.Trigger>\n                </>\n              )}\n              <Tabs.Trigger value=\"students\">{tTabs('students')}</Tabs.Trigger>\n              {isTeaching && (\n                <Tabs.Trigger value=\"attendance\">{tTabs('attendance')}</Tabs.Trigger>\n              )}\n            </Tabs.List>\n\n            {/* Posts Tab - Only for teaching teachers */}\n            {isTeaching && (\n              <Tabs.Content value=\"posts\">\n                <Flex direction=\"column\" gap=\"4\" className=\"mt-6\">\n                  <Flex justify=\"between\" align=\"center\">\n                    <Heading size=\"6\">{tSections('posts_in_class')}</Heading>\n                    <Flex gap=\"2\" align=\"center\">\n                      <Select.Root value={postSortOrder} onValueChange={(value: any) => setPostSortOrder(value)} size=\"2\">\n                        <Select.Trigger>\n                          {tPostSort('sort_by')} {tPostSort(postSortOrder)}\n                        </Select.Trigger>\n                        <Select.Content>\n                          <Select.Item value=\"latest\">{tPostSort('latest')}</Select.Item>\n                          <Select.Item value=\"recently_updated\">{tPostSort('recently_updated')}</Select.Item>\n                          <Select.Item value=\"most_votes\">{tPostSort('most_votes')}</Select.Item>\n                          <Select.Item value=\"oldest\">{tPostSort('oldest')}</Select.Item>\n                        </Select.Content>\n                      </Select.Root>\n                      <Button\n                        className=\"bg-mint-500 hover:bg-mint-600\"\n                        onClick={() => setIsPostDialogOpen(true)}\n                      >\n                        <FiPlus size={16} /> {tButtons('create_post')}\n                      </Button>\n                    </Flex>\n                  </Flex>\n\n                  <CreatePostDialog\n                    open={isPostDialogOpen}\n                    onOpenChange={setIsPostDialogOpen}\n                    onSubmit={handleCreatePost}\n                  />\n\n                  {classData.posts && classData.posts.length > 0 ? (\n                    <Flex direction=\"column\" gap=\"3\">\n                      {(() => {\n                        const sortedPosts = [...classData.posts].sort((a, b) => {\n                          // Pinned posts always come first\n                          if (a.pinned && !b.pinned) return -1;\n                          if (!a.pinned && b.pinned) return 1;\n\n                          // Then sort by selected order\n                          switch (postSortOrder) {\n                            case 'latest':\n                              return new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime();\n                            case 'oldest':\n                              return new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime();\n                            case 'recently_updated':\n                              return new Date(b.updatedAt).getTime() - new Date(a.updatedAt).getTime();\n                            case 'most_votes':\n                              const aVotes = (a.votes?.filter((v: any) => v.voteType === 'UPVOTE').length || 0) - (a.votes?.filter((v: any) => v.voteType === 'DOWNVOTE').length || 0);\n                              const bVotes = (b.votes?.filter((v: any) => v.voteType === 'UPVOTE').length || 0) - (b.votes?.filter((v: any) => v.voteType === 'DOWNVOTE').length || 0);\n                              return bVotes - aVotes;\n                            default:\n                              return 0;\n                          }\n                        });\n\n                        return sortedPosts.map((post) => {\n                          const userVote = post.votes?.find(\n                            (v: any) => v.userId === user.id\n                          );\n                          return (\n                            <PostCard\n                            key={post.id}\n                            post={post}\n                            currentUserId={user.id}\n                            userVote={userVote}\n                            onVote={handleVote}\n                            onComment={handleComment}\n                            commentSortOrder={commentSortOrder}\n                            onCommentSortChange={handleCommentSortChange}\n                            onCommentVote={handleCommentVote}\n                            onCommentEdit={handleCommentEdit}\n                            onCommentDelete={handleCommentDelete}\n                            isTeacher={true}\n                            onPin={handlePinPost}\n                            onEdit={handleEditPost}\n                            onDelete={handleDeletePost}\n                            onResolve={handleResolvePost}\n                            onMarkAnswer={(postId, commentId, isCurrentAnswer) =>\n                              handleMarkAsAnswer(postId, commentId, isCurrentAnswer)\n                            }\n                          />\n                        );\n                      });\n                      })()}\n                    </Flex>\n                  ) : (\n                    <Card className=\"bg-white p-8 text-center\">\n                      <FiMessageSquare\n                        className=\"mx-auto text-gray-400 mb-4\"\n                        size={48}\n                      />\n                      <Text className=\"text-gray-600\">\n                        {tEmpty('no_posts')}\n                      </Text>\n                    </Card>\n                  )}\n                </Flex>\n              </Tabs.Content>\n            )}\n\n            {/* Assignments Tab - Only for teaching teachers */}\n            {isTeaching && (\n              <Tabs.Content value=\"assignments\">\n                <Flex direction=\"column\" gap=\"4\" className=\"mt-6\">\n                  <Flex justify=\"between\" align=\"center\">\n                    <Heading size=\"6\">{tSections('assignments')}</Heading>\n                    <Button\n                      className=\"bg-mint-500 hover:bg-mint-600\"\n                      onClick={() => setIsAssignmentDialogOpen(true)}\n                    >\n                      <FiPlus size={16} /> {tButtons('create_assignment')}\n                    </Button>\n                  </Flex>\n\n                  <CreateAssignmentDialog\n                    open={isAssignmentDialogOpen}\n                    onOpenChange={setIsAssignmentDialogOpen}\n                    onSubmit={handleCreateAssignment}\n                    groups={classData.groups || []}\n                  />\n\n                  {assignments.length > 0 ? (\n                    <Flex direction=\"column\" gap=\"3\">\n                      {assignments.map((assignment) => (\n                        <AssignmentCard\n                          key={assignment.id}\n                          assignment={assignment}\n                          canDelete={true}\n                          onDelete={() => handleDeleteAssignment(assignment.id)}\n                        />\n                      ))}\n                    </Flex>\n                  ) : (\n                    <Card className=\"bg-white p-8 text-center\">\n                      <FiFileText\n                        className=\"mx-auto text-gray-400 mb-4\"\n                        size={48}\n                      />\n                      <Text className=\"text-gray-600\">\n                        {tEmpty('no_assignments_prompt')}\n                      </Text>\n                    </Card>\n                  )}\n                </Flex>\n              </Tabs.Content>\n            )}\n\n            {/* Materials Tab - Only for teaching teachers */}\n            {isTeaching && (\n              <Tabs.Content value=\"materials\">\n                <Flex direction=\"column\" gap=\"4\" className=\"mt-6\">\n                  <Flex justify=\"between\" align=\"center\">\n                    <Heading size=\"6\">{tSections('learning_materials')}</Heading>\n                    <Button\n                      className=\"bg-mint-500 hover:bg-mint-600\"\n                      onClick={() => {\n                        // TODO: Add upload learning material dialog\n                        toast.info(\n                          tActions('coming_soon'),\n                          tActions('material_upload_coming_soon')\n                        );\n                      }}\n                    >\n                      <FiPlus size={16} /> {tButtons('upload_material')}\n                    </Button>\n                  </Flex>\n\n                  {materials.length > 0 ? (\n                    <Flex direction=\"column\" gap=\"4\">\n                      {materials.map((material) => (\n                        <MaterialCard\n                          key={material.id}\n                          material={material}\n                          canDelete={material.uploadedBy?.id === user?.id}\n                          onDelete={(id) => {\n                            // TODO: Add delete material function\n                            toast.info(\n                              tActions('coming_soon'),\n                              tActions('material_delete_coming_soon')\n                            );\n                          }}\n                        />\n                      ))}\n                    </Flex>\n                  ) : (\n                    <Card className=\"bg-white p-8 text-center\">\n                      <FiFile\n                        className=\"mx-auto text-gray-400 mb-4\"\n                        size={48}\n                      />\n                      <Text className=\"text-gray-600\">\n                        {tEmpty('no_materials')}\n                      </Text>\n                    </Card>\n                  )}\n                </Flex>\n              </Tabs.Content>\n            )}\n\n            {/* Attachments Tab - Only for teaching teachers */}\n            {isTeaching && (\n              <Tabs.Content value=\"attachments\">\n                <Flex direction=\"column\" gap=\"4\" className=\"mt-6\">\n                  <Flex justify=\"between\" align=\"center\">\n                    <Heading size=\"6\">{tSections('attachments')}</Heading>\n                    <Button\n                      className=\"bg-mint-500 hover:bg-mint-600\"\n                      onClick={() => {\n                        setIsUploadAttachmentOpen(true);\n                      }}\n                    >\n                      <FiPlus size={16} /> {tButtons('upload_file')}\n                    </Button>\n                  </Flex>\n\n                  <UploadAttachmentDialog\n                    open={isUploadAttachmentOpen}\n                    onOpenChange={setIsUploadAttachmentOpen}\n                    onUpload={handleUploadAttachment}\n                  />\n\n                  {attachments.length > 0 ? (\n                    <Flex direction=\"column\" gap=\"2\">\n                      {attachments.map((attachment) => (\n                        <AttachmentListing\n                          key={attachment.id}\n                          attachment={attachment}\n                          canDelete={true}\n                          onDelete={handleDeleteAttachment}\n                        />\n                      ))}\n                    </Flex>\n                  ) : (\n                    <Card className=\"bg-white p-8 text-center\">\n                      <FiFile\n                        className=\"mx-auto text-gray-400 mb-4\"\n                        size={48}\n                      />\n                      <Text className=\"text-gray-600\">\n                        {tEmpty('no_attachments')}\n                      </Text>\n                    </Card>\n                  )}\n                </Flex>\n              </Tabs.Content>\n            )}\n\n            {/* Students Tab */}\n            <Tabs.Content value=\"students\">\n              <Flex direction=\"column\" gap=\"4\" className=\"mt-6\">\n                <Heading size=\"6\">\n                  {tSections('student_list', { count: classData.enrollments.length })}\n                </Heading>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3\">\n                  {classData.enrollments.map((enrollment) => (\n                    <Card key={enrollment.student.id} className=\"bg-white p-4\">\n                      <Flex align=\"center\" gap=\"3\">\n                        <Avatar\n                          size=\"3\"\n                          src={enrollment.student.avatar || undefined}\n                          fallback={enrollment.student.name.charAt(0)}\n                          className=\"bg-mint-500\"\n                        />\n                        <div>\n                          <Text weight=\"bold\">\n                            {enrollment.student.name}\n                            {enrollment.student.studentCode && (\n                              <span className=\"text-gray-500 font-normal\">\n                                {\" \"}\n                                ({enrollment.student.studentCode})\n                              </span>\n                            )}\n                          </Text>\n                        </div>\n                      </Flex>\n                    </Card>\n                  ))}\n                </div>\n              </Flex>\n            </Tabs.Content>\n\n            {/* Attendance Tab - Only for teaching teachers */}\n            {isTeaching && (\n              <Tabs.Content value=\"attendance\">\n                <Flex direction=\"column\" gap=\"4\" className=\"mt-6\">\n                  <Flex justify=\"between\" align=\"center\">\n                    <Heading size=\"6\">{tSections('attendance')}</Heading>\n                    <Button\n                      className=\"bg-mint-500 hover:bg-mint-600\"\n                      onClick={() => handleOpenSessionDialog()}\n                    >\n                      <FiCheckCircle size={16} /> {tButtons('start_attendance')}\n                    </Button>\n                  </Flex>\n\n                  <AttendanceSessionDialog\n                    open={isAttendanceDialogOpen}\n                    onOpenChange={handleCloseAttendanceDialog}\n                    classId={id}\n                    students={classData.enrollments.map((e) => ({\n                      ...e.student,\n                      studentCode: e.student.studentCode ?? null,\n                    }))}\n                    sessionId={selectedSessionId}\n                  />\n\n                  {attendanceSessions.length > 0 ? (\n                    <Flex direction=\"column\" gap=\"3\">\n                      {attendanceSessions.map((session) => {\n                        const totalStudents = classData.enrollments.length;\n                        const checkedInCount = session.checkIns?.length || 0;\n                        const attendanceRate =\n                          totalStudents > 0\n                            ? Math.round((checkedInCount / totalStudents) * 100)\n                            : 0;\n\n                        const isActive = session.status === \"ACTIVE\";\n                        const isExpired =\n                          session.endTime &&\n                          new Date() > new Date(session.endTime);\n\n                        return (\n                          <Card\n                            key={session.id}\n                            className=\"cursor-pointer hover:shadow-md transition-shadow\"\n                            onClick={() => handleOpenSessionDialog(session.id)}\n                          >\n                            <Flex direction=\"column\" gap=\"3\" p=\"4\">\n                              <Flex justify=\"between\" align=\"start\">\n                                <Flex direction=\"column\" gap=\"2\">\n                                  <Flex align=\"center\" gap=\"2\">\n                                    <FiClock className=\"text-mint-500\" />\n                                    <Text size=\"3\" weight=\"bold\">\n                                      {session.title}\n                                    </Text>\n                                  </Flex>\n                                  <Text size=\"2\" className=\"text-gray-600\">\n                                    {tSections('attendance_code')}:{\" \"}\n                                    <span className=\"font-mono font-bold\">\n                                      {session.sessionCode}\n                                    </span>\n                                  </Text>\n                                  <Text size=\"1\" className=\"text-gray-500\">\n                                    {tSections('started_at')}:{\" \"}\n                                    {new Date(session.startTime).toLocaleString(\n                                      \"vi-VN\",\n                                      {\n                                        day: \"2-digit\",\n                                        month: \"2-digit\",\n                                        year: \"numeric\",\n                                        hour: \"2-digit\",\n                                        minute: \"2-digit\",\n                                      }\n                                    )}\n                                  </Text>\n                                </Flex>\n                                <Flex direction=\"column\" gap=\"2\" align=\"end\">\n                                  <Badge\n                                    color={\n                                      isActive && !isExpired\n                                        ? \"green\"\n                                        : isExpired\n                                        ? \"orange\"\n                                        : \"gray\"\n                                    }\n                                    size=\"2\"\n                                  >\n                                    {isActive && !isExpired\n                                      ? tSections('status_active')\n                                      : isExpired\n                                      ? tSections('status_expired')\n                                      : tSections('status_closed')}\n                                  </Badge>\n                                  <Text size=\"2\" weight=\"bold\">\n                                    {checkedInCount}/{totalStudents} {tSections('students_short')} (\n                                    {attendanceRate}%)\n                                  </Text>\n                                </Flex>\n                              </Flex>\n                            </Flex>\n                          </Card>\n                        );\n                      })}\n                    </Flex>\n                  ) : (\n                    <Card className=\"bg-white p-8 text-center\">\n                      <FiCheckCircle\n                        className=\"mx-auto text-gray-400 mb-4\"\n                        size={48}\n                      />\n                      <Text className=\"text-gray-600\">\n                        {tEmpty('no_attendance_sessions')}\n                      </Text>\n                    </Card>\n                  )}\n                </Flex>\n              </Tabs.Content>\n            )}\n          </Tabs.Root>\n        </Flex>\n      </Container>\n\n      {/* Dialogs */}\n      <GroupManagementDialog\n        open={isGroupDialogOpen}\n        onOpenChange={setIsGroupDialogOpen}\n        students={classData.enrollments.map((e) => e.student)}\n        existingGroups={classData.groups || []}\n        onSave={handleSaveGroups}\n      />\n\n      <MembersManagementDialog\n        open={isMembersDialogOpen}\n        onOpenChange={setIsMembersDialogOpen}\n        classId={id}\n        createdBy={classData.createdBy}\n        currentUserId={user?.id || \"\"}\n        existingTeachers={classData.teachers.map((t) => ({\n          teacher: {\n            ...t.teacher,\n            email: \"\",\n            role: \"TEACHER\",\n          },\n        }))}\n        existingStudents={classData.enrollments.map((e) => ({\n          student: {\n            ...e.student,\n            role: \"STUDENT\",\n          },\n        }))}\n        onSave={handleSaveMembers}\n      />\n\n      <ClassSettingsDialog\n        open={isSettingsDialogOpen}\n        onOpenChange={setIsSettingsDialogOpen}\n        classData={classData}\n        onUpdate={fetchClassData}\n      />\n\n      <ConfirmDialog\n        open={isDeletePostDialogOpen}\n        onOpenChange={setIsDeletePostDialogOpen}\n        onConfirm={confirmDeletePost}\n        title={tActions('delete_post_title')}\n        description={tActions('delete_post_description')}\n        confirmLabel={tActions('delete')}\n        cancelLabel={tActions('cancel')}\n      />\n\n      <ConfirmDialog\n        open={isDeleteCommentDialogOpen}\n        onOpenChange={setIsDeleteCommentDialogOpen}\n        onConfirm={confirmDeleteComment}\n        title={tActions('delete_comment_title')}\n        description={tActions('delete_comment_description')}\n        confirmLabel={tActions('delete')}\n        cancelLabel={tActions('cancel')}\n      />\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}